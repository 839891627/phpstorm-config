<application>
  <component name="VimEditorSettings">
    <editor>
      <key-repeat enabled="true" />
    </editor>
  </component>
  <component name="VimHistorySettings">
    <history>
      <history-search>
        <entry encoding="base64">XDxnZXRQZXJpb2RMaW1pdEFjY291bnRcPg==</entry>
        <entry encoding="base64">XDxhY2NvdW50WVw+</entry>
        <entry encoding="base64">XDxCYW5rQ2FzaExvYW5PcmRlclw+</entry>
        <entry encoding="base64">XDxwb29sSW5mb1w+</entry>
        <entry encoding="base64">XDx1c2VQb29sXD4=</entry>
        <entry encoding="base64">XDxnZXRDYXNoTG9hbk9yZGVyU3RhdHVzXD4=</entry>
        <entry encoding="base64">XDxjYXNoTG9hbk9yZGVyXD4=</entry>
        <entry encoding="base64">XDxnZXROZXh0VXJsXD4=</entry>
        <entry encoding="base64">XDxDYXNoTG9hbk9yZGVyXD4=</entry>
        <entry encoding="base64">XDxGdW5kTG9hbk9yZGVySW50ZXJmYWNlXD4=</entry>
        <entry encoding="base64">XDxvcmRlckNyZWF0ZVw+</entry>
        <entry encoding="base64">XDxjaGVja0hlbHBMb2FuU3RhdHVzXD4=</entry>
        <entry encoding="base64">XDxvcmRlckF1ZGl0XD4=</entry>
        <entry encoding="base64">XDxvcmRlclJlbWl0XD4=</entry>
        <entry encoding="base64">XDzph43lj5FcPg==</entry>
        <entry encoding="base64">XDx2ZXJpZnlJbm5lckFwcFw+</entry>
        <entry encoding="base64">XDxyZW1haW5QZXJpb2RBbW91bnRcPg==</entry>
        <entry encoding="base64">XDxjYW5GdW5kU291cmNlQXJyXD4=</entry>
        <entry encoding="base64">XDxxdWVyeVBhcmFtc1w+</entry>
        <entry encoding="base64">XDxib2R5UGFyYW1zXD4=</entry>
      </history-search>
      <history-cmd>
        <entry encoding="base64">JzwsJz5hY3Rpb24gR290b0NsYXNz</entry>
        <entry>action GotoClass</entry>
        <entry>source ~/.ideavimrc</entry>
        <entry>action FileStructurePopup</entry>
        <entry>action Forward</entry>
        <entry>action GotoFile</entry>
        <entry>action Annotate</entry>
        <entry>action Find</entry>
        <entry>action KJumpAction.Word0</entry>
        <entry>action SurroundWith</entry>
        <entry>action Back</entry>
        <entry>action PreviousTab</entry>
        <entry>.,.+4nohls</entry>
        <entry>action CloseAllEditors</entry>
        <entry>action SelectInProjectView</entry>
        <entry>vs</entry>
        <entry>action NextTab</entry>
        <entry>nohls</entry>
        <entry>action NextSplitter</entry>
        <entry>wq</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
  </component>
  <component name="VimKeySettings">
    <shortcut-conflicts>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed J</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed K</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed L</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed SEMICOLON</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>shift ctrl pressed SEMICOLON</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
  <component name="VimMarksSettings">
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/Docker/my-framework/library/Http/Controller.php" timestamp="1590142558538">
        <mark key="[" line="22" column="4" />
        <mark key="]" line="29" column="59" />
        <mark key="." line="29" column="58" />
        <mark key="^" line="29" column="59" />
      </file>
      <file name="$USER_HOME$/Docker/hyperf-skeleton/app/Listener/SendSms.php" timestamp="1590127965460">
        <mark key="'" line="29" column="20" />
        <mark key="[" line="38" column="0" />
        <mark key="]" line="38" column="47" />
        <mark key="^" line="38" column="20" />
        <mark key="." line="38" column="19" />
      </file>
      <file name="/Dummy.txt" timestamp="1590142607235">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/Docker/my-framework/library/Exception/FException.php" timestamp="1590140832660">
        <mark key="'" line="92" column="1" />
        <mark key="[" line="6" column="0" />
        <mark key="]" line="6" column="0" />
        <mark key="^" line="8" column="17" />
        <mark key="." line="6" column="0" />
      </file>
      <file name="$USER_HOME$/Docker/my-framework/vendor/composer/autoload_psr4.php" timestamp="1590142607639">
        <mark key="[" line="0" column="5" />
      </file>
      <file name="$USER_HOME$/Docker/shoufuyou-php-lib/hyperframework/hyperframework/lib/Db/DbClientEngine.php" timestamp="1590134865214">
        <mark key="'" line="422" column="52" />
      </file>
      <file name="$USER_HOME$/Docker/my-framework/library/Components/Base.php" timestamp="1590141091973">
        <mark key="'" line="38" column="49" />
        <mark key="[" line="52" column="8" />
        <mark key="]" line="53" column="0" />
        <mark key="." line="51" column="5" />
        <mark key="^" line="53" column="15" />
      </file>
      <file name="$USER_HOME$/Docker/my-framework/library/Application.php" timestamp="1590142817105">
        <mark key="'" line="54" column="23" />
        <mark key="[" line="52" column="19" />
        <mark key="]" line="52" column="23" />
        <mark key="^" line="52" column="23" />
        <mark key="." line="52" column="22" />
      </file>
      <file name="$USER_HOME$/Docker/my-framework/library/Functions.php" timestamp="1590140653077">
        <mark key="[" line="5" column="3" />
      </file>
      <file name="$USER_HOME$/Docker/my-framework/library/Components/Response.php" timestamp="1590142376434">
        <mark key="[" line="29" column="8" />
        <mark key="]" line="31" column="21" />
        <mark key="." line="31" column="20" />
        <mark key="^" line="31" column="21" />
      </file>
      <file name="$USER_HOME$/Docker/shoufuyou-notify/lib/Models/Utms/Hs.php" timestamp="1590137143521">
        <mark key="'" line="80" column="8" />
      </file>
      <file name="$USER_HOME$/Docker/my-framework/library/Components/Request.php" timestamp="1590142194922">
        <mark key="'" line="98" column="0" />
        <mark key="[" line="97" column="0" />
        <mark key="]" line="97" column="9" />
        <mark key="." line="97" column="0" />
      </file>
      <file name="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/CashLoan/BankCash/BankCashLoanOrder.php" timestamp="1590373747779">
        <mark key="'" line="27" column="0" />
        <mark key="[" line="27" column="0" />
        <mark key="]" line="752" column="0" />
      </file>
      <file name="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" timestamp="1590373757691">
        <mark key="[" line="31" column="0" />
        <mark key="]" line="741" column="56" />
        <mark key="." line="31" column="0" />
      </file>
      <file name="$USER_HOME$/Docker/my-framework/composer.json" timestamp="1590140420672">
        <mark key="[" line="12" column="9" />
        <mark key="]" line="11" column="25" />
        <mark key="^" line="11" column="25" />
        <mark key="." line="11" column="24" />
      </file>
      <file name="$USER_HOME$/Docker/shoufuyou-php-lib/hyperframework/hyperframework/lib/Db/DbClient.php" timestamp="1590134849968">
        <mark key="'" line="197" column="40" />
      </file>
      <file name="$USER_HOME$/Docker/hyperf-skeleton/app/Listener/SendEmail.php" timestamp="1590127987316">
        <mark key="[" line="35" column="17" />
        <mark key="]" line="35" column="17" />
        <mark key="^" line="29" column="32" />
        <mark key="." line="35" column="17" />
      </file>
    </filemarks>
    <jumps>
      <jump line="184" column="35" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="355" column="78" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/Loan/LoanMiddle.php" />
      <jump line="82" column="20" filename="$USER_HOME$/Docker/shoufuyou-php-lib/shoufuyou/Table/BankCashLoanOrder.php" />
      <jump line="225" column="20" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/Loan/LoanMiddle.php" />
      <jump line="580" column="69" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="578" column="20" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="26" column="0" filename="$USER_HOME$/.ideavimrc" />
      <jump line="219" column="9" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/Loan/LoanMiddle.php" />
      <jump line="206" column="8" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/Loan/LoanMiddle.php" />
      <jump line="130" column="17" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="224" column="16" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashRepayPlans.php" />
      <jump line="109" column="31" filename="$USER_HOME$/Docker/shoufuyou-console/lib/Controllers/Api/UserController.php" />
      <jump line="122" column="27" filename="$USER_HOME$/Docker/shoufuyou-console/lib/Models/SmsRecord.php" />
      <jump line="111" column="31" filename="$USER_HOME$/Docker/shoufuyou-console/lib/Controllers/Api/UserController.php" />
      <jump line="104" column="27" filename="$USER_HOME$/Docker/shoufuyou-console/lib/Models/SmsRecord.php" />
      <jump line="125" column="19" filename="$USER_HOME$/Docker/shoufuyou-console/lib/Models/SmsRecord.php" />
      <jump line="127" column="59" filename="$USER_HOME$/Docker/shoufuyou-console/lib/Models/SmsRecord.php" />
      <jump line="0" column="0" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/CashLoan/StashLogicTrait.php" />
      <jump line="204" column="49" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Controllers/RouteController.php" />
      <jump line="108" column="31" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundRecommendManage.php" />
      <jump line="168" column="35" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundRecommendManage.php" />
      <jump line="160" column="43" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundRecommendManage.php" />
      <jump line="247" column="27" filename="$USER_HOME$/Docker/shoufuyou-php-lib/hyperframework/hyperframework/lib/Db/DbActiveRecord.php" />
      <jump line="44" column="50" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="52" column="46" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="42" column="19" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyCashPool.php" />
      <jump line="48" column="31" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyCashPool.php" />
      <jump line="55" column="31" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyCashPool.php" />
      <jump line="62" column="39" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyCashPool.php" />
      <jump line="69" column="39" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyCashPool.php" />
      <jump line="84" column="26" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyCashPool.php" />
      <jump line="39" column="30" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="58" column="47" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="48" column="36" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyPeriod.php" />
      <jump line="141" column="27" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyPeriod.php" />
      <jump line="54" column="34" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyPeriod.php" />
      <jump line="60" column="34" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyPeriod.php" />
      <jump line="203" column="38" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyPeriod.php" />
      <jump line="144" column="32" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/CashPool/CashPoolPeriod.php" />
      <jump line="232" column="44" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyPeriod.php" />
      <jump line="66" column="34" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyPeriod.php" />
      <jump line="28" column="73" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyPeriod.php" />
      <jump line="72" column="51" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyPeriod.php" />
      <jump line="30" column="37" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyInnerApp.php" />
      <jump line="91" column="8" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundBehavior.php" />
      <jump line="31" column="45" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyInnerApp.php" />
      <jump line="125" column="101" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundBehavior.php" />
      <jump line="65" column="47" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="62" column="37" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyRules.php" />
      <jump line="71" column="37" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/Verify/VerifyRules.php" />
      <jump line="72" column="47" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="85" column="8" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="50" column="61" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="103" column="19" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="105" column="22" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/FundSource/FundSourceManage.php" />
      <jump line="180" column="45" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Controllers/RouteController.php" />
      <jump line="26" column="33" filename="$USER_HOME$/Docker/shoufuyou-fund-system/lib/Models/Loan/LoanAfter.php" />
      <jump line="141" column="27" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/XlCash/XlRepayPlan.php" />
      <jump line="55" column="86" filename="$USER_HOME$/Docker/hyperf-skeleton/vendor/hyperf/exception-handler/src/ExceptionHandlerDispatcher.php" />
      <jump line="31" column="0" filename="$USER_HOME$/Docker/hyperf-skeleton/app/Controller/TestController.php" />
      <jump line="35" column="4" filename="$USER_HOME$/Docker/hyperf-skeleton/app/Controller/TestController.php" />
      <jump line="19" column="0" filename="$USER_HOME$/Docker/hyperf-skeleton/app/Controller/TestController.php" />
      <jump line="39" column="0" filename="$USER_HOME$/Docker/hyperf-skeleton/app/Controller/TestController.php" />
      <jump line="25" column="28" filename="$USER_HOME$/Docker/hyperf-skeleton/app/Controller/TestController.php" />
      <jump line="29" column="20" filename="$USER_HOME$/Docker/hyperf-skeleton/app/Listener/SendSms.php" />
      <jump line="197" column="40" filename="$USER_HOME$/Docker/shoufuyou-php-lib/hyperframework/hyperframework/lib/Db/DbClient.php" />
      <jump line="330" column="29" filename="$USER_HOME$/Docker/shoufuyou-php-lib/hyperframework/hyperframework/lib/Db/DbClientEngine.php" />
      <jump line="422" column="52" filename="$USER_HOME$/Docker/shoufuyou-php-lib/hyperframework/hyperframework/lib/Db/DbClientEngine.php" />
      <jump line="80" column="8" filename="$USER_HOME$/Docker/shoufuyou-notify/lib/Models/Utms/Hs.php" />
      <jump line="98" column="1" filename="$USER_HOME$/Docker/my-framework/library/Exception/FException.php" />
      <jump line="28" column="0" filename="$USER_HOME$/Docker/my-framework/library/Components/Base.php" />
      <jump line="19" column="0" filename="$USER_HOME$/Docker/my-framework/library/Components/Base.php" />
      <jump line="38" column="49" filename="$USER_HOME$/Docker/my-framework/library/Components/Base.php" />
      <jump line="95" column="36" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="10" column="0" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="111" column="30" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="92" column="19" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="0" column="0" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="12" column="4" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="88" column="13" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="60" column="25" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="61" column="26" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="39" column="6" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="64" column="25" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="15" column="13" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="98" column="0" filename="$USER_HOME$/Docker/my-framework/library/Components/Request.php" />
      <jump line="54" column="23" filename="$USER_HOME$/Docker/my-framework/library/Application.php" />
      <jump line="0" column="0" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="510" column="32" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="188" column="37" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="186" column="4" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="2" column="0" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="193" column="40" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="182" column="19" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="567" column="40" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/CashLoan/BankCash/BankCashLoanOrder.php" />
      <jump line="508" column="46" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="509" column="20" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/CashLoan/BankCash/BankCashLoanOrder.php" />
      <jump line="27" column="0" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/CashLoan/BankCash/BankCashLoanOrder.php" />
      <jump line="1" column="0" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
      <jump line="27" column="0" filename="$USER_HOME$/Docker/shoufuyou-php-lib/biz-common/Models/FundSource/BankCash/BankCashLoanOrder.php" />
    </jumps>
  </component>
  <component name="VimRegisterSettings">
    <registers>
      <register name="a" type="4">
        <text encoding="base64">IA==</text>
      </register>
      <register name="&quot;" type="2">
        <text encoding="base64">Y2xhc3MgQmFua0Nhc2hMb2FuT3JkZXIgZXh0ZW5kcyBcU2hvdWZ1eW91XFRhYmxlXEJhbmtDYXNoTG9hbk9yZGVyIGltcGxlbWVudHMgRnVuZExvYW5PcmRlckludGVyZmFjZQp7CiAgICB1c2UgT3JtTW9kZWw7CiAgICB1c2UgTUFjdGl2ZVJlY29yZDsKCiAgICBjb25zdCBTVEFUVVNfTk9STUFMID0gMDsgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIneWni+eKtuaAgQogICAgY29uc3QgU1RBVFVTX1RPX1VQTE9BRF9mSUxFID0gMTA7ICAgICAgICAgICAgICAvLyDlrqHmoLjpgJrov4flvoXkuIrkvKDmlofku7YKICAgIGNvbnN0IFNUQVRVU19VUExPQURfZklMRV9GQUlMRUQgPSAtMTA7ICAgICAgICAgLy8g5LiK5Lyg5paH5Lu25aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1RPX0NSRURJVF9BUFBMWSA9IDIwOyAgICAgICAgICAgICAvLyDkuIrkvKDmlofku7bmiJDlip/lvoXnlLPor7fmjojkv6EKICAgIGNvbnN0IFNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVEID0gLTIwOyAgICAgICAgLy8g55Sz6K+35o6I5L+h5aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWSA9IDMwOyAgICAgICAvLyDmjojkv6HnlLPor7fmiJDlip/lvoXmn6Xor6Lnu5PmnpwKICAgIGNvbnN0IFNUQVRVU19RVUVSWV9DUkVESVRfQVBQTFlfRkFJTEVEID0gLTMwOyAgLy8g5o6I5L+h57uT5p6c5p+l6K+i5aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1RPX0xFTkRfQVBQTFkgPSA0MDsgICAgICAgICAgICAgICAgLy8g5o6I5L+h5oiQ5Yqf5b6F5pSv55So55Sz6K+3CiAgICBjb25zdCBTVEFUVVNfTEVORF9BUFBMWV9GQUlMRUQgPSAtNDA7ICAgICAgICAgICAvLyDmlK/nlKjnlLPor7flpLHotKUKCiAgICBjb25zdCBTVEFUVVNfVE9fTEVORF9BUFBMWV9RVUVSWSA9IDUwOyAgICAgICAgICAgLy8g5pSv55So55Sz6K+35oiQ5Yqf5b6F5p+l6K+i57uT5p6cCiAgICBjb25zdCBTVEFUVVNfTEVORF9BUFBMWV9RVUVSWV9GQUlMRUQgPSAtNTA7ICAgICAgICAgICAgIC8vIOaUr+eUqOe7k+aenOafpeivouWksei0pQoKCiAgICBjb25zdCBTVEFUVVNfVE9fUEFZX0dBVEVXQVkgPSA4ODsgICAgICAgICAgICAgICAvLyDmlK/nlKjmiJDlip/lvoXor7fmsYLmlK/ku5jns7vnu58KICAgIGNvbnN0IFNUQVRVU19QQVlfR0FURVdBWV9GQUlMRUQgPSAtODg7ICAgICAgLy8g6K+35rGC5pSv5LuY57O757uf5aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1NVQ0NFU1MgPSA5OTsgICAgICAvLyDorqLljZXmiJDlip8KICAgIGNvbnN0IFNUQVRVU19GQUlMRUQgPSAtOTk7ICAgICAgLy8g6K6i5Y2V5aSx6LSlCgogICAgY29uc3QgU1BfQ0FTSF9DT0RFID0gJ3NwX2Nhc2gnOwogICAgY29uc3QgRlVORF9TT1VSQ0UgPSBbc2VsZjo6U1BfQ0FTSF9DT0RFXTsKCiAgICBwcml2YXRlIHN0YXRpYyAkYXVkaXRTdGF0dXMgPSBbc2VsZjo6U1RBVFVTX05PUk1BTCwgIHNlbGY6OlNUQVRVU19UT19VUExPQURfZklMRSwgc2VsZjo6U1RBVFVTX1RPX0NSRURJVF9BUFBMWSwgc2VsZjo6U1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWV07CiAgICBwcml2YXRlIHN0YXRpYyAkZnVuZGluZ1N0YXR1cyA9IFtzZWxmOjpTVEFUVVNfVE9fTEVORF9BUFBMWSwgc2VsZjo6U1RBVFVTX1RPX0xFTkRfQVBQTFlfUVVFUlksIHNlbGY6OlNUQVRVU19UT19QQVlfR0FURVdBWV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lrqHmoLjnirbmgIEKICAgIHByaXZhdGUgc3RhdGljICRzdWNjZXNzU3RhdHVzID0gW3NlbGY6OlNUQVRVU19TVUNDRVNTXTsKCgogICAgcHJpdmF0ZSBzdGF0aWMgJHN0YXR1c0Rlc2NyaXB0aW9uID0gWwogICAgICAgIHNlbGY6OlNUQVRVU19OT1JNQUwgPT4gJ+WIneWni+eKtuaAgScsCiAgICAgICAgc2VsZjo6U1RBVFVTX1RPX1VQTE9BRF9mSUxFID0+ICflrqHmoLjpgJrov4flvoXkuIrkvKDmlofku7YnLCAvLyDmn6Xor6LnlKjmiLflvIDmiLfnirbmgIHlpLHotKUKICAgICAgICBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVEID0+ICfkuIrkvKDmlofku7blpLHotKUnLC8vIOS4iuS8oOW5s+WPsOazqOWGjOacjeWKoeWNj+iuruWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19DUkVESVRfQVBQTFkgPT4gJ+S4iuS8oOaWh+S7tuaIkOWKn+W+heeUs+ivt+aOiOS/oScsICAvLyDkuIrkvKDlubPlj7Dms6jlhozmnI3liqHljY/orq7miJDlip/lvoXlrZjnrqHlvIDmiLcKICAgICAgICBzZWxmOjpTVEFUVVNfQ1JFRElUX0FQUExZX0ZBSUxFRCA9PiAn55Sz6K+35o6I5L+h5aSx6LSlJywgLy8g6I635Y+W5a2Y566h5byA5oi36ZO+5o6l5aSx6LSlCiAgICAgICAgc2VsZjo6U1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWSA9PiAn5o6I5L+h55Sz6K+35oiQ5Yqf5b6F5p+l6K+i57uT5p6cJywgLy8g6I635Y+W5a2Y566h5byA5oi36ZO+5o6l5oiQ5Yqf5b6F5ZCM5q2l5byA5oi357uT5p6cCiAgICAgICAgc2VsZjo6U1RBVFVTX1FVRVJZX0NSRURJVF9BUFBMWV9GQUlMRUQgPT4gJ+aOiOS/oee7k+aenOafpeivouWksei0pScsIC8vIOW8gOaIt+e7k+aenOWQjOatpei/lOWbnuWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19MRU5EX0FQUExZID0+ICfmjojkv6HmiJDlip/lvoXmlK/nlKjnlLPor7cnLCAvLyDlvIDmiLfnu5PmnpzlkIzmraXov5Tlm57miJDlip/lvoXmn6Xor6LlvIDmiLfnu5PmnpwKICAgICAgICBzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9GQUlMRUQgPT4gJ+aUr+eUqOeUs+ivt+Wksei0pScsIC8vIOWtmOeuoeW8gOaIt+Wksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19MRU5EX0FQUExZX1FVRVJZID0+ICfmlK/nlKjnlLPor7fmiJDlip/lvoXmn6Xor6Lnu5PmnpwnLCAvLyDlrZjnrqHlvIDmiLflt7LmiJDlip/lvoXmj5DkuqTorqLljZXoh7Ppppbph5EKICAgICAgICBzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9RVUVSWV9GQUlMRUQgPT4gJ+aUr+eUqOe7k+aenOafpeivouWksei0pScsIC8vIOaPkOS6pOiuouWNleiHs+mmlumHkeWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19QQVlfR0FURVdBWSA9PiAn5pSv55So5oiQ5Yqf5b6F6K+35rGC5pSv5LuY57O757ufJywgLy8g5o+Q5Lqk6K6i5Y2V6Iez6aaW6YeR5oiQ5Yqf5b6F6K6i5Y2V5a6h5qC457uT5p6c5p+l6K+iCiAgICAgICAgc2VsZjo6U1RBVFVTX1BBWV9HQVRFV0FZX0ZBSUxFRCA9PiAn6K+35rGC5pSv5LuY57O757uf5aSx6LSlJywgLy8g6K6i5Y2V5a6h5qC457uT5p6c5p+l6K+i5aSx6LSlCiAgICAgICAgc2VsZjo6U1RBVFVTX1NVQ0NFU1MgPT4gJ+iuouWNleaIkOWKnycsIC8vIOaPkOS6pOiuouWNleWuoeaguOWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19GQUlMRUQgPT4gJ+iuouWNleWksei0pScsIC8vIOiuouWNleWuoeaguOaIkOWKn+W+heS4iuS8oOaWh+S7tgogICAgXTsKCiAgICBwcml2YXRlIHN0YXRpYyAkYXBwcm92YWxTdGF0dXNNYXAgPSBbCiAgICAgICAgMCA9PiAn5pyq5a6h5qC4JywKICAgICAgICAxID0+ICflrqHmoLjkuK0nLAogICAgICAgIDIgPT4gJ+WuoeaguOaIkOWKnycsCiAgICAgICAgMyA9PiAn5a6h5qC45ouS57udJywKICAgICAgICA0ID0+ICfkurrlt6XlrqHmoLgnLAogICAgICAgIDUgPT4gJ+WuoeaguOWksei0pScsCiAgICAgICAgNiA9PiAn5b6F5aSE55CGJywKICAgICAgICA3ID0+ICflpITnkIbkuK0nLAogICAgXTsKCiAgICBwcml2YXRlIHN0YXRpYyAkYXBwbHlTdGF0dXNNYXAgPSBbCiAgICAgICAgMTAwMCA9PiAn5b6F5bmz5Y+w5aSE55CGJywKICAgICAgICAxMDAxID0+ICflvoXotYTmlrnlpITnkIYnLAogICAgICAgIDEwMDIgPT4gJ+eUs+ivt+aLkue7nScsCiAgICAgICAgMTAwMyA9PiAn5a6h5qC45aSE55CG5LitJywKICAgICAgICAxMDA0ID0+ICflrqHmoLjpgJrov4cnLAogICAgICAgIDEwMDUgPT4gJ+WuoeaguOaLkue7nScsCiAgICAgICAgMTAwNiA9PiAn5b6F5pS+5qy+JywKICAgICAgICAxMDA3ID0+ICflt7LmlL7mrL4nLAogICAgICAgIDEwMDggPT4gJ+aUvuasvuWksei0pScsCiAgICAgICAgMTAwOSA9PiAn6L+Y5qy+5LitJywKICAgICAgICAxMDEwID0+ICflt7Lnu5PmuIUnLAogICAgICAgIDEwMTEgPT4gJ+i1hOmHkeaWueWGs+etluS4rQknLAogICAgICAgIDEwMTIgPT4gJ+W+heetvue6picsCiAgICAgICAgMTAxMyA9PiAn562+57qm5aSx6LSlJywKICAgIF07CgogICAgcHJpdmF0ZSBzdGF0aWMgJGNvbnRyYWN0TWFwID0gWwogICAgICAgICd4eWYxNDEnID0+ICcxMTAxJywKICAgICAgICAneHlmMTQzJyA9PiAnMTEwNCcsCiAgICAgICAgJ3h5ZjE0MicgPT4gJzEyMDYnLAogICAgXTsKCiAgICBwdWJsaWMgZnVuY3Rpb24gc2V0U3RhdHVzKCRzdGF0dXMsICRtZXNzYWdlID0gJycpCiAgICB7CiAgICAgICAgJHRoaXMtPnNldE1lc3NhZ2UoJG1lc3NhZ2UpOwogICAgICAgICR0aGlzLT5zZXRVcGRhdGVkVGltZShUaW1lOjpub3coKSk7CiAgICAgICAgaWYgKCR0aGlzLT5nZXRTdGF0dXMoKSAhPSAkc3RhdHVzKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXNIaXN0b3J5KHRyaW0oJHRoaXMtPmdldFN0YXR1c0hpc3RvcnkoKSAuICcsJyAuICR0aGlzLT5nZXRTdGF0dXMoKSwgJywnKSk7CiAgICAgICAgfQogICAgICAgICR0aGlzLT5zZXRTdGF0dXNEZXNjKHNlbGY6OiRzdGF0dXNEZXNjcmlwdGlvblskc3RhdHVzXSk7CiAgICAgICAgcGFyZW50OjpzZXRTdGF0dXMoJHN0YXR1cyk7CiAgICAgICAgJHRoaXMtPnVwZGF0ZSgpOwogICAgICAgIHJldHVybiAkdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIOWIm+W7uuiuouWNlQogICAgICogQHBhcmFtIENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIKICAgICAqIEByZXR1cm4gJHRoaXMKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIG9yZGVyQ3JlYXRlKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIpCiAgICB7CiAgICAgICAgcGFyZW50OjpzZXRTdGF0dXMoc2VsZjo6U1RBVFVTX05PUk1BTCk7CiAgICAgICAgJHRoaXMKICAgICAgICAgICAgLT5zZXRGdW5kU291cmNlKCRjYXNoTG9hbk9yZGVyLT5nZXRGdW5kU291cmNlKCkpCiAgICAgICAgICAgIC0+c2V0Qml6Q2hhbm5lbCgxKQogICAgICAgICAgICAtPnNldE9yZGVyTnVtYmVyKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKQogICAgICAgICAgICAtPnNldE91dE9yZGVyTnVtYmVyKCcnKQogICAgICAgICAgICAtPnNldFN0YXR1c0hpc3RvcnkoJycpCiAgICAgICAgICAgIC0+c2V0TG9hbk5vKCcnKQogICAgICAgICAgICAtPnNldFN0YXR1c0Rlc2Moc2VsZjo6JHN0YXR1c0Rlc2NyaXB0aW9uW3NlbGY6OlNUQVRVU19OT1JNQUxdKQogICAgICAgICAgICAtPnNldE1lc3NhZ2UoJycpCiAgICAgICAgICAgIC0+c2V0Qml6RGF0YSgnJykKICAgICAgICAgICAgLT5zZXRGdW5kaW5nVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT5zZXRVcGRhdGVkVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT5zZXRDcmVhdGVkVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT5pbnNlcnQoKTsKCiAgICAgICAgcmV0dXJuICR0aGlzOwogICAgfQoKICAgIC8qKgogICAgICog5ZCR6LWE5pa56L+b5Lu25YmN77yM5a6h5qC45o6l5Y+jCiAgICAgKiBAcGFyYW0gQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcgogICAgICogQHJldHVybiBtaXhlZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gb3JkZXJBdWRpdChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICog5ZCR6LWE5pa56L+b5Lu25o6l5Y+jCiAgICAgKiBAcGFyYW0gQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcgogICAgICogQHJldHVybiBtaXhlZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gb3JkZXJSZW1pdChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgICRiYW5rQ2FzaExvYW5PcmRlciA9IHNlbGY6OmdldE9yZGVyKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKTsKICAgICAgICAkYmFua0Nhc2hMb2FuT3JkZXItPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfVE9fVVBMT0FEX2ZJTEUpOwogICAgICAgIHJldHVybiAkYmFua0Nhc2hMb2FuT3JkZXItPnVwbG9hZEZpbGUoJGNhc2hMb2FuT3JkZXIpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiByZW1pdEZhaWxlZChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCAkc3RhdHVzLCAkcmVzdWx0UmVhc29uLCAkaXNBZGRVc2VyR3JleUxpc3QgPSBmYWxzZSkKICAgIHsKICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKCRzdGF0dXMsICRyZXN1bHRSZWFzb24pOwogICAgICAgICRjYXNoTG9hbk9yZGVyLT5yZW1pdEZhaWxlZCgkcmVzdWx0UmVhc29uKTsKICAgICAgICBDYXNoUG9vbFVzZXJHcmV5TGlzdDo6c2V0RGVmYXVsdExpbWl0VGltZSgzMCk7CiAgICAgICAgJGlzQWRkVXNlckdyZXlMaXN0ICYmIENhc2hQb29sVXNlckdyZXlMaXN0OjpjcmVhdGVCeU9yZGVyKCRjYXNoTG9hbk9yZGVyLCAkcmVzdWx0UmVhc29uKTsgLy/ngbDlkI3ljZXliqDlhaUKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVtaXRTdWNjZXNzKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIsICRzdGF0dXMsICRyZXN1bHRSZWFzb24pCiAgICB7CiAgICAgICAgJHRoaXMtPnNldFN0YXR1cygkc3RhdHVzLCAkcmVzdWx0UmVhc29uKTsKICAgICAgICAkcGF5UmVzdWx0ID0gJGNhc2hMb2FuT3JkZXItPnJlcXVlc3RQYXlHYXRld2F5Q3JlYXRlUGF5T3JkZXIoKTsKICAgICAgICBpZiAoJHBheVJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfUEFZX0dBVEVXQVlfRkFJTEVELCAn6K+35rGC5pSv5LuY57O757uf55Sf5oiQ5pSv5LuY6K6w5b2V5aSx6LSlJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJHBheVJlc3VsdFsncGF5X3RpbWUnXSA9ICR0aGlzLT5nZXRGdW5kaW5nVGltZSgpOwogICAgICAgICRjYXNoTG9hbk9yZGVyLT5yZW1pdFN1Y2Nlc3MoJHBheVJlc3VsdCk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1NVQ0NFU1MsICfor7fmsYLmlK/ku5jns7vnu5/nlJ/miJDmlK/ku5jorrDlvZXmiJDlip8nKTsKICAgIH0KCiAgICAvKioKICAgICAqIOS4iuS8oOaWh+S7tgogICAgICogQHBhcmFtIENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHVwbG9hZEZpbGUoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcikKICAgIHsKICAgICAgICAkb2NySW5mbyA9IEJpelNmeVdlYkNsaWVudDo6Z2V0T2NyVmlldyhbCiAgICAgICAgICAgICdpZF9jYXJkX251bWJlcicgPT4gJGNhc2hMb2FuT3JkZXItPmdldElkQ2FyZE51bWJlcigpLAogICAgICAgICAgICAnbW9iaWxlJyA9PiAkY2FzaExvYW5PcmRlci0+Z2V0TW9iaWxlKCksCiAgICAgICAgICAgICdhcHAnID0+ICRjYXNoTG9hbk9yZGVyLT5nZXRBcHAoKSwKICAgICAgICBdKTsKICAgICAgICBpZiAoCiAgICAgICAgICAgICRvY3JJbmZvID09IGZhbHNlCiAgICAgICAgICAgIHx8CiAgICAgICAgICAgIGVtcHR5KCRvY3JJbmZvWydpZF9jYXJkX2Zyb250J10pCiAgICAgICAgICAgIHx8CiAgICAgICAgICAgIGVtcHR5KCRvY3JJbmZvWydpZF9jYXJkX2JhY2snXSkKICAgICAgICApIHsKICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAnb2Ny5LiN5a2Y5Zyo5oiW57y65bCR5p+Q6aG55paH5Lu2JywgdHJ1ZSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgICRmaWxlcyA9IFsKICAgICAgICAgICAgJzEwMDEnID0+ICRvY3JJbmZvWydpZF9jYXJkX2Zyb250J10gPz8gJycsLy/ouqvku73or4HmraPpnaIKICAgICAgICAgICAgJzEwMDInID0+ICRvY3JJbmZvWydpZF9jYXJkX2JhY2snXSA/PyAnJywvL+i6q+S7veivgeWPjemdogogICAgICAgIF07CgogICAgICAgICRmZGRDb250cmFjdHMgPSBGZGRDb250cmFjdDo6ZmluZEFsbChbJ21hc3Rlcl9jb250cmFjdF9pZCcgPT4gJGNhc2hMb2FuT3JkZXItPmdldENvbnRyYWN0TnVtYmVyKCldKTsKICAgICAgICBpZiAoZW1wdHkoJGZkZENvbnRyYWN0cykpIHsKICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAn5p+l6K+i5ZCI5ZCM5aSx6LSl5oiW5Li656m6Jyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZvcmVhY2ggKCRmZGRDb250cmFjdHMgYXMgJGNvbnRyYWN0KSB7CiAgICAgICAgICAgIGlmIChlbXB0eSgkY29udHJhY3QtPmdldERvd25sb2FkVXJsKCkpKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19VUExPQURfZklMRV9GQUlMRUQsICflkIjlkIzkuIvovb3lnLDlnYDkuLrnqbonKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHBkZkZpbGUgPSAnL3h5ZnN0YXRpYy8nIC4gJGNvbnRyYWN0LT5nZXREb3dubG9hZFVybCgpOwogICAgICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRwZGZGaWxlKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAn5ZCI5ZCM5paH5Lu25LiN5a2Y5ZyoJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpc3NldChzZWxmOjokY29udHJhY3RNYXBbJGNvbnRyYWN0LT5nZXRTaG9ydE5hbWUoKV0pKSB7CiAgICAgICAgICAgICAgICAkZmlsZXNbc2VsZjo6JGNvbnRyYWN0TWFwWyRjb250cmFjdC0+Z2V0U2hvcnROYW1lKCldXSA9ICRwZGZGaWxlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBUT0RPIOW+heWIoOmZpAogICAgICAgICAgICBpZiAoJGNvbnRyYWN0LT5nZXRTaG9ydE5hbWUoKSA9PSAneHlmMTQzJykgewogICAgICAgICAgICAgICAgJGZpbGVzWycxMTA3J10gPSAkcGRmRmlsZTsKICAgICAgICAgICAgfQoKICAgICAgICB9CgoKICAgICAgICBmb3JlYWNoICgkZmlsZXMgYXMgJGZpbGVUeXBlID0+ICRmaWxlVXJsKSB7CiAgICAgICAgICAgICRzbEZpbGUgPSBCYW5rQ2FzaFVwbG9hZEZpbGU6OmdldE9uZUZpbGUoJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCksICRmaWxlVHlwZSk7CiAgICAgICAgICAgIGlmICgkc2xGaWxlKSB7CiAgICAgICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCLlkIjlkIzmlofku7blt7Lnu4/lrZjlnKg6eyRzbEZpbGUtPmdldEZpbGVOYW1lKCl9ICwg6K6i5Y2V5Y+377yaeyRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpfSIpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIExvZzo6YmFua0Nhc2goJ+W8gOWni+S4iuS8oO+8micgLiAkZmlsZVVybCk7CgogICAgICAgICAgICAkc2xGaWxlID0gQmFua0Nhc2hVcGxvYWRGaWxlOjpjcmVhdGVGaWxlKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpLCAkZmlsZVR5cGUsICRmaWxlVXJsKTsKICAgICAgICAgICAgJHJlc3VsdCA9ICR0aGlzLT51cGxvYWRGaWxlQXBpKCRzbEZpbGUpOwogICAgICAgICAgICBpZiAoISRyZXN1bHQgfHwgZW1wdHkoJHJlc3VsdFsnY29kZSddKSkgewogICAgICAgICAgICAgICAgJHNsRmlsZS0+c2V0U3RhdHVzKCdmYWlsZWQnKS0+c2V0TWVzc2FnZSgn6L+U5ZueZmFsc2UnKS0+c2V0VXBkYXRlZFRpbWUoVGltZTo6bm93KCkpLT51cGRhdGUoKTsKICAgICAgICAgICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgkY2FzaExvYW5PcmRlciwgc2VsZjo6U1RBVFVTX1VQTE9BRF9mSUxFX0ZBSUxFRCwgJ+S4iuS8oOaWh+S7tuivt+axguWksei0pScpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHJlc3VsdFsnY29kZSddICE9ICcwMDAwMDAnKSB7CiAgICAgICAgICAgICAgICAkc2xGaWxlLT5zZXRTdGF0dXMoJ2ZhaWxlZCcpLT5zZXRNZXNzYWdlKCfov5Tlm546JyAuICRyZXN1bHRbJ21lc3NhZ2UnXSktPnNldFVwZGF0ZWRUaW1lKFRpbWU6Om5vdygpKS0+dXBkYXRlKCk7CiAgICAgICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCLkuIrkvKDmlofku7bov5Tlm57lpLHotKU6eyRzbEZpbGUtPmdldEZpbGVOYW1lKCl9ICwg6K6i5Y2V5Y+377yaeyRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpfSIpOwogICAgICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAkcmVzdWx0WydtZXNzYWdlJ10gPz8gJycpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkc2xGaWxlCiAgICAgICAgICAgICAgICAtPnNldFN0YXR1cygnc3VjY2VzcycpCiAgICAgICAgICAgICAgICAtPnNldE1lc3NhZ2UoJ+S4iuS8oOaIkOWKnycpCiAgICAgICAgICAgICAgICAtPnNldEZpbGVJZCgkcmVzdWx0WydkYXRhJ11bJ2ZpbGVJZCddID8/ICcnKQogICAgICAgICAgICAgICAgLT5zZXRVcmwoJHJlc3VsdFsnZGF0YSddWyd1cmwnXSA/PyAnJykKICAgICAgICAgICAgICAgIC0+c2V0VXBkYXRlZFRpbWUoVGltZTo6bm93KCkpCiAgICAgICAgICAgICAgICAtPnVwZGF0ZSgpOwoKICAgICAgICB9CiAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfVE9fQ1JFRElUX0FQUExZLCAn5LiK5Lyg5paH5Lu25oiQ5YqfJyk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jcmVkaXRBcHBseSgpOwogICAgfQoKICAgIHByaXZhdGUgIGZ1bmN0aW9uIHVwbG9hZEZpbGVBcGkoQmFua0Nhc2hVcGxvYWRGaWxlICRmdW5kVXBsb2FkRmlsZSkKICAgIHsKICAgICAgICAkcGFyYW1zID0gbmV3IFVwbG9hZEZpbGVQYXJhbXMoKTsKICAgICAgICAkcGFyYW1zLT5zZXRGaWxlKCRmdW5kVXBsb2FkRmlsZS0+Z2V0RmlsZU5hbWUoKSk7CiAgICAgICAgJHBhcmFtcy0+c2V0RmlsZVR5cGUoJGZ1bmRVcGxvYWRGaWxlLT5nZXRGaWxlVHlwZSgpKTsKICAgICAgICAkcGFyYW1zLT5zZXRGaWxlTmFtZShTZXF1ZW5jZTo6Z2VuUmVxdWVzdFNuKCkgLiBzdWJzdHIoJGZ1bmRVcGxvYWRGaWxlLT5nZXRGaWxlTmFtZSgpLCBzdHJycG9zKCRmdW5kVXBsb2FkRmlsZS0+Z2V0RmlsZU5hbWUoKSwgJy4nKSkpOwoKICAgICAgICAkcmVxdWVzdFsnbWV0aG9kJ10gPSAnVXBsb2FkRmlsZSc7CiAgICAgICAgJHJlcXVlc3RbJ3BhcmFtcyddID0gJHBhcmFtcy0+dG9BcnJheSgpOwoKICAgICAgICByZXR1cm4gQml6U2Z5V2ViQ2xpZW50OjpiYW5rRnVuZFNlbmREYXRhKCRyZXF1ZXN0LCAkdGhpcy0+Z2V0RnVuZFNvdXJjZSgpKTsKCiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGNyZWRpdEFwcGx5KCkKICAgIHsKICAgICAgICAvKioKICAgICAgICAgKiBAdmFyICRjYXNoTG9hbk9yZGVyIENhc2hMb2FuT3JkZXIKICAgICAgICAgKi8KICAgICAgICAkY2FzaExvYW5PcmRlciA9IENhc2hMb2FuT3JkZXI6OmZpbmRSb3dCeUNvbHVtbnMoWydvcmRlcl9udW1iZXInID0+ICR0aGlzLT5nZXRPcmRlck51bWJlcigpXSk7CiAgICAgICAgaWYgKGVtcHR5KCRjYXNoTG9hbk9yZGVyKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVELCAnQ2FzaExvYW5PcmRlcuS4jeWtmOWcqCcpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKCiAgICAgICAgJGZ1bmRDcmVkaXQgPSBCYW5rQ2FzaENyZWRpdDo6Z2V0Q3JlZGl0QnlDYXNoTG9hbk9yZGVyKCRjYXNoTG9hbk9yZGVyKTsKICAgICAgICAkcmlza1VzZXJJbmZvID0gQml6U2Z5V2ViQ2xpZW50OjpyaXNrVXNlckluZm8oWwogICAgICAgICAgICAnbmFtZScgPT4gJGNhc2hMb2FuT3JkZXItPmdldE5hbWUoKSwKICAgICAgICAgICAgJ21vYmlsZScgPT4gJGNhc2hMb2FuT3JkZXItPmdldE1vYmlsZSgpLAogICAgICAgICAgICAnaWRfY2FyZF9udW1iZXInID0+ICRjYXNoTG9hbk9yZGVyLT5nZXRJZENhcmROdW1iZXIoKSwKICAgICAgICBdKTsKCiAgICAgICAgaWYgKCRyaXNrVXNlckluZm8gPT09IGZhbHNlKSB7CiAgICAgICAgICAgIExvZzo6YmFua0Nhc2goJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkgLiAn6aOO5o6n5p+l6K+i55So5oi35Z+65pys5L+h5oGv5aSx6LSlJyk7CiAgICAgICAgICAgICR0aGlzLT5zZXRNZXNzYWdlKCfpo47mjqfmn6Xor6LnlKjmiLfln7rmnKzkv6Hmga/lpLHotKUnKS0+c2V0VXBkYXRlZFRpbWUoVGltZTo6bm93KCkpLT51cGRhdGUoKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgJHBhcmFtcyA9IG5ldyBDcmVkaXRBcHBseVBhcmFtcygpOwogICAgICAgICRwYXJhbXMtPnNldEN1c3RvbWVySW5mbygkZnVuZENyZWRpdC0+Z2V0Q3VzdG9tZXJJbmZvKCRjYXNoTG9hbk9yZGVyKSkKICAgICAgICAgICAgLT5zZXRQZXJzb25hbEJhc2VJbmZvKCRmdW5kQ3JlZGl0LT5nZXRQZXJzb25hbEJhc2VJbmZvKCRjYXNoTG9hbk9yZGVyLCAkcmlza1VzZXJJbmZvKSkKICAgICAgICAgICAgLT5zZXRCYW5rQ2FyZEluZm8oJGZ1bmRDcmVkaXQtPmdldEJhbmtDYXJkSW5mbygkY2FzaExvYW5PcmRlcikpCiAgICAgICAgICAgIC0+c2V0Q2VydGlmaWNhdGVJbmZvTGlzdCgkZnVuZENyZWRpdC0+Z2V0Q2VydGlmaWNhdGVJbmZvTGlzdCgkY2FzaExvYW5PcmRlcikpCiAgICAgICAgICAgIC0+c2V0VGVsQ29udGFjdFN0YXRpb25JbmZvTGlzdCgkZnVuZENyZWRpdC0+Z2V0VGVsQ29udGFjdFN0YXRpb25JbmZvTGlzdCgkY2FzaExvYW5PcmRlciwgJHJpc2tVc2VySW5mbykpCiAgICAgICAgICAgIC0+c2V0Q3VzdG9tZVJlbGF0aW9uSW5mb0xpc3QoJGZ1bmRDcmVkaXQtPmdldEN1c3RvbWVSZWxhdGlvbkluZm9MaXN0KCRjYXNoTG9hbk9yZGVyLCAkcmlza1VzZXJJbmZvKSkKICAgICAgICAgICAgLT5zZXRBcHBseUluZm8oJGZ1bmRDcmVkaXQtPmdldEFwcGx5SW5mbygkY2FzaExvYW5PcmRlcikpCiAgICAgICAgICAgIC0+c2V0RmlsZUlkcyhCYW5rQ2FzaFVwbG9hZEZpbGU6OmdldEZpbGVzKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKSk7CgogICAgICAgICRyZXF1ZXN0WydtZXRob2QnXSA9ICdDcmVkaXRBcHBseSc7CiAgICAgICAgJHJlcXVlc3RbJ3BhcmFtcyddID0gJHBhcmFtcy0+dG9BcnJheSgpOwoKICAgICAgICAkcmVzdWx0ID0gQml6U2Z5V2ViQ2xpZW50OjpiYW5rRnVuZFNlbmREYXRhKCRyZXF1ZXN0LCAkdGhpcy0+Z2V0RnVuZFNvdXJjZSgpKTsKICAgICAgICBpZiAoISRyZXN1bHQgfHwgZW1wdHkoJHJlc3VsdFsnY29kZSddKSkgewogICAgICAgICAgICAkZnVuZENyZWRpdC0+c2V0TWVzc2FnZSgn5o6I5L+h5a6h5qC45byC5bi4JyktPnVwZGF0ZSgpOwogICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoCiAgICAgICAgICAgICAgICAkY2FzaExvYW5PcmRlciwKICAgICAgICAgICAgICAgIHNlbGY6OlNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVELAogICAgICAgICAgICAgICAgJ+aOiOS/oeivt+axguW8guW4uCcsCiAgICAgICAgICAgICAgICB0cnVlCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKAogICAgICAgICAgICBpc3NldCgkcmVzdWx0WydkYXRhJ11bJ3N0YXR1cyddKQogICAgICAgICAgICAmJgogICAgICAgICAgICAkcmVzdWx0WydkYXRhJ11bJ3N0YXR1cyddID09IHRydWUKICAgICAgICAgICAgJiYKICAgICAgICAgICAgIWVtcHR5KCRyZXN1bHRbJ2RhdGEnXVsnc2VyaWFsTm8nXSkKICAgICAgICApIHsKICAgICAgICAgICAgJGZ1bmRDcmVkaXQtPnNldFNlcmlhbE5vKCRyZXN1bHRbJ2RhdGEnXVsnc2VyaWFsTm8nXSktPnVwZGF0ZSgpOwogICAgICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19UT19RVUVSWV9DUkVESVRfQVBQTFksICfmjojkv6HnlLPor7fov5Tlm57miJDlip8nKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVELCBqc29uX2VuY29kZSgkcmVzdWx0LCAzMjApKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHF1ZXJ5Q3JlZGl0UmVzdWx0KCkKICAgIHsKICAgICAgICAvKioKICAgICAgICAgKiBAdmFyICRjYXNoTG9hbk9yZGVyIENhc2hMb2FuT3JkZXIKICAgICAgICAgKi8KICAgICAgICAkY2FzaExvYW5PcmRlciA9IENhc2hMb2FuT3JkZXI6OmZpbmRSb3dCeUNvbHVtbnMoWydvcmRlcl9udW1iZXInID0+ICR0aGlzLT5nZXRPcmRlck51bWJlcigpXSk7CiAgICAgICAgaWYgKGVtcHR5KCRjYXNoTG9hbk9yZGVyKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19RVUVSWV9DUkVESVRfQVBQTFlfRkFJTEVELCAnQ2FzaExvYW5PcmRlcuS4jeWtmOWcqCcpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAkcXVlcnlDcmVkaXRSZXN1bHRQYXJhbXMgPSBuZXcgUXVlcnlDcmVkaXRSZXN1bHRQYXJhbXMoKTsKICAgICAgICAkcXVlcnlDcmVkaXRSZXN1bHRQYXJhbXMtPnNldElkVHlwZSgxKQogICAgICAgICAgICAtPnNldElkTm8oJGNhc2hMb2FuT3JkZXItPmdldElkQ2FyZE51bWJlcigpKQogICAgICAgICAgICAtPnNldFNlcmlhbE5vKEJhbmtDYXNoQ3JlZGl0OjpnZXRDcmVkaXRCeUNhc2hMb2FuT3JkZXIoJGNhc2hMb2FuT3JkZXIpLT5nZXRTZXJpYWxObygpKTsKCiAgICAgICAgJHJlcXVlc3RbJ21ldGhvZCddID0gJ1F1ZXJ5Q3JlZGl0UmVzdWx0JzsKICAgICAgICAkcmVxdWVzdFsncGFyYW1zJ10gPSAkcXVlcnlDcmVkaXRSZXN1bHRQYXJhbXMtPnRvQXJyYXkoKTsKICAgICAgICAkcmVzdWx0ID0gQml6U2Z5V2ViQ2xpZW50OjpiYW5rRnVuZFNlbmREYXRhKCRyZXF1ZXN0LCAkdGhpcy0+Z2V0RnVuZFNvdXJjZSgpKTsKICAgICAgICBpZiAoIWlzc2V0KCRyZXN1bHRbJ2NvZGUnXSkgfHwgJHJlc3VsdFsnY29kZSddICE9ICcwMDAwMDAnKSB7CiAgICAgICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgkY2FzaExvYW5PcmRlciwgc2VsZjo6U1RBVFVTX1FVRVJZX0NSRURJVF9BUFBMWV9GQUlMRUQsIGlzX3N0cmluZygkcmVzdWx0KSA/PyBqc29uX2VuY29kZSgkcmVzdWx0LCAzMjApKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAkZGF0YSA9ICRyZXN1bHRbJ2RhdGEnXTsKCiAgICAgICAgJGZ1bmRDcmVkaXQgPSBCYW5rQ2FzaENyZWRpdDo6Z2V0Q3JlZGl0QnlDYXNoTG9hbk9yZGVyKCRjYXNoTG9hbk9yZGVyKTsKICAgICAgICAkZnVuZENyZWRpdAogICAgICAgICAgICAtPnNldEFwcHJvdmFsU3RhdHVzKCRkYXRhWydhcHByb3ZhbFN0YXR1cyddID8/IDApCiAgICAgICAgICAgIC0+c2V0TWVzc2FnZSgkZGF0YVsncmVhc29uJ10gPz8gJycpCiAgICAgICAgICAgIC0+c2V0Q3JlZGl0VG90YWxBbW91bnQoJGRhdGFbJ2NyZWRpdFRvdGFsQW1vdW50J10gPz8gMCkKICAgICAgICAgICAgLT5zZXRTdGFydERhdGUoJGRhdGFbJ3N0YXJ0RGF0ZSddID8/IFRpbWU6Om5vdygpKQogICAgICAgICAgICAtPnNldFN0YXJ0RGF0ZSgkZGF0YVsnZW5kRGF0ZSddID8/IFRpbWU6Om5vdygpKQogICAgICAgICAgICAtPnNldENyZWRpdEFwcGx5SWQoJGRhdGFbJ2NyZWRpdEFwcGx5SWQnXSA/PyAnJykKICAgICAgICAgICAgLT5zZXRFeHBkYXQoJGRhdGFbJ2V4cGRhdCddID8/IFRpbWU6Om5vdygpKQogICAgICAgICAgICAtPnNldEF2YWlsQW1vdW50KCRkYXRhWydhdmFpbEFtb3VudCddID8/IDApCiAgICAgICAgICAgIC0+c2V0VmFsaWRTdGF0dXMoJGRhdGFbJ3ZhbGlkU3RhdHVzJ10gPz8gMCkKICAgICAgICAgICAgLT5zZXRVcGRhdGVkVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT51cGRhdGUoKTsKCiAgICAgICAgaWYgKGluX2FycmF5KCRmdW5kQ3JlZGl0LT5nZXRBcHByb3ZhbFN0YXR1cygpLCBbMl0pKSB7CiAgICAgICAgICAgIGlmICgkZnVuZENyZWRpdC0+Z2V0VmFsaWRTdGF0dXMoKSAhPSAxKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVELCAn5o6I5L+h5oiQ5Yqf5Y+v55So54q25oCB5Li65peg5pWIJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1RPX0xFTkRfQVBQTFksICfmjojkv6Hmn6Xor6Lov5Tlm57miJDlip8nKTsKICAgICAgICAgICAgJHRoaXMtPmxlbmRBcHBseSgpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChpbl9hcnJheSgkZnVuZENyZWRpdC0+Z2V0QXBwcm92YWxTdGF0dXMoKSwgWzMsIDVdKSkgewogICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19GQUlMRUQsICcg5o6I5L+h55Sz6K+35p+l6K+i6L+U5Zue5o6I5L+h5ouS57udOicgLiAkZnVuZENyZWRpdC0+Z2V0TWVzc2FnZSgpLCB0cnVlKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgJHRoaXMtPnNldFN0YXR1cygkdGhpcy0+Z2V0U3RhdHVzKCksICfmjojkv6Hmn6Xor6Lov5Tlm57vvJrnlLPor7fnirbmgIEtJyAuIHNlbGY6OiRhcHByb3ZhbFN0YXR1c01hcFskZnVuZENyZWRpdC0+Z2V0QXBwcm92YWxTdGF0dXMoKV0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gbGVuZEFwcGx5KCkKICAgIHsKICAgICAgICAvKioKICAgICAgICAgKiBAdmFyICRjYXNoTG9hbk9yZGVyIENhc2hMb2FuT3JkZXIKICAgICAgICAgKi8KICAgICAgICAkY2FzaExvYW5PcmRlciA9IENhc2hMb2FuT3JkZXI6OmZpbmRSb3dCeUNvbHVtbnMoWydvcmRlcl9udW1iZXInID0+ICR0aGlzLT5nZXRPcmRlck51bWJlcigpXSk7CiAgICAgICAgaWYgKGVtcHR5KCRjYXNoTG9hbk9yZGVyKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19MRU5EX0FQUExZX0ZBSUxFRCwgJ0Nhc2hMb2FuT3JkZXLkuI3lrZjlnKgnKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgJGZ1bmRDcmVkaXQgPSBCYW5rQ2FzaENyZWRpdDo6Z2V0Q3JlZGl0QnlDYXNoTG9hbk9yZGVyKCRjYXNoTG9hbk9yZGVyKTsKCiAgICAgICAgJGNvbnRyYWN0ID0gQ29udHJhY3Q6OmZpbmQoWydjb250cmFjdF9pZCcgPT4gJGNhc2hMb2FuT3JkZXItPmdldENvbnRyYWN0TnVtYmVyKCldKTsKICAgICAgICBpZiAoISRjb250cmFjdCkgewogICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19MRU5EX0FQUExZX0ZBSUxFRCwgJ+WQiOWQjOafpeivouS4uuepuicpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAkcGFyYW1zID0gbmV3IExlbmRBcHBseVBhcmFtcygpOwogICAgICAgICRwYXJhbXMKICAgICAgICAgICAgLT5zZXRJZFR5cGUoMSkKICAgICAgICAgICAgLT5zZXRJZE5vKCRjYXNoTG9hbk9yZGVyLT5nZXRJZENhcmROdW1iZXIoKSkKICAgICAgICAgICAgLT5zZXROYW1lKCRjYXNoTG9hbk9yZGVyLT5nZXROYW1lKCkpCiAgICAgICAgICAgIC0+c2V0UmVwYXltZW50TWV0aG9kKCdERUJYJykgLy/nrYnpop3mnKzmga8KICAgICAgICAgICAgLT5zZXRMb2FuQW1vdW50KENhc2hMb2FuT3JkZXI6OmZvcm1hdEFtb3VudCgkY2FzaExvYW5PcmRlci0+Z2V0QW1vdW50KCkpKQogICAgICAgICAgICAtPnNldExvYW5QZXJpb2QoJGNhc2hMb2FuT3JkZXItPmdldFBlcmlvZCgpKQogICAgICAgICAgICAtPnNldFNlcmlhbE5vKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKQogICAgICAgICAgICAtPnNldExvYW5Vbml0KCdNJykKICAgICAgICAgICAgLT5zZXRQYXlMb2FuQWNjb3VudElkKCRjYXNoTG9hbk9yZGVyLT5nZXRSZWNlaXZlQWNjb3VudCgpKQogICAgICAgICAgICAtPnNldENyZWRpdEFwcGx5SWQoJGZ1bmRDcmVkaXQtPmdldENyZWRpdEFwcGx5SWQoKSkKICAgICAgICAgICAgLT5zZXRTZXJ2aWNlUmF0ZSgwKQogICAgICAgICAgICAtPnNldExvYW5QdXJwb3NlKHNlbGY6OmdldExvYW5QdXJwb3NlKCRjb250cmFjdC0+Z2V0UHVycG9zZSgpKSkKICAgICAgICAgICAgLT5zZXRMb2FuSW50ZXJlc3RSYXRlKCRjYXNoTG9hbk9yZGVyLT5nZXRQZXJpb2RSYXRlKCkgKiAxMDApCiAgICAgICAgICAgIC0+c2V0TG9hbkNvbnRyYWN0Tm8oJGNvbnRyYWN0LT5nZXRDb250cmFjdElkKCkpCiAgICAgICAgICAgIC0+c2V0RmlsZUlkcyhCYW5rQ2FzaFVwbG9hZEZpbGU6OmdldExlbmRBcHBseUZpbGVzKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKSk7CgogICAgICAgICRyZXF1ZXN0ID0gWwogICAgICAgICAgICAnbWV0aG9kJyA9PiAnbGVuZEFwcGx5JywKICAgICAgICAgICAgJ3BhcmFtcycgPT4gJHBhcmFtcy0+dG9BcnJheSgpLAogICAgICAgIF07CgogICAgICAgICRyZXN1bHQgPSBCaXpTZnlXZWJDbGllbnQ6OmJhbmtGdW5kU2VuZERhdGEoJHJlcXVlc3QsICR0aGlzLT5nZXRGdW5kU291cmNlKCkpOwoKICAgICAgICBpZiAoaXNzZXQoJHJlc3VsdFsnZGF0YSddWydvcmRlck5vJ10pKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRPdXRPcmRlck51bWJlcigkcmVzdWx0WydkYXRhJ11bJ29yZGVyTm8nXSkKICAgICAgICAgICAgICAgIC0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19UT19MRU5EX0FQUExZX1FVRVJZLCAn5pSv55So55Sz6K+36L+U5Zue5oiQ5YqfJyk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9GQUlMRUQsICfmlK/nlKjnlLPor7fov5Tlm57lvILluLjvvJonIC4gaXNfc3RyaW5nKCRyZXN1bHQpID8/IGpzb25fZW5jb2RlKCRyZXN1bHQsIDMyMCkpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gbGVuZEFwcGx5UXVlcnkoKQogICAgewogICAgICAgIC8qKgogICAgICAgICAqIEB2YXIgJGNhc2hMb2FuT3JkZXIgQ2FzaExvYW5PcmRlcgogICAgICAgICAqLwogICAgICAgICRjYXNoTG9hbk9yZGVyID0gQ2FzaExvYW5PcmRlcjo6ZmluZFJvd0J5Q29sdW1ucyhbJ29yZGVyX251bWJlcicgPT4gJHRoaXMtPmdldE9yZGVyTnVtYmVyKCldKTsKICAgICAgICBpZiAoZW1wdHkoJGNhc2hMb2FuT3JkZXIpKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1FVRVJZX0NSRURJVF9BUFBMWV9GQUlMRUQsICdDYXNoTG9hbk9yZGVy5LiN5a2Y5ZyoJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJGxlbmRBcHBseVF1ZXJ5UGFyYW1zID0gbmV3IExlbmRBcHBseVF1ZXJ5UGFyYW1zKCk7CiAgICAgICAgJGxlbmRBcHBseVF1ZXJ5UGFyYW1zLT5zZXRTZXJpYWxObygkdGhpcy0+Z2V0T3JkZXJOdW1iZXIoKSk7CiAgICAgICAgJHJlcXVlc3QgPSBbCiAgICAgICAgICAgICdtZXRob2QnID0+ICdsZW5kQXBwbHlRdWVyeScsCiAgICAgICAgICAgICdwYXJhbXMnID0+IFsnYXBwbHlJbmZvTGlzdCcgPT4gWyRsZW5kQXBwbHlRdWVyeVBhcmFtcy0+dG9BcnJheSgpXV0sCiAgICAgICAgXTsKCiAgICAgICAgJHJlc3VsdCA9IEJpelNmeVdlYkNsaWVudDo6YmFua0Z1bmRTZW5kRGF0YSgkcmVxdWVzdCwgJHRoaXMtPmdldEZ1bmRTb3VyY2UoKSk7CiAgICAgICAgaWYgKCFpc3NldCgkcmVzdWx0Wydjb2RlJ10pIHx8ICRyZXN1bHRbJ2NvZGUnXSAhPSAnMDAwMDAwJyB8fCAhaXNzZXQoJHJlc3VsdFsnZGF0YSddWydhcHBseUluZm9MaXN0J10pKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX0xFTkRfQVBQTFlfUVVFUllfRkFJTEVELCBpc19zdHJpbmcoJHJlc3VsdCkgPz8ganNvbl9lbmNvZGUoJHJlc3VsdCwgMzIwKSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJGFwcGx5SW5mb0xpc3QgPSBjdXJyZW50KCRyZXN1bHRbJ2RhdGEnXVsnYXBwbHlJbmZvTGlzdCddKTsKICAgICAgICAkYXBwbHlTdGF0dXMgPSAkYXBwbHlJbmZvTGlzdFsnYXBwbHlTdGF0dXMnXSA/PyAnJzsKICAgICAgICBpZiAoaW5fYXJyYXkoJGFwcGx5U3RhdHVzLCBbJzEwMDcnXSkpIHsKICAgICAgICAgICAgJHRoaXMtPnNldExvYW5ObygkYXBwbHlJbmZvTGlzdFsnbG9hbk5vJ10pOwogICAgICAgICAgICAkdGhpcy0+c2V0RnVuZGluZ1RpbWUoIWVtcHR5KCRhcHBseUluZm9MaXN0Wydsb2FucGF5dGltZSddKSA/IGRhdGUoJ1ktbS1kIEg6aTpzJywgc3RydG90aW1lKCRhcHBseUluZm9MaXN0Wydsb2FucGF5dGltZSddKSkgOiBUaW1lOjpub3coKSk7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+cmVtaXRTdWNjZXNzKAogICAgICAgICAgICAgICAgJGNhc2hMb2FuT3JkZXIsCiAgICAgICAgICAgICAgICBzZWxmOjpTVEFUVVNfVE9fUEFZX0dBVEVXQVksCiAgICAgICAgICAgICAgICAn5pSv55So5p+l6K+i6L+U5Zue77yaJyAuIChzZWxmOjokYXBwbHlTdGF0dXNNYXBbJGFwcGx5U3RhdHVzXSA/PyAnJykgLiAnLS0nIC4gKCRhcHBseUluZm9MaXN0WydyZWFzb24nXSA/PyAnJykKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIGlmIChpbl9hcnJheSgkYXBwbHlTdGF0dXMsIFsnMTAwOCddKSkgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPnJlbWl0RmFpbGVkKAogICAgICAgICAgICAgICAgJGNhc2hMb2FuT3JkZXIsCiAgICAgICAgICAgICAgICBzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9RVUVSWV9GQUlMRUQsCiAgICAgICAgICAgICAgICAn5pSv55So5p+l6K+i6L+U5Zue77yaJyAuIChzZWxmOjokYXBwbHlTdGF0dXNNYXBbJGFwcGx5U3RhdHVzXSA/PyAnJykgLiAnLS0nIC4gKCRhcHBseUluZm9MaXN0WydyZWFzb24nXSA/PyAnJykKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdGhpcy0+c2V0U3RhdHVzKAogICAgICAgICAgICBzZWxmOjpTVEFUVVNfVE9fTEVORF9BUFBMWV9RVUVSWSwKICAgICAgICAgICAgJ+aUr+eUqOafpeivoui/lOWbnu+8micgLiAoc2VsZjo6JGFwcGx5U3RhdHVzTWFwWyRhcHBseVN0YXR1c10gPz8gJycpIC4gJy0tJyAuICgkYXBwbHlJbmZvTGlzdFsncmVhc29uJ10gPz8gJycpCiAgICAgICAgKTsKICAgIH0KCiAgICAvL+ajgOafpeiuouWNleeKtuaAgQogICAgcHVibGljIGZ1bmN0aW9uIGNoZWNrSGVscExvYW5TdGF0dXMoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlciwgJGRhdGEpCiAgICB7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgLy/nlJ/miJDov5jmrL7orqHliJIKICAgIHB1YmxpYyBmdW5jdGlvbiByZXBheVBsYW4oJHBsYW5EYXRhKQogICAgewogICAgICAgIHJldHVybiAobmV3IFxTaG91ZnV5b3VCaXpDb21tb25cTW9kZWxzXENhc2hCaWxsXENhc2hCaWxsKCkpLT5hdmVyYWdlQ2FwaXRhbFBsdXNJbnRlcmVzdCgkcGxhbkRhdGEpOwogICAgfQoKICAgIC8v6I635Y+W6K6i5Y2V5aSE55CG54q25oCBCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q2FzaExvYW5PcmRlclN0YXR1cyhDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCAkaXNOZWVkID0gdHJ1ZSkKICAgIHsKICAgICAgICAkc3RhdHVzID0gQ2FzaExvYW5PcmRlcjo6REVBTF9TVEFUVVNfTk9ORTsKCiAgICAgICAgLy/ov5vku7blrqHmoLjmiJDlip/miJbogIXlvIDmiLfov5vooYzkuK0g5Y675byA5oi3CiAgICAgICAgaWYgKGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JGF1ZGl0U3RhdHVzKSkgewogICAgICAgICAgICAkc3RhdHVzID0gQ2FzaExvYW5PcmRlcjo6REVBTF9TVEFUVVNfQVVESVRJTkc7CiAgICAgICAgfSBlbHNlaWYgKGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JGZ1bmRpbmdTdGF0dXMpKSB7CiAgICAgICAgICAgICRzdGF0dXMgPSBDYXNoTG9hbk9yZGVyOjpERUFMX1NUQVRVU19GVU5ESU5HOwogICAgICAgIH0gZWxzZWlmIChpbl9hcnJheSgkdGhpcy0+Z2V0U3RhdHVzKCksIHNlbGY6OiRzdWNjZXNzU3RhdHVzKSkgewogICAgICAgICAgICAkc3RhdHVzID0gQ2FzaExvYW5PcmRlcjo6REVBTF9TVEFUVVNfUkVQQVlJTkc7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHN0YXR1czsKICAgIH0KCiAgICAvL+iOt+WPluS4i+S4gOatpeeahFVSTAogICAgcHVibGljIGZ1bmN0aW9uIGdldE5leHRVcmwoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcikKICAgIHsKICAgICAgICAkdXJsID0gJyc7CiAgICAgICAgaWYgKGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JGF1ZGl0U3RhdHVzKSkgeyAgLy/ov5vku7blrqHmoLjkuK0KICAgICAgICAgICAgJHVybCA9ICRjYXNoTG9hbk9yZGVyLT5nZXRBdWRpdFVybCgpOwogICAgICAgIH0gZWxzZWlmIChpbl9hcnJheSgkdGhpcy0+Z2V0U3RhdHVzKCksIHNlbGY6OiRmdW5kaW5nU3RhdHVzKSkgeyAgICAvL+aUvuasvuS4rQogICAgICAgICAgICAkdXJsID0gQ2FzaExvYW5PcmRlcjo6Z2V0RnVuZGluZ1VybCgkY2FzaExvYW5PcmRlci0+Z2V0T3JkZXJOdW1iZXIoKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHVybDsKICAgIH0KCiAgICAvL+iOt+WPluWQiOWQjOefreagh+ivhuWIl+ihqAogICAgcHVibGljIGZ1bmN0aW9uIGdldENvbnRyYWN0U2hvcnROYW1lcygpCiAgICB7CiAgICAgICAgcmV0dXJuICcnOwogICAgfQoKICAgIC8v5pSv5LuY5Lia5Yqh5pWw5o2uCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGF5Qml6RGF0YShDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewoKICAgIH0KCiAgICAvL+aYr+WQpuaYr+aUvuasvuS4reeKtuaAgQogICAgcHVibGljIGZ1bmN0aW9uIGlzUmVtaXR0aW5nKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIpCiAgICB7CiAgICAgICAgcmV0dXJuIGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JHN1Y2Nlc3NTdGF0dXMpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpc1N1Y2Nlc3NTdGF0dXMoKQogICAgewogICAgICAgIHJldHVybiBpbl9hcnJheSgkdGhpcy0+Z2V0U3RhdHVzKCksIHNlbGY6OiRzdWNjZXNzU3RhdHVzKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gaXNGdW5kaW5nU3RhdHVzKCkKICAgIHsKICAgICAgICByZXR1cm4gaW5fYXJyYXkoJHRoaXMtPmdldFN0YXR1cygpLCBzZWxmOjokZnVuZGluZ1N0YXR1cyk7CiAgICB9CgogICAgLy/mo4Dmn6XmmK/lkKblj6/ku6XlvILluLjnu5PmuIUKICAgIHB1YmxpYyBmdW5jdGlvbiBjaGVja0Fibm9ybWFsU2V0dGxlbWVudChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCAkQmFua0Nhc2hMb2FuT3JkZXJPYmopCiAgICB7CgogICAgfQoKICAgIC8v5byA5aeL5byC5bi457uT5riFCiAgICBwdWJsaWMgZnVuY3Rpb24gYmVnaW5BYm5vcm1hbFNldHRsZW1lbnQoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlciwgJEJhbmtDYXNoTG9hbk9yZGVyT2JqKQogICAgewoKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSBDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzeW5jUGxhbihDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgIEJhbmtDYXNoQ29udHJhY3Q6OmNyZWF0ZUNvbnRyYWN0KCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKTsKCiAgICAgICAgJHF1ZXJ5UmVwYXlQbGFuUGFyYW1zID0gbmV3IFF1ZXJ5UmVwYXlQbGFuUGFyYW1zKCk7CgogICAgICAgICRxdWVyeVJlcGF5UGxhblBhcmFtcy0+c2V0TG9hbk5vKCR0aGlzLT5nZXRMb2FuTm8oKSk7CgogICAgICAgICRyZXF1ZXN0ID0gWwogICAgICAgICAgICAnbWV0aG9kJyA9PiAnUXVlcnlSZXBheVBsYW4nLAogICAgICAgICAgICAncGFyYW1zJyA9PiBbJ2FwcGx5TGlzdCcgPT4gWyRxdWVyeVJlcGF5UGxhblBhcmFtcy0+dG9BcnJheSgpXV0sCiAgICAgICAgXTsKCgogICAgICAgICRyZXN1bHQgPSBCaXpTZnlXZWJDbGllbnQ6OmJhbmtGdW5kU2VuZERhdGEoJHJlcXVlc3QsICR0aGlzLT5nZXRGdW5kU291cmNlKCkpOwogICAgICAgIGlmICghJHJlc3VsdCB8fCBlbXB0eSgkcmVzdWx0Wydjb2RlJ10pKSB7CiAgICAgICAgICAgIExvZzo6YmFua0Nhc2goJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkgLiAn5ZCM5q2l6L+Y5qy+6K6h5YiS6L+U5Zue54q25oCBZmFsc2UnKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKCRyZXN1bHRbJ2NvZGUnXSAhPSAnMDAwMDAwJykgewogICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpIC4gJ+WQjOatpei/mOasvuiuoeWIkui/lOWbnu+8micgLiBqc29uX2VuY29kZSgkcmVzdWx0KSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChlbXB0eSgkcmVzdWx0WydkYXRhJ11bJ3Jlc3VsdExpc3QnXSkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgZm9yZWFjaCAoJHJlc3VsdFsnZGF0YSddWydyZXN1bHRMaXN0J10gYXMgJGxpc3QpIHsKICAgICAgICAgICAgJGxvYW5ObyA9ICRsaXN0Wydsb2FuTm8nXSA/PyAnJzsKICAgICAgICAgICAgaWYgKCRsb2FuTm8gIT0gJHRoaXMtPmdldExvYW5ObygpKSB7CiAgICAgICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpIC4gJ+WQjOatpei/mOasvuiuoeWIkui/lOWbnuWAn+aNruWNleWPt+S4jeWMuemFje+8micgLiAkbG9hbk5vKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBCYW5rQ2FzaFJlcGF5UGxhbnM6OmNyZWF0ZVBsYW5zKCR0aGlzLCAkbGlzdCA/PyBbXSk7CiAgICAgICAgICAgIGlmICghZW1wdHkoJGxpc3RbJ3JlcGF5UGxhbkxpc3QnXSkpIHsKICAgICAgICAgICAgICAgIC8vaWYgKCR0aGlzLT5nZXRCaXpDaGFubmVsKCkgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIENhc2hCaWxsOjpzeW5jUmVwYXlTY2hlZHVsZUxpc3RTcCgkY2FzaExvYW5PcmRlci0+Z2V0T3JkZXJOdW1iZXIoKSwgJGxpc3RbJ3JlcGF5UGxhbkxpc3QnXSk7CiAgICAgICAgICAgICAgICAvKn0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5L+h6LS3572R5YWz57O757uf6K+35rGCYXBpCiAgICAgICAgICAgICAgICAgICAgQml6U2Z5V2ViQ2xpZW50OjpzZW5kQ3JlZGl0QXBpUmVxdWVzdCgnYWZ0ZXIuYmlsbC5zeW5jQ2FzaEJpbGwnLCBbCiAgICAgICAgICAgICAgICAgICAgICAgICdvcmRlcl9udW1iZXInID0+ICRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpLAogICAgICAgICAgICAgICAgICAgICAgICAnZnVuZF9zb3VyY2UnID0+ICRjYXNoTG9hbk9yZGVyLT5nZXRGdW5kU291cmNlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICdwbGFuJyA9PiAkbGlzdFsncmVwYXlQbGFuTGlzdCddLAogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgfSovCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgfQoKCiAgICBwdWJsaWMgIGZ1bmN0aW9uIGxlbmRDb250cmFjdFF1ZXJ5KCkKICAgIHsKICAgICAgICAkcGFyYW1zID0gbmV3IExlbmRDb250cmFjdFF1ZXJ5UGFyYW1zKCk7CiAgICAgICAgJHBhcmFtcy0+c2V0T3JkZXJObygkdGhpcy0+Z2V0T3V0T3JkZXJOdW1iZXIoKSk7CgogICAgICAgICRyZXF1ZXN0ID0gWwogICAgICAgICAgICAnbWV0aG9kJyA9PiAnTGVuZENvbnRyYWN0UXVlcnknLAogICAgICAgICAgICAncGFyYW1zJyA9PiAkcGFyYW1zLT50b0FycmF5KCksCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIEJpelNmeVdlYkNsaWVudDo6YmFua0Z1bmRTZW5kRGF0YSgkcmVxdWVzdCwgJHRoaXMtPmdldEZ1bmRTb3VyY2UoKSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHJlcGF5bWVudChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCBDYXNoUmVwYXltZW50ICRjYXNoUmVwYXltZW50KQogICAgewogICAgICAgIHJldHVybiBCYW5rQ2FzaFJlcGF5UGxhbnM6OnJlcGF5bWVudCgkY2FzaExvYW5PcmRlciwgJGNhc2hSZXBheW1lbnQsICR0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtICRvcmRlck51bWJlcgogICAgICogQHJldHVybiBCYW5rQ2FzaExvYW5PcmRlcgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE9yZGVyKCRvcmRlck51bWJlcikKICAgIHsKICAgICAgICByZXR1cm4gc3RhdGljOjpmaW5kKFsnb3JkZXJfbnVtYmVyJyA9PiAkb3JkZXJOdW1iZXJdKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcHJlUmVwYXlUcmlhbCgpCiAgICB7CiAgICAgICAgJHBhcmFtcyA9IG5ldyBQcmVSZXBheVRyaWFsUGFyYW1zKCk7CgogICAgICAgICRwYXJhbXMtPnNldE9yZGVyTm8oJHRoaXMtPmdldE91dE9yZGVyTnVtYmVyKCkpLT5zZXRBZHZhbmNlRmxhZygyKTsKCiAgICAgICAgJHJlcXVlc3QgPSBbCiAgICAgICAgICAgICdtZXRob2QnID0+ICdQcmVSZXBheVRyaWFsJywKICAgICAgICAgICAgJ3BhcmFtcycgPT4gJHBhcmFtcy0+dG9BcnJheSgpLAogICAgICAgIF07CgogICAgICAgIHJldHVybiBCaXpTZnlXZWJDbGllbnQ6OmJhbmtGdW5kU2VuZERhdGEoJHJlcXVlc3QsICR0aGlzLT5nZXRGdW5kU291cmNlKCkpOwogICAgfQoKCiAgICAvKioKICAgICAqIEBwYXJhbSAkbG9hblVzYWdlCiAgICAgKiBAcmV0dXJuIG1peGVkfHN0cmluZwogICAgICovCgogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRMb2FuUHVycG9zZSgkbG9hblVzYWdlKQogICAgewogICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAn5Liq5Lq65pel5bi45raI6LS5JyA9PiAnNjYnLAogICAgICAgICAgICAn5pWZ6IKyJyA9PiAnNScsCiAgICAgICAgICAgICfoo4Xkv64nID0+ICcxJywKICAgICAgICAgICAgJ+WMu+eWlycgPT4gJzY0JywKICAgICAgICAgICAgJ+aXhea4uCcgPT4gJzYnLAogICAgICAgICAgICAn5py656WoJyA9PiAnNjUnLAogICAgICAgIF07CgogICAgICAgIHJldHVybiAkZGF0YVskbG9hblVzYWdlXSA/PyAnOTknOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TGlzdEJ5U3RhdHVzKCRzdGF0dXMgPSBbXSkKICAgIHsKICAgICAgICByZXR1cm4gKG5ldyBzdGF0aWMoKSkKICAgICAgICAgICAgLT53aGVyZUluKCdzdGF0dXMnLCAkc3RhdHVzKQogICAgICAgICAgICAtPmFuZFdoZXJlKCdjcmVhdGVkX3RpbWUnLCBkYXRlKCdZLW0tZCBIOmk6cycsIFRpbWU6OnRpbWUoKSAtIDg2NDAwICogNSksICc+JykKICAgICAgICAgICAgLT5hbmRXaGVyZSgnYml6X2NoYW5uZWwnLCAxKQogICAgICAgICAgICAtPm9yZGVyQnkoKQogICAgICAgICAgICAtPmxpbWl0KDEwMDApCiAgICAgICAgICAgIC0+Z2V0QWxsKCk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGNhbmNlbEZ1bmRPcmRlcihDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgIC8vIFRPRE86IEltcGxlbWVudCBjYW5jZWxGdW5kT3JkZXIoKSBtZXRob2QuCiAgICB9Cn0=</text>
      </register>
      <register name="c" type="4">
        <text></text>
      </register>
      <register name="i" type="4">
        <text>kj</text>
      </register>
      <register name="j" type="4">
        <text>jjj</text>
      </register>
      <register name="k" type="4">
        <text>j,</text>
      </register>
      <register name="-" type="4">
        <text>http_response_header</text>
      </register>
      <register name="/" type="4">
        <text encoding="base64">XDxib2R5UGFyYW1zXD4=</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">Y2xhc3MgQmFua0Nhc2hMb2FuT3JkZXIgZXh0ZW5kcyBcU2hvdWZ1eW91XFRhYmxlXEJhbmtDYXNoTG9hbk9yZGVyIGltcGxlbWVudHMgRnVuZExvYW5PcmRlckludGVyZmFjZQp7CiAgICB1c2UgT3JtTW9kZWw7CiAgICB1c2UgTUFjdGl2ZVJlY29yZDsKCiAgICBjb25zdCBTVEFUVVNfTk9STUFMID0gMDsgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIneWni+eKtuaAgQogICAgY29uc3QgU1RBVFVTX1RPX1VQTE9BRF9mSUxFID0gMTA7ICAgICAgICAgICAgICAvLyDlrqHmoLjpgJrov4flvoXkuIrkvKDmlofku7YKICAgIGNvbnN0IFNUQVRVU19VUExPQURfZklMRV9GQUlMRUQgPSAtMTA7ICAgICAgICAgLy8g5LiK5Lyg5paH5Lu25aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1RPX0NSRURJVF9BUFBMWSA9IDIwOyAgICAgICAgICAgICAvLyDkuIrkvKDmlofku7bmiJDlip/lvoXnlLPor7fmjojkv6EKICAgIGNvbnN0IFNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVEID0gLTIwOyAgICAgICAgLy8g55Sz6K+35o6I5L+h5aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWSA9IDMwOyAgICAgICAvLyDmjojkv6HnlLPor7fmiJDlip/lvoXmn6Xor6Lnu5PmnpwKICAgIGNvbnN0IFNUQVRVU19RVUVSWV9DUkVESVRfQVBQTFlfRkFJTEVEID0gLTMwOyAgLy8g5o6I5L+h57uT5p6c5p+l6K+i5aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1RPX0xFTkRfQVBQTFkgPSA0MDsgICAgICAgICAgICAgICAgLy8g5o6I5L+h5oiQ5Yqf5b6F5pSv55So55Sz6K+3CiAgICBjb25zdCBTVEFUVVNfTEVORF9BUFBMWV9GQUlMRUQgPSAtNDA7ICAgICAgICAgICAvLyDmlK/nlKjnlLPor7flpLHotKUKCiAgICBjb25zdCBTVEFUVVNfVE9fTEVORF9BUFBMWV9RVUVSWSA9IDUwOyAgICAgICAgICAgLy8g5pSv55So55Sz6K+35oiQ5Yqf5b6F5p+l6K+i57uT5p6cCiAgICBjb25zdCBTVEFUVVNfTEVORF9BUFBMWV9RVUVSWV9GQUlMRUQgPSAtNTA7ICAgICAgICAgICAgIC8vIOaUr+eUqOe7k+aenOafpeivouWksei0pQoKCiAgICBjb25zdCBTVEFUVVNfVE9fUEFZX0dBVEVXQVkgPSA4ODsgICAgICAgICAgICAgICAvLyDmlK/nlKjmiJDlip/lvoXor7fmsYLmlK/ku5jns7vnu58KICAgIGNvbnN0IFNUQVRVU19QQVlfR0FURVdBWV9GQUlMRUQgPSAtODg7ICAgICAgLy8g6K+35rGC5pSv5LuY57O757uf5aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1NVQ0NFU1MgPSA5OTsgICAgICAvLyDorqLljZXmiJDlip8KICAgIGNvbnN0IFNUQVRVU19GQUlMRUQgPSAtOTk7ICAgICAgLy8g6K6i5Y2V5aSx6LSlCgogICAgY29uc3QgU1BfQ0FTSF9DT0RFID0gJ3NwX2Nhc2gnOwogICAgY29uc3QgRlVORF9TT1VSQ0UgPSBbc2VsZjo6U1BfQ0FTSF9DT0RFXTsKCiAgICBwcml2YXRlIHN0YXRpYyAkYXVkaXRTdGF0dXMgPSBbc2VsZjo6U1RBVFVTX05PUk1BTCwgIHNlbGY6OlNUQVRVU19UT19VUExPQURfZklMRSwgc2VsZjo6U1RBVFVTX1RPX0NSRURJVF9BUFBMWSwgc2VsZjo6U1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWV07CiAgICBwcml2YXRlIHN0YXRpYyAkZnVuZGluZ1N0YXR1cyA9IFtzZWxmOjpTVEFUVVNfVE9fTEVORF9BUFBMWSwgc2VsZjo6U1RBVFVTX1RPX0xFTkRfQVBQTFlfUVVFUlksIHNlbGY6OlNUQVRVU19UT19QQVlfR0FURVdBWV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lrqHmoLjnirbmgIEKICAgIHByaXZhdGUgc3RhdGljICRzdWNjZXNzU3RhdHVzID0gW3NlbGY6OlNUQVRVU19TVUNDRVNTXTsKCgogICAgcHJpdmF0ZSBzdGF0aWMgJHN0YXR1c0Rlc2NyaXB0aW9uID0gWwogICAgICAgIHNlbGY6OlNUQVRVU19OT1JNQUwgPT4gJ+WIneWni+eKtuaAgScsCiAgICAgICAgc2VsZjo6U1RBVFVTX1RPX1VQTE9BRF9mSUxFID0+ICflrqHmoLjpgJrov4flvoXkuIrkvKDmlofku7YnLCAvLyDmn6Xor6LnlKjmiLflvIDmiLfnirbmgIHlpLHotKUKICAgICAgICBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVEID0+ICfkuIrkvKDmlofku7blpLHotKUnLC8vIOS4iuS8oOW5s+WPsOazqOWGjOacjeWKoeWNj+iuruWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19DUkVESVRfQVBQTFkgPT4gJ+S4iuS8oOaWh+S7tuaIkOWKn+W+heeUs+ivt+aOiOS/oScsICAvLyDkuIrkvKDlubPlj7Dms6jlhozmnI3liqHljY/orq7miJDlip/lvoXlrZjnrqHlvIDmiLcKICAgICAgICBzZWxmOjpTVEFUVVNfQ1JFRElUX0FQUExZX0ZBSUxFRCA9PiAn55Sz6K+35o6I5L+h5aSx6LSlJywgLy8g6I635Y+W5a2Y566h5byA5oi36ZO+5o6l5aSx6LSlCiAgICAgICAgc2VsZjo6U1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWSA9PiAn5o6I5L+h55Sz6K+35oiQ5Yqf5b6F5p+l6K+i57uT5p6cJywgLy8g6I635Y+W5a2Y566h5byA5oi36ZO+5o6l5oiQ5Yqf5b6F5ZCM5q2l5byA5oi357uT5p6cCiAgICAgICAgc2VsZjo6U1RBVFVTX1FVRVJZX0NSRURJVF9BUFBMWV9GQUlMRUQgPT4gJ+aOiOS/oee7k+aenOafpeivouWksei0pScsIC8vIOW8gOaIt+e7k+aenOWQjOatpei/lOWbnuWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19MRU5EX0FQUExZID0+ICfmjojkv6HmiJDlip/lvoXmlK/nlKjnlLPor7cnLCAvLyDlvIDmiLfnu5PmnpzlkIzmraXov5Tlm57miJDlip/lvoXmn6Xor6LlvIDmiLfnu5PmnpwKICAgICAgICBzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9GQUlMRUQgPT4gJ+aUr+eUqOeUs+ivt+Wksei0pScsIC8vIOWtmOeuoeW8gOaIt+Wksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19MRU5EX0FQUExZX1FVRVJZID0+ICfmlK/nlKjnlLPor7fmiJDlip/lvoXmn6Xor6Lnu5PmnpwnLCAvLyDlrZjnrqHlvIDmiLflt7LmiJDlip/lvoXmj5DkuqTorqLljZXoh7Ppppbph5EKICAgICAgICBzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9RVUVSWV9GQUlMRUQgPT4gJ+aUr+eUqOe7k+aenOafpeivouWksei0pScsIC8vIOaPkOS6pOiuouWNleiHs+mmlumHkeWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19QQVlfR0FURVdBWSA9PiAn5pSv55So5oiQ5Yqf5b6F6K+35rGC5pSv5LuY57O757ufJywgLy8g5o+Q5Lqk6K6i5Y2V6Iez6aaW6YeR5oiQ5Yqf5b6F6K6i5Y2V5a6h5qC457uT5p6c5p+l6K+iCiAgICAgICAgc2VsZjo6U1RBVFVTX1BBWV9HQVRFV0FZX0ZBSUxFRCA9PiAn6K+35rGC5pSv5LuY57O757uf5aSx6LSlJywgLy8g6K6i5Y2V5a6h5qC457uT5p6c5p+l6K+i5aSx6LSlCiAgICAgICAgc2VsZjo6U1RBVFVTX1NVQ0NFU1MgPT4gJ+iuouWNleaIkOWKnycsIC8vIOaPkOS6pOiuouWNleWuoeaguOWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19GQUlMRUQgPT4gJ+iuouWNleWksei0pScsIC8vIOiuouWNleWuoeaguOaIkOWKn+W+heS4iuS8oOaWh+S7tgogICAgXTsKCiAgICBwcml2YXRlIHN0YXRpYyAkYXBwcm92YWxTdGF0dXNNYXAgPSBbCiAgICAgICAgMCA9PiAn5pyq5a6h5qC4JywKICAgICAgICAxID0+ICflrqHmoLjkuK0nLAogICAgICAgIDIgPT4gJ+WuoeaguOaIkOWKnycsCiAgICAgICAgMyA9PiAn5a6h5qC45ouS57udJywKICAgICAgICA0ID0+ICfkurrlt6XlrqHmoLgnLAogICAgICAgIDUgPT4gJ+WuoeaguOWksei0pScsCiAgICAgICAgNiA9PiAn5b6F5aSE55CGJywKICAgICAgICA3ID0+ICflpITnkIbkuK0nLAogICAgXTsKCiAgICBwcml2YXRlIHN0YXRpYyAkYXBwbHlTdGF0dXNNYXAgPSBbCiAgICAgICAgMTAwMCA9PiAn5b6F5bmz5Y+w5aSE55CGJywKICAgICAgICAxMDAxID0+ICflvoXotYTmlrnlpITnkIYnLAogICAgICAgIDEwMDIgPT4gJ+eUs+ivt+aLkue7nScsCiAgICAgICAgMTAwMyA9PiAn5a6h5qC45aSE55CG5LitJywKICAgICAgICAxMDA0ID0+ICflrqHmoLjpgJrov4cnLAogICAgICAgIDEwMDUgPT4gJ+WuoeaguOaLkue7nScsCiAgICAgICAgMTAwNiA9PiAn5b6F5pS+5qy+JywKICAgICAgICAxMDA3ID0+ICflt7LmlL7mrL4nLAogICAgICAgIDEwMDggPT4gJ+aUvuasvuWksei0pScsCiAgICAgICAgMTAwOSA9PiAn6L+Y5qy+5LitJywKICAgICAgICAxMDEwID0+ICflt7Lnu5PmuIUnLAogICAgICAgIDEwMTEgPT4gJ+i1hOmHkeaWueWGs+etluS4rQknLAogICAgICAgIDEwMTIgPT4gJ+W+heetvue6picsCiAgICAgICAgMTAxMyA9PiAn562+57qm5aSx6LSlJywKICAgIF07CgogICAgcHJpdmF0ZSBzdGF0aWMgJGNvbnRyYWN0TWFwID0gWwogICAgICAgICd4eWYxNDEnID0+ICcxMTAxJywKICAgICAgICAneHlmMTQzJyA9PiAnMTEwNCcsCiAgICAgICAgJ3h5ZjE0MicgPT4gJzEyMDYnLAogICAgXTsKCiAgICBwdWJsaWMgZnVuY3Rpb24gc2V0U3RhdHVzKCRzdGF0dXMsICRtZXNzYWdlID0gJycpCiAgICB7CiAgICAgICAgJHRoaXMtPnNldE1lc3NhZ2UoJG1lc3NhZ2UpOwogICAgICAgICR0aGlzLT5zZXRVcGRhdGVkVGltZShUaW1lOjpub3coKSk7CiAgICAgICAgaWYgKCR0aGlzLT5nZXRTdGF0dXMoKSAhPSAkc3RhdHVzKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXNIaXN0b3J5KHRyaW0oJHRoaXMtPmdldFN0YXR1c0hpc3RvcnkoKSAuICcsJyAuICR0aGlzLT5nZXRTdGF0dXMoKSwgJywnKSk7CiAgICAgICAgfQogICAgICAgICR0aGlzLT5zZXRTdGF0dXNEZXNjKHNlbGY6OiRzdGF0dXNEZXNjcmlwdGlvblskc3RhdHVzXSk7CiAgICAgICAgcGFyZW50OjpzZXRTdGF0dXMoJHN0YXR1cyk7CiAgICAgICAgJHRoaXMtPnVwZGF0ZSgpOwogICAgICAgIHJldHVybiAkdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIOWIm+W7uuiuouWNlQogICAgICogQHBhcmFtIENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIKICAgICAqIEByZXR1cm4gJHRoaXMKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIG9yZGVyQ3JlYXRlKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIpCiAgICB7CiAgICAgICAgcGFyZW50OjpzZXRTdGF0dXMoc2VsZjo6U1RBVFVTX05PUk1BTCk7CiAgICAgICAgJHRoaXMKICAgICAgICAgICAgLT5zZXRGdW5kU291cmNlKCRjYXNoTG9hbk9yZGVyLT5nZXRGdW5kU291cmNlKCkpCiAgICAgICAgICAgIC0+c2V0Qml6Q2hhbm5lbCgxKQogICAgICAgICAgICAtPnNldE9yZGVyTnVtYmVyKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKQogICAgICAgICAgICAtPnNldE91dE9yZGVyTnVtYmVyKCcnKQogICAgICAgICAgICAtPnNldFN0YXR1c0hpc3RvcnkoJycpCiAgICAgICAgICAgIC0+c2V0TG9hbk5vKCcnKQogICAgICAgICAgICAtPnNldFN0YXR1c0Rlc2Moc2VsZjo6JHN0YXR1c0Rlc2NyaXB0aW9uW3NlbGY6OlNUQVRVU19OT1JNQUxdKQogICAgICAgICAgICAtPnNldE1lc3NhZ2UoJycpCiAgICAgICAgICAgIC0+c2V0Qml6RGF0YSgnJykKICAgICAgICAgICAgLT5zZXRGdW5kaW5nVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT5zZXRVcGRhdGVkVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT5zZXRDcmVhdGVkVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT5pbnNlcnQoKTsKCiAgICAgICAgcmV0dXJuICR0aGlzOwogICAgfQoKICAgIC8qKgogICAgICog5ZCR6LWE5pa56L+b5Lu25YmN77yM5a6h5qC45o6l5Y+jCiAgICAgKiBAcGFyYW0gQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcgogICAgICogQHJldHVybiBtaXhlZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gb3JkZXJBdWRpdChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICog5ZCR6LWE5pa56L+b5Lu25o6l5Y+jCiAgICAgKiBAcGFyYW0gQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcgogICAgICogQHJldHVybiBtaXhlZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gb3JkZXJSZW1pdChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgICRiYW5rQ2FzaExvYW5PcmRlciA9IHNlbGY6OmdldE9yZGVyKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKTsKICAgICAgICAkYmFua0Nhc2hMb2FuT3JkZXItPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfVE9fVVBMT0FEX2ZJTEUpOwogICAgICAgIHJldHVybiAkYmFua0Nhc2hMb2FuT3JkZXItPnVwbG9hZEZpbGUoJGNhc2hMb2FuT3JkZXIpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiByZW1pdEZhaWxlZChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCAkc3RhdHVzLCAkcmVzdWx0UmVhc29uLCAkaXNBZGRVc2VyR3JleUxpc3QgPSBmYWxzZSkKICAgIHsKICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKCRzdGF0dXMsICRyZXN1bHRSZWFzb24pOwogICAgICAgICRjYXNoTG9hbk9yZGVyLT5yZW1pdEZhaWxlZCgkcmVzdWx0UmVhc29uKTsKICAgICAgICBDYXNoUG9vbFVzZXJHcmV5TGlzdDo6c2V0RGVmYXVsdExpbWl0VGltZSgzMCk7CiAgICAgICAgJGlzQWRkVXNlckdyZXlMaXN0ICYmIENhc2hQb29sVXNlckdyZXlMaXN0OjpjcmVhdGVCeU9yZGVyKCRjYXNoTG9hbk9yZGVyLCAkcmVzdWx0UmVhc29uKTsgLy/ngbDlkI3ljZXliqDlhaUKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVtaXRTdWNjZXNzKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIsICRzdGF0dXMsICRyZXN1bHRSZWFzb24pCiAgICB7CiAgICAgICAgJHRoaXMtPnNldFN0YXR1cygkc3RhdHVzLCAkcmVzdWx0UmVhc29uKTsKICAgICAgICAkcGF5UmVzdWx0ID0gJGNhc2hMb2FuT3JkZXItPnJlcXVlc3RQYXlHYXRld2F5Q3JlYXRlUGF5T3JkZXIoKTsKICAgICAgICBpZiAoJHBheVJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfUEFZX0dBVEVXQVlfRkFJTEVELCAn6K+35rGC5pSv5LuY57O757uf55Sf5oiQ5pSv5LuY6K6w5b2V5aSx6LSlJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJHBheVJlc3VsdFsncGF5X3RpbWUnXSA9ICR0aGlzLT5nZXRGdW5kaW5nVGltZSgpOwogICAgICAgICRjYXNoTG9hbk9yZGVyLT5yZW1pdFN1Y2Nlc3MoJHBheVJlc3VsdCk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1NVQ0NFU1MsICfor7fmsYLmlK/ku5jns7vnu5/nlJ/miJDmlK/ku5jorrDlvZXmiJDlip8nKTsKICAgIH0KCiAgICAvKioKICAgICAqIOS4iuS8oOaWh+S7tgogICAgICogQHBhcmFtIENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHVwbG9hZEZpbGUoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcikKICAgIHsKICAgICAgICAkb2NySW5mbyA9IEJpelNmeVdlYkNsaWVudDo6Z2V0T2NyVmlldyhbCiAgICAgICAgICAgICdpZF9jYXJkX251bWJlcicgPT4gJGNhc2hMb2FuT3JkZXItPmdldElkQ2FyZE51bWJlcigpLAogICAgICAgICAgICAnbW9iaWxlJyA9PiAkY2FzaExvYW5PcmRlci0+Z2V0TW9iaWxlKCksCiAgICAgICAgICAgICdhcHAnID0+ICRjYXNoTG9hbk9yZGVyLT5nZXRBcHAoKSwKICAgICAgICBdKTsKICAgICAgICBpZiAoCiAgICAgICAgICAgICRvY3JJbmZvID09IGZhbHNlCiAgICAgICAgICAgIHx8CiAgICAgICAgICAgIGVtcHR5KCRvY3JJbmZvWydpZF9jYXJkX2Zyb250J10pCiAgICAgICAgICAgIHx8CiAgICAgICAgICAgIGVtcHR5KCRvY3JJbmZvWydpZF9jYXJkX2JhY2snXSkKICAgICAgICApIHsKICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAnb2Ny5LiN5a2Y5Zyo5oiW57y65bCR5p+Q6aG55paH5Lu2JywgdHJ1ZSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgICRmaWxlcyA9IFsKICAgICAgICAgICAgJzEwMDEnID0+ICRvY3JJbmZvWydpZF9jYXJkX2Zyb250J10gPz8gJycsLy/ouqvku73or4HmraPpnaIKICAgICAgICAgICAgJzEwMDInID0+ICRvY3JJbmZvWydpZF9jYXJkX2JhY2snXSA/PyAnJywvL+i6q+S7veivgeWPjemdogogICAgICAgIF07CgogICAgICAgICRmZGRDb250cmFjdHMgPSBGZGRDb250cmFjdDo6ZmluZEFsbChbJ21hc3Rlcl9jb250cmFjdF9pZCcgPT4gJGNhc2hMb2FuT3JkZXItPmdldENvbnRyYWN0TnVtYmVyKCldKTsKICAgICAgICBpZiAoZW1wdHkoJGZkZENvbnRyYWN0cykpIHsKICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAn5p+l6K+i5ZCI5ZCM5aSx6LSl5oiW5Li656m6Jyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZvcmVhY2ggKCRmZGRDb250cmFjdHMgYXMgJGNvbnRyYWN0KSB7CiAgICAgICAgICAgIGlmIChlbXB0eSgkY29udHJhY3QtPmdldERvd25sb2FkVXJsKCkpKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19VUExPQURfZklMRV9GQUlMRUQsICflkIjlkIzkuIvovb3lnLDlnYDkuLrnqbonKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHBkZkZpbGUgPSAnL3h5ZnN0YXRpYy8nIC4gJGNvbnRyYWN0LT5nZXREb3dubG9hZFVybCgpOwogICAgICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRwZGZGaWxlKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAn5ZCI5ZCM5paH5Lu25LiN5a2Y5ZyoJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpc3NldChzZWxmOjokY29udHJhY3RNYXBbJGNvbnRyYWN0LT5nZXRTaG9ydE5hbWUoKV0pKSB7CiAgICAgICAgICAgICAgICAkZmlsZXNbc2VsZjo6JGNvbnRyYWN0TWFwWyRjb250cmFjdC0+Z2V0U2hvcnROYW1lKCldXSA9ICRwZGZGaWxlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBUT0RPIOW+heWIoOmZpAogICAgICAgICAgICBpZiAoJGNvbnRyYWN0LT5nZXRTaG9ydE5hbWUoKSA9PSAneHlmMTQzJykgewogICAgICAgICAgICAgICAgJGZpbGVzWycxMTA3J10gPSAkcGRmRmlsZTsKICAgICAgICAgICAgfQoKICAgICAgICB9CgoKICAgICAgICBmb3JlYWNoICgkZmlsZXMgYXMgJGZpbGVUeXBlID0+ICRmaWxlVXJsKSB7CiAgICAgICAgICAgICRzbEZpbGUgPSBCYW5rQ2FzaFVwbG9hZEZpbGU6OmdldE9uZUZpbGUoJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCksICRmaWxlVHlwZSk7CiAgICAgICAgICAgIGlmICgkc2xGaWxlKSB7CiAgICAgICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCLlkIjlkIzmlofku7blt7Lnu4/lrZjlnKg6eyRzbEZpbGUtPmdldEZpbGVOYW1lKCl9ICwg6K6i5Y2V5Y+377yaeyRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpfSIpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIExvZzo6YmFua0Nhc2goJ+W8gOWni+S4iuS8oO+8micgLiAkZmlsZVVybCk7CgogICAgICAgICAgICAkc2xGaWxlID0gQmFua0Nhc2hVcGxvYWRGaWxlOjpjcmVhdGVGaWxlKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpLCAkZmlsZVR5cGUsICRmaWxlVXJsKTsKICAgICAgICAgICAgJHJlc3VsdCA9ICR0aGlzLT51cGxvYWRGaWxlQXBpKCRzbEZpbGUpOwogICAgICAgICAgICBpZiAoISRyZXN1bHQgfHwgZW1wdHkoJHJlc3VsdFsnY29kZSddKSkgewogICAgICAgICAgICAgICAgJHNsRmlsZS0+c2V0U3RhdHVzKCdmYWlsZWQnKS0+c2V0TWVzc2FnZSgn6L+U5ZueZmFsc2UnKS0+c2V0VXBkYXRlZFRpbWUoVGltZTo6bm93KCkpLT51cGRhdGUoKTsKICAgICAgICAgICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgkY2FzaExvYW5PcmRlciwgc2VsZjo6U1RBVFVTX1VQTE9BRF9mSUxFX0ZBSUxFRCwgJ+S4iuS8oOaWh+S7tuivt+axguWksei0pScpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHJlc3VsdFsnY29kZSddICE9ICcwMDAwMDAnKSB7CiAgICAgICAgICAgICAgICAkc2xGaWxlLT5zZXRTdGF0dXMoJ2ZhaWxlZCcpLT5zZXRNZXNzYWdlKCfov5Tlm546JyAuICRyZXN1bHRbJ21lc3NhZ2UnXSktPnNldFVwZGF0ZWRUaW1lKFRpbWU6Om5vdygpKS0+dXBkYXRlKCk7CiAgICAgICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCLkuIrkvKDmlofku7bov5Tlm57lpLHotKU6eyRzbEZpbGUtPmdldEZpbGVOYW1lKCl9ICwg6K6i5Y2V5Y+377yaeyRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpfSIpOwogICAgICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAkcmVzdWx0WydtZXNzYWdlJ10gPz8gJycpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkc2xGaWxlCiAgICAgICAgICAgICAgICAtPnNldFN0YXR1cygnc3VjY2VzcycpCiAgICAgICAgICAgICAgICAtPnNldE1lc3NhZ2UoJ+S4iuS8oOaIkOWKnycpCiAgICAgICAgICAgICAgICAtPnNldEZpbGVJZCgkcmVzdWx0WydkYXRhJ11bJ2ZpbGVJZCddID8/ICcnKQogICAgICAgICAgICAgICAgLT5zZXRVcmwoJHJlc3VsdFsnZGF0YSddWyd1cmwnXSA/PyAnJykKICAgICAgICAgICAgICAgIC0+c2V0VXBkYXRlZFRpbWUoVGltZTo6bm93KCkpCiAgICAgICAgICAgICAgICAtPnVwZGF0ZSgpOwoKICAgICAgICB9CiAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfVE9fQ1JFRElUX0FQUExZLCAn5LiK5Lyg5paH5Lu25oiQ5YqfJyk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jcmVkaXRBcHBseSgpOwogICAgfQoKICAgIHByaXZhdGUgIGZ1bmN0aW9uIHVwbG9hZEZpbGVBcGkoQmFua0Nhc2hVcGxvYWRGaWxlICRmdW5kVXBsb2FkRmlsZSkKICAgIHsKICAgICAgICAkcGFyYW1zID0gbmV3IFVwbG9hZEZpbGVQYXJhbXMoKTsKICAgICAgICAkcGFyYW1zLT5zZXRGaWxlKCRmdW5kVXBsb2FkRmlsZS0+Z2V0RmlsZU5hbWUoKSk7CiAgICAgICAgJHBhcmFtcy0+c2V0RmlsZVR5cGUoJGZ1bmRVcGxvYWRGaWxlLT5nZXRGaWxlVHlwZSgpKTsKICAgICAgICAkcGFyYW1zLT5zZXRGaWxlTmFtZShTZXF1ZW5jZTo6Z2VuUmVxdWVzdFNuKCkgLiBzdWJzdHIoJGZ1bmRVcGxvYWRGaWxlLT5nZXRGaWxlTmFtZSgpLCBzdHJycG9zKCRmdW5kVXBsb2FkRmlsZS0+Z2V0RmlsZU5hbWUoKSwgJy4nKSkpOwoKICAgICAgICAkcmVxdWVzdFsnbWV0aG9kJ10gPSAnVXBsb2FkRmlsZSc7CiAgICAgICAgJHJlcXVlc3RbJ3BhcmFtcyddID0gJHBhcmFtcy0+dG9BcnJheSgpOwoKICAgICAgICByZXR1cm4gQml6U2Z5V2ViQ2xpZW50OjpiYW5rRnVuZFNlbmREYXRhKCRyZXF1ZXN0LCAkdGhpcy0+Z2V0RnVuZFNvdXJjZSgpKTsKCiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGNyZWRpdEFwcGx5KCkKICAgIHsKICAgICAgICAvKioKICAgICAgICAgKiBAdmFyICRjYXNoTG9hbk9yZGVyIENhc2hMb2FuT3JkZXIKICAgICAgICAgKi8KICAgICAgICAkY2FzaExvYW5PcmRlciA9IENhc2hMb2FuT3JkZXI6OmZpbmRSb3dCeUNvbHVtbnMoWydvcmRlcl9udW1iZXInID0+ICR0aGlzLT5nZXRPcmRlck51bWJlcigpXSk7CiAgICAgICAgaWYgKGVtcHR5KCRjYXNoTG9hbk9yZGVyKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVELCAnQ2FzaExvYW5PcmRlcuS4jeWtmOWcqCcpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKCiAgICAgICAgJGZ1bmRDcmVkaXQgPSBCYW5rQ2FzaENyZWRpdDo6Z2V0Q3JlZGl0QnlDYXNoTG9hbk9yZGVyKCRjYXNoTG9hbk9yZGVyKTsKCiAgICAgICAgJGhlYWRlciA9IFsKICAgICAgICAgICAgJ2FwcCcgPT4gJGNhc2hMb2FuT3JkZXItPmdldEFwcCgpLAogICAgICAgICAgICAnaW5uZXJfYXBwJyA9PiAkY2FzaExvYW5PcmRlci0+Z2V0SW5uZXJBcHAoKSwKICAgICAgICBdOwogICAgICAgICRyaXNrVXNlckluZm8gPSBCaXpTZnlXZWJDbGllbnQ6OnJpc2tVc2VySW5mbyhbCiAgICAgICAgICAgICduYW1lJyA9PiAkY2FzaExvYW5PcmRlci0+Z2V0TmFtZSgpLAogICAgICAgICAgICAnbW9iaWxlJyA9PiAkY2FzaExvYW5PcmRlci0+Z2V0TW9iaWxlKCksCiAgICAgICAgICAgICdpZF9jYXJkX251bWJlcicgPT4gJGNhc2hMb2FuT3JkZXItPmdldElkQ2FyZE51bWJlcigpLAogICAgICAgIF0sICRoZWFkZXIpOwoKICAgICAgICBpZiAoJHJpc2tVc2VySW5mbyA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgTG9nOjpiYW5rQ2FzaCgkY2FzaExvYW5PcmRlci0+Z2V0T3JkZXJOdW1iZXIoKSAuICfpo47mjqfmn6Xor6LnlKjmiLfln7rmnKzkv6Hmga/lpLHotKUnKTsKICAgICAgICAgICAgJHRoaXMtPnNldE1lc3NhZ2UoJ+mjjuaOp+afpeivoueUqOaIt+WfuuacrOS/oeaBr+Wksei0pScpLT5zZXRVcGRhdGVkVGltZShUaW1lOjpub3coKSktPnVwZGF0ZSgpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAkcGFyYW1zID0gbmV3IENyZWRpdEFwcGx5UGFyYW1zKCk7CiAgICAgICAgJHBhcmFtcy0+c2V0Q3VzdG9tZXJJbmZvKCRmdW5kQ3JlZGl0LT5nZXRDdXN0b21lckluZm8oJGNhc2hMb2FuT3JkZXIpKQogICAgICAgICAgICAtPnNldFBlcnNvbmFsQmFzZUluZm8oJGZ1bmRDcmVkaXQtPmdldFBlcnNvbmFsQmFzZUluZm8oJGNhc2hMb2FuT3JkZXIsICRyaXNrVXNlckluZm8pKQogICAgICAgICAgICAtPnNldEJhbmtDYXJkSW5mbygkZnVuZENyZWRpdC0+Z2V0QmFua0NhcmRJbmZvKCRjYXNoTG9hbk9yZGVyKSkKICAgICAgICAgICAgLT5zZXRDZXJ0aWZpY2F0ZUluZm9MaXN0KCRmdW5kQ3JlZGl0LT5nZXRDZXJ0aWZpY2F0ZUluZm9MaXN0KCRjYXNoTG9hbk9yZGVyKSkKICAgICAgICAgICAgLT5zZXRUZWxDb250YWN0U3RhdGlvbkluZm9MaXN0KCRmdW5kQ3JlZGl0LT5nZXRUZWxDb250YWN0U3RhdGlvbkluZm9MaXN0KCRjYXNoTG9hbk9yZGVyLCAkcmlza1VzZXJJbmZvKSkKICAgICAgICAgICAgLT5zZXRDdXN0b21lUmVsYXRpb25JbmZvTGlzdCgkZnVuZENyZWRpdC0+Z2V0Q3VzdG9tZVJlbGF0aW9uSW5mb0xpc3QoJGNhc2hMb2FuT3JkZXIsICRyaXNrVXNlckluZm8pKQogICAgICAgICAgICAtPnNldEFwcGx5SW5mbygkZnVuZENyZWRpdC0+Z2V0QXBwbHlJbmZvKCRjYXNoTG9hbk9yZGVyKSkKICAgICAgICAgICAgLT5zZXRGaWxlSWRzKEJhbmtDYXNoVXBsb2FkRmlsZTo6Z2V0RmlsZXMoJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkpKTsKCiAgICAgICAgJHJlcXVlc3RbJ21ldGhvZCddID0gJ0NyZWRpdEFwcGx5JzsKICAgICAgICAkcmVxdWVzdFsncGFyYW1zJ10gPSAkcGFyYW1zLT50b0FycmF5KCk7CgogICAgICAgICRyZXN1bHQgPSBCaXpTZnlXZWJDbGllbnQ6OmJhbmtGdW5kU2VuZERhdGEoJHJlcXVlc3QsICR0aGlzLT5nZXRGdW5kU291cmNlKCkpOwogICAgICAgIGlmICghJHJlc3VsdCB8fCBlbXB0eSgkcmVzdWx0Wydjb2RlJ10pKSB7CiAgICAgICAgICAgICRmdW5kQ3JlZGl0LT5zZXRNZXNzYWdlKCfmjojkv6HlrqHmoLjlvILluLgnKS0+dXBkYXRlKCk7CiAgICAgICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgKICAgICAgICAgICAgICAgICRjYXNoTG9hbk9yZGVyLAogICAgICAgICAgICAgICAgc2VsZjo6U1RBVFVTX0NSRURJVF9BUFBMWV9GQUlMRUQsCiAgICAgICAgICAgICAgICAn5o6I5L+h6K+35rGC5byC5bi4JywKICAgICAgICAgICAgICAgIHRydWUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoCiAgICAgICAgICAgIGlzc2V0KCRyZXN1bHRbJ2RhdGEnXVsnc3RhdHVzJ10pCiAgICAgICAgICAgICYmCiAgICAgICAgICAgICRyZXN1bHRbJ2RhdGEnXVsnc3RhdHVzJ10gPT0gdHJ1ZQogICAgICAgICAgICAmJgogICAgICAgICAgICAhZW1wdHkoJHJlc3VsdFsnZGF0YSddWydzZXJpYWxObyddKQogICAgICAgICkgewogICAgICAgICAgICAkZnVuZENyZWRpdC0+c2V0U2VyaWFsTm8oJHJlc3VsdFsnZGF0YSddWydzZXJpYWxObyddKS0+dXBkYXRlKCk7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWSwgJ+aOiOS/oeeUs+ivt+i/lOWbnuaIkOWKnycpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgkY2FzaExvYW5PcmRlciwgc2VsZjo6U1RBVFVTX0NSRURJVF9BUFBMWV9GQUlMRUQsIGpzb25fZW5jb2RlKCRyZXN1bHQsIDMyMCkpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcXVlcnlDcmVkaXRSZXN1bHQoKQogICAgewogICAgICAgIC8qKgogICAgICAgICAqIEB2YXIgJGNhc2hMb2FuT3JkZXIgQ2FzaExvYW5PcmRlcgogICAgICAgICAqLwogICAgICAgICRjYXNoTG9hbk9yZGVyID0gQ2FzaExvYW5PcmRlcjo6ZmluZFJvd0J5Q29sdW1ucyhbJ29yZGVyX251bWJlcicgPT4gJHRoaXMtPmdldE9yZGVyTnVtYmVyKCldKTsKICAgICAgICBpZiAoZW1wdHkoJGNhc2hMb2FuT3JkZXIpKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1FVRVJZX0NSRURJVF9BUFBMWV9GQUlMRUQsICdDYXNoTG9hbk9yZGVy5LiN5a2Y5ZyoJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgICRxdWVyeUNyZWRpdFJlc3VsdFBhcmFtcyA9IG5ldyBRdWVyeUNyZWRpdFJlc3VsdFBhcmFtcygpOwogICAgICAgICRxdWVyeUNyZWRpdFJlc3VsdFBhcmFtcy0+c2V0SWRUeXBlKDEpCiAgICAgICAgICAgIC0+c2V0SWRObygkY2FzaExvYW5PcmRlci0+Z2V0SWRDYXJkTnVtYmVyKCkpCiAgICAgICAgICAgIC0+c2V0U2VyaWFsTm8oQmFua0Nhc2hDcmVkaXQ6OmdldENyZWRpdEJ5Q2FzaExvYW5PcmRlcigkY2FzaExvYW5PcmRlciktPmdldFNlcmlhbE5vKCkpOwoKICAgICAgICAkcmVxdWVzdFsnbWV0aG9kJ10gPSAnUXVlcnlDcmVkaXRSZXN1bHQnOwogICAgICAgICRyZXF1ZXN0WydwYXJhbXMnXSA9ICRxdWVyeUNyZWRpdFJlc3VsdFBhcmFtcy0+dG9BcnJheSgpOwogICAgICAgICRyZXN1bHQgPSBCaXpTZnlXZWJDbGllbnQ6OmJhbmtGdW5kU2VuZERhdGEoJHJlcXVlc3QsICR0aGlzLT5nZXRGdW5kU291cmNlKCkpOwogICAgICAgIGlmICghaXNzZXQoJHJlc3VsdFsnY29kZSddKSB8fCAkcmVzdWx0Wydjb2RlJ10gIT0gJzAwMDAwMCcpIHsKICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfUVVFUllfQ1JFRElUX0FQUExZX0ZBSUxFRCwgaXNfc3RyaW5nKCRyZXN1bHQpID8/IGpzb25fZW5jb2RlKCRyZXN1bHQsIDMyMCkpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgICRkYXRhID0gJHJlc3VsdFsnZGF0YSddOwoKICAgICAgICAkZnVuZENyZWRpdCA9IEJhbmtDYXNoQ3JlZGl0OjpnZXRDcmVkaXRCeUNhc2hMb2FuT3JkZXIoJGNhc2hMb2FuT3JkZXIpOwogICAgICAgICRmdW5kQ3JlZGl0CiAgICAgICAgICAgIC0+c2V0QXBwcm92YWxTdGF0dXMoJGRhdGFbJ2FwcHJvdmFsU3RhdHVzJ10gPz8gMCkKICAgICAgICAgICAgLT5zZXRNZXNzYWdlKCRkYXRhWydyZWFzb24nXSA/PyAnJykKICAgICAgICAgICAgLT5zZXRDcmVkaXRUb3RhbEFtb3VudCgkZGF0YVsnY3JlZGl0VG90YWxBbW91bnQnXSA/PyAwKQogICAgICAgICAgICAtPnNldFN0YXJ0RGF0ZSgkZGF0YVsnc3RhcnREYXRlJ10gPz8gVGltZTo6bm93KCkpCiAgICAgICAgICAgIC0+c2V0U3RhcnREYXRlKCRkYXRhWydlbmREYXRlJ10gPz8gVGltZTo6bm93KCkpCiAgICAgICAgICAgIC0+c2V0Q3JlZGl0QXBwbHlJZCgkZGF0YVsnY3JlZGl0QXBwbHlJZCddID8/ICcnKQogICAgICAgICAgICAtPnNldEV4cGRhdCgkZGF0YVsnZXhwZGF0J10gPz8gVGltZTo6bm93KCkpCiAgICAgICAgICAgIC0+c2V0QXZhaWxBbW91bnQoJGRhdGFbJ2F2YWlsQW1vdW50J10gPz8gMCkKICAgICAgICAgICAgLT5zZXRWYWxpZFN0YXR1cygkZGF0YVsndmFsaWRTdGF0dXMnXSA/PyAwKQogICAgICAgICAgICAtPnNldFVwZGF0ZWRUaW1lKFRpbWU6Om5vdygpKQogICAgICAgICAgICAtPnVwZGF0ZSgpOwoKICAgICAgICBpZiAoaW5fYXJyYXkoJGZ1bmRDcmVkaXQtPmdldEFwcHJvdmFsU3RhdHVzKCksIFsyXSkpIHsKICAgICAgICAgICAgaWYgKCRmdW5kQ3JlZGl0LT5nZXRWYWxpZFN0YXR1cygpICE9IDEpIHsKICAgICAgICAgICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgkY2FzaExvYW5PcmRlciwgc2VsZjo6U1RBVFVTX0NSRURJVF9BUFBMWV9GQUlMRUQsICfmjojkv6HmiJDlip/lj6/nlKjnirbmgIHkuLrml6DmlYgnKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfVE9fTEVORF9BUFBMWSwgJ+aOiOS/oeafpeivoui/lOWbnuaIkOWKnycpOwogICAgICAgICAgICAkdGhpcy0+bGVuZEFwcGx5KCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGluX2FycmF5KCRmdW5kQ3JlZGl0LT5nZXRBcHByb3ZhbFN0YXR1cygpLCBbMywgNV0pKSB7CiAgICAgICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgkY2FzaExvYW5PcmRlciwgc2VsZjo6U1RBVFVTX0ZBSUxFRCwgJyDmjojkv6HnlLPor7fmn6Xor6Lov5Tlm57mjojkv6Hmi5Lnu506JyAuICRmdW5kQ3JlZGl0LT5nZXRNZXNzYWdlKCksIHRydWUpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKCR0aGlzLT5nZXRTdGF0dXMoKSwgJ+aOiOS/oeafpeivoui/lOWbnu+8mueUs+ivt+eKtuaAgS0nIC4gc2VsZjo6JGFwcHJvdmFsU3RhdHVzTWFwWyRmdW5kQ3JlZGl0LT5nZXRBcHByb3ZhbFN0YXR1cygpXSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBsZW5kQXBwbHkoKQogICAgewogICAgICAgIC8qKgogICAgICAgICAqIEB2YXIgJGNhc2hMb2FuT3JkZXIgQ2FzaExvYW5PcmRlcgogICAgICAgICAqLwogICAgICAgICRjYXNoTG9hbk9yZGVyID0gQ2FzaExvYW5PcmRlcjo6ZmluZFJvd0J5Q29sdW1ucyhbJ29yZGVyX251bWJlcicgPT4gJHRoaXMtPmdldE9yZGVyTnVtYmVyKCldKTsKICAgICAgICBpZiAoZW1wdHkoJGNhc2hMb2FuT3JkZXIpKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX0xFTkRfQVBQTFlfRkFJTEVELCAnQ2FzaExvYW5PcmRlcuS4jeWtmOWcqCcpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAkZnVuZENyZWRpdCA9IEJhbmtDYXNoQ3JlZGl0OjpnZXRDcmVkaXRCeUNhc2hMb2FuT3JkZXIoJGNhc2hMb2FuT3JkZXIpOwoKICAgICAgICAkY29udHJhY3QgPSBDb250cmFjdDo6ZmluZChbJ2NvbnRyYWN0X2lkJyA9PiAkY2FzaExvYW5PcmRlci0+Z2V0Q29udHJhY3ROdW1iZXIoKV0pOwogICAgICAgIGlmICghJGNvbnRyYWN0KSB7CiAgICAgICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgkY2FzaExvYW5PcmRlciwgc2VsZjo6U1RBVFVTX0xFTkRfQVBQTFlfRkFJTEVELCAn5ZCI5ZCM5p+l6K+i5Li656m6Jyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgICRwYXJhbXMgPSBuZXcgTGVuZEFwcGx5UGFyYW1zKCk7CiAgICAgICAgJHBhcmFtcwogICAgICAgICAgICAtPnNldElkVHlwZSgxKQogICAgICAgICAgICAtPnNldElkTm8oJGNhc2hMb2FuT3JkZXItPmdldElkQ2FyZE51bWJlcigpKQogICAgICAgICAgICAtPnNldE5hbWUoJGNhc2hMb2FuT3JkZXItPmdldE5hbWUoKSkKICAgICAgICAgICAgLT5zZXRSZXBheW1lbnRNZXRob2QoJ0RFQlgnKSAvL+etiemineacrOaBrwogICAgICAgICAgICAtPnNldExvYW5BbW91bnQoQ2FzaExvYW5PcmRlcjo6Zm9ybWF0QW1vdW50KCRjYXNoTG9hbk9yZGVyLT5nZXRBbW91bnQoKSkpCiAgICAgICAgICAgIC0+c2V0TG9hblBlcmlvZCgkY2FzaExvYW5PcmRlci0+Z2V0UGVyaW9kKCkpCiAgICAgICAgICAgIC0+c2V0U2VyaWFsTm8oJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkpCiAgICAgICAgICAgIC0+c2V0TG9hblVuaXQoJ00nKQogICAgICAgICAgICAtPnNldFBheUxvYW5BY2NvdW50SWQoJGNhc2hMb2FuT3JkZXItPmdldFJlY2VpdmVBY2NvdW50KCkpCiAgICAgICAgICAgIC0+c2V0Q3JlZGl0QXBwbHlJZCgkZnVuZENyZWRpdC0+Z2V0Q3JlZGl0QXBwbHlJZCgpKQogICAgICAgICAgICAtPnNldFNlcnZpY2VSYXRlKDApCiAgICAgICAgICAgIC0+c2V0TG9hblB1cnBvc2Uoc2VsZjo6Z2V0TG9hblB1cnBvc2UoJGNvbnRyYWN0LT5nZXRQdXJwb3NlKCkpKQogICAgICAgICAgICAtPnNldExvYW5JbnRlcmVzdFJhdGUoJGNhc2hMb2FuT3JkZXItPmdldFBlcmlvZFJhdGUoKSAqIDEwMCkKICAgICAgICAgICAgLT5zZXRMb2FuQ29udHJhY3RObygkY29udHJhY3QtPmdldENvbnRyYWN0SWQoKSkKICAgICAgICAgICAgLT5zZXRGaWxlSWRzKEJhbmtDYXNoVXBsb2FkRmlsZTo6Z2V0TGVuZEFwcGx5RmlsZXMoJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkpKTsKCiAgICAgICAgJHJlcXVlc3QgPSBbCiAgICAgICAgICAgICdtZXRob2QnID0+ICdsZW5kQXBwbHknLAogICAgICAgICAgICAncGFyYW1zJyA9PiAkcGFyYW1zLT50b0FycmF5KCksCiAgICAgICAgXTsKCiAgICAgICAgJHJlc3VsdCA9IEJpelNmeVdlYkNsaWVudDo6YmFua0Z1bmRTZW5kRGF0YSgkcmVxdWVzdCwgJHRoaXMtPmdldEZ1bmRTb3VyY2UoKSk7CgogICAgICAgIGlmIChpc3NldCgkcmVzdWx0WydkYXRhJ11bJ29yZGVyTm8nXSkpIHsKICAgICAgICAgICAgJHRoaXMtPnNldE91dE9yZGVyTnVtYmVyKCRyZXN1bHRbJ2RhdGEnXVsnb3JkZXJObyddKQogICAgICAgICAgICAgICAgLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1RPX0xFTkRfQVBQTFlfUVVFUlksICfmlK/nlKjnlLPor7fov5Tlm57miJDlip8nKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19MRU5EX0FQUExZX0ZBSUxFRCwgJ+aUr+eUqOeUs+ivt+i/lOWbnuW8guW4uO+8micgLiBpc19zdHJpbmcoJHJlc3VsdCkgPz8ganNvbl9lbmNvZGUoJHJlc3VsdCwgMzIwKSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBsZW5kQXBwbHlRdWVyeSgpCiAgICB7CiAgICAgICAgLyoqCiAgICAgICAgICogQHZhciAkY2FzaExvYW5PcmRlciBDYXNoTG9hbk9yZGVyCiAgICAgICAgICovCiAgICAgICAgJGNhc2hMb2FuT3JkZXIgPSBDYXNoTG9hbk9yZGVyOjpmaW5kUm93QnlDb2x1bW5zKFsnb3JkZXJfbnVtYmVyJyA9PiAkdGhpcy0+Z2V0T3JkZXJOdW1iZXIoKV0pOwogICAgICAgIGlmIChlbXB0eSgkY2FzaExvYW5PcmRlcikpIHsKICAgICAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfUVVFUllfQ1JFRElUX0FQUExZX0ZBSUxFRCwgJ0Nhc2hMb2FuT3JkZXLkuI3lrZjlnKgnKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAkbGVuZEFwcGx5UXVlcnlQYXJhbXMgPSBuZXcgTGVuZEFwcGx5UXVlcnlQYXJhbXMoKTsKICAgICAgICAkbGVuZEFwcGx5UXVlcnlQYXJhbXMtPnNldFNlcmlhbE5vKCR0aGlzLT5nZXRPcmRlck51bWJlcigpKTsKICAgICAgICAkcmVxdWVzdCA9IFsKICAgICAgICAgICAgJ21ldGhvZCcgPT4gJ2xlbmRBcHBseVF1ZXJ5JywKICAgICAgICAgICAgJ3BhcmFtcycgPT4gWydhcHBseUluZm9MaXN0JyA9PiBbJGxlbmRBcHBseVF1ZXJ5UGFyYW1zLT50b0FycmF5KCldXSwKICAgICAgICBdOwoKICAgICAgICAkcmVzdWx0ID0gQml6U2Z5V2ViQ2xpZW50OjpiYW5rRnVuZFNlbmREYXRhKCRyZXF1ZXN0LCAkdGhpcy0+Z2V0RnVuZFNvdXJjZSgpKTsKICAgICAgICBpZiAoIWlzc2V0KCRyZXN1bHRbJ2NvZGUnXSkgfHwgJHJlc3VsdFsnY29kZSddICE9ICcwMDAwMDAnIHx8ICFpc3NldCgkcmVzdWx0WydkYXRhJ11bJ2FwcGx5SW5mb0xpc3QnXSkpIHsKICAgICAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9RVUVSWV9GQUlMRUQsIGlzX3N0cmluZygkcmVzdWx0KSA/PyBqc29uX2VuY29kZSgkcmVzdWx0LCAzMjApKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAkYXBwbHlJbmZvTGlzdCA9IGN1cnJlbnQoJHJlc3VsdFsnZGF0YSddWydhcHBseUluZm9MaXN0J10pOwogICAgICAgICRhcHBseVN0YXR1cyA9ICRhcHBseUluZm9MaXN0WydhcHBseVN0YXR1cyddID8/ICcnOwogICAgICAgIGlmIChpbl9hcnJheSgkYXBwbHlTdGF0dXMsIFsnMTAwNyddKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0TG9hbk5vKCRhcHBseUluZm9MaXN0Wydsb2FuTm8nXSk7CiAgICAgICAgICAgICR0aGlzLT5zZXRGdW5kaW5nVGltZSghZW1wdHkoJGFwcGx5SW5mb0xpc3RbJ2xvYW5wYXl0aW1lJ10pID8gZGF0ZSgnWS1tLWQgSDppOnMnLCBzdHJ0b3RpbWUoJGFwcGx5SW5mb0xpc3RbJ2xvYW5wYXl0aW1lJ10pKSA6IFRpbWU6Om5vdygpKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZW1pdFN1Y2Nlc3MoCiAgICAgICAgICAgICAgICAkY2FzaExvYW5PcmRlciwKICAgICAgICAgICAgICAgIHNlbGY6OlNUQVRVU19UT19QQVlfR0FURVdBWSwKICAgICAgICAgICAgICAgICfmlK/nlKjmn6Xor6Lov5Tlm57vvJonIC4gKHNlbGY6OiRhcHBseVN0YXR1c01hcFskYXBwbHlTdGF0dXNdID8/ICcnKSAuICctLScgLiAoJGFwcGx5SW5mb0xpc3RbJ3JlYXNvbiddID8/ICcnKQogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgaWYgKGluX2FycmF5KCRhcHBseVN0YXR1cywgWycxMDA4J10pKSB7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+cmVtaXRGYWlsZWQoCiAgICAgICAgICAgICAgICAkY2FzaExvYW5PcmRlciwKICAgICAgICAgICAgICAgIHNlbGY6OlNUQVRVU19MRU5EX0FQUExZX1FVRVJZX0ZBSUxFRCwKICAgICAgICAgICAgICAgICfmlK/nlKjmn6Xor6Lov5Tlm57vvJonIC4gKHNlbGY6OiRhcHBseVN0YXR1c01hcFskYXBwbHlTdGF0dXNdID8/ICcnKSAuICctLScgLiAoJGFwcGx5SW5mb0xpc3RbJ3JlYXNvbiddID8/ICcnKQogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICR0aGlzLT5zZXRTdGF0dXMoCiAgICAgICAgICAgIHNlbGY6OlNUQVRVU19UT19MRU5EX0FQUExZX1FVRVJZLAogICAgICAgICAgICAn5pSv55So5p+l6K+i6L+U5Zue77yaJyAuIChzZWxmOjokYXBwbHlTdGF0dXNNYXBbJGFwcGx5U3RhdHVzXSA/PyAnJykgLiAnLS0nIC4gKCRhcHBseUluZm9MaXN0WydyZWFzb24nXSA/PyAnJykKICAgICAgICApOwogICAgfQoKICAgIC8v5qOA5p+l6K6i5Y2V54q25oCBCiAgICBwdWJsaWMgZnVuY3Rpb24gY2hlY2tIZWxwTG9hblN0YXR1cyhDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCAkZGF0YSkKICAgIHsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICAvL+eUn+aIkOi/mOasvuiuoeWIkgogICAgcHVibGljIGZ1bmN0aW9uIHJlcGF5UGxhbigkcGxhbkRhdGEpCiAgICB7CiAgICAgICAgcmV0dXJuIChuZXcgXFNob3VmdXlvdUJpekNvbW1vblxNb2RlbHNcQ2FzaEJpbGxcQ2FzaEJpbGwoKSktPmF2ZXJhZ2VDYXBpdGFsUGx1c0ludGVyZXN0KCRwbGFuRGF0YSk7CiAgICB9CgogICAgLy/ojrflj5borqLljZXlpITnkIbnirbmgIEKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRDYXNoTG9hbk9yZGVyU3RhdHVzKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIsICRpc05lZWQgPSB0cnVlKQogICAgewogICAgICAgICRzdGF0dXMgPSBDYXNoTG9hbk9yZGVyOjpERUFMX1NUQVRVU19OT05FOwoKICAgICAgICAvL+i/m+S7tuWuoeaguOaIkOWKn+aIluiAheW8gOaIt+i/m+ihjOS4rSDljrvlvIDmiLcKICAgICAgICBpZiAoaW5fYXJyYXkoJHRoaXMtPmdldFN0YXR1cygpLCBzZWxmOjokYXVkaXRTdGF0dXMpKSB7CiAgICAgICAgICAgICRzdGF0dXMgPSBDYXNoTG9hbk9yZGVyOjpERUFMX1NUQVRVU19BVURJVElORzsKICAgICAgICB9IGVsc2VpZiAoaW5fYXJyYXkoJHRoaXMtPmdldFN0YXR1cygpLCBzZWxmOjokZnVuZGluZ1N0YXR1cykpIHsKICAgICAgICAgICAgJHN0YXR1cyA9IENhc2hMb2FuT3JkZXI6OkRFQUxfU1RBVFVTX0ZVTkRJTkc7CiAgICAgICAgfSBlbHNlaWYgKGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JHN1Y2Nlc3NTdGF0dXMpKSB7CiAgICAgICAgICAgICRzdGF0dXMgPSBDYXNoTG9hbk9yZGVyOjpERUFMX1NUQVRVU19SRVBBWUlORzsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkc3RhdHVzOwogICAgfQoKICAgIC8v6I635Y+W5LiL5LiA5q2l55qEVVJMCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0TmV4dFVybChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgICR1cmwgPSAnJzsKICAgICAgICBpZiAoaW5fYXJyYXkoJHRoaXMtPmdldFN0YXR1cygpLCBzZWxmOjokYXVkaXRTdGF0dXMpKSB7ICAvL+i/m+S7tuWuoeaguOS4rQogICAgICAgICAgICAkdXJsID0gJGNhc2hMb2FuT3JkZXItPmdldEF1ZGl0VXJsKCk7CiAgICAgICAgfSBlbHNlaWYgKGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JGZ1bmRpbmdTdGF0dXMpKSB7ICAgIC8v5pS+5qy+5LitCiAgICAgICAgICAgICR1cmwgPSBDYXNoTG9hbk9yZGVyOjpnZXRGdW5kaW5nVXJsKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdXJsOwogICAgfQoKICAgIC8v6I635Y+W5ZCI5ZCM55+t5qCH6K+G5YiX6KGoCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q29udHJhY3RTaG9ydE5hbWVzKCkKICAgIHsKICAgICAgICByZXR1cm4gJyc7CiAgICB9CgogICAgLy/mlK/ku5jkuJrliqHmlbDmja4KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRQYXlCaXpEYXRhKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIpCiAgICB7CgogICAgfQoKICAgIC8v5piv5ZCm5piv5pS+5qy+5Lit54q25oCBCiAgICBwdWJsaWMgZnVuY3Rpb24gaXNSZW1pdHRpbmcoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcikKICAgIHsKICAgICAgICByZXR1cm4gaW5fYXJyYXkoJHRoaXMtPmdldFN0YXR1cygpLCBzZWxmOjokc3VjY2Vzc1N0YXR1cyk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGlzU3VjY2Vzc1N0YXR1cygpCiAgICB7CiAgICAgICAgcmV0dXJuIGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JHN1Y2Nlc3NTdGF0dXMpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpc0Z1bmRpbmdTdGF0dXMoKQogICAgewogICAgICAgIHJldHVybiBpbl9hcnJheSgkdGhpcy0+Z2V0U3RhdHVzKCksIHNlbGY6OiRmdW5kaW5nU3RhdHVzKTsKICAgIH0KCiAgICAvL+ajgOafpeaYr+WQpuWPr+S7peW8guW4uOe7k+a4hQogICAgcHVibGljIGZ1bmN0aW9uIGNoZWNrQWJub3JtYWxTZXR0bGVtZW50KENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIsICRCYW5rQ2FzaExvYW5PcmRlck9iaikKICAgIHsKCiAgICB9CgogICAgLy/lvIDlp4vlvILluLjnu5PmuIUKICAgIHB1YmxpYyBmdW5jdGlvbiBiZWdpbkFibm9ybWFsU2V0dGxlbWVudChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCAkQmFua0Nhc2hMb2FuT3JkZXJPYmopCiAgICB7CgogICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHN5bmNQbGFuKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIpCiAgICB7CiAgICAgICAgQmFua0Nhc2hDb250cmFjdDo6Y3JlYXRlQ29udHJhY3QoJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkpOwoKICAgICAgICAkcXVlcnlSZXBheVBsYW5QYXJhbXMgPSBuZXcgUXVlcnlSZXBheVBsYW5QYXJhbXMoKTsKCiAgICAgICAgJHF1ZXJ5UmVwYXlQbGFuUGFyYW1zLT5zZXRMb2FuTm8oJHRoaXMtPmdldExvYW5ObygpKTsKCiAgICAgICAgJHJlcXVlc3QgPSBbCiAgICAgICAgICAgICdtZXRob2QnID0+ICdRdWVyeVJlcGF5UGxhbicsCiAgICAgICAgICAgICdwYXJhbXMnID0+IFsnYXBwbHlMaXN0JyA9PiBbJHF1ZXJ5UmVwYXlQbGFuUGFyYW1zLT50b0FycmF5KCldXSwKICAgICAgICBdOwoKCiAgICAgICAgJHJlc3VsdCA9IEJpelNmeVdlYkNsaWVudDo6YmFua0Z1bmRTZW5kRGF0YSgkcmVxdWVzdCwgJHRoaXMtPmdldEZ1bmRTb3VyY2UoKSk7CiAgICAgICAgaWYgKCEkcmVzdWx0IHx8IGVtcHR5KCRyZXN1bHRbJ2NvZGUnXSkpIHsKICAgICAgICAgICAgTG9nOjpiYW5rQ2FzaCgkY2FzaExvYW5PcmRlci0+Z2V0T3JkZXJOdW1iZXIoKSAuICflkIzmraXov5jmrL7orqHliJLov5Tlm57nirbmgIFmYWxzZScpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoJHJlc3VsdFsnY29kZSddICE9ICcwMDAwMDAnKSB7CiAgICAgICAgICAgIExvZzo6YmFua0Nhc2goJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkgLiAn5ZCM5q2l6L+Y5qy+6K6h5YiS6L+U5Zue77yaJyAuIGpzb25fZW5jb2RlKCRyZXN1bHQpKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVtcHR5KCRyZXN1bHRbJ2RhdGEnXVsncmVzdWx0TGlzdCddKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBmb3JlYWNoICgkcmVzdWx0WydkYXRhJ11bJ3Jlc3VsdExpc3QnXSBhcyAkbGlzdCkgewogICAgICAgICAgICAkbG9hbk5vID0gJGxpc3RbJ2xvYW5ObyddID8/ICcnOwogICAgICAgICAgICBpZiAoJGxvYW5ObyAhPSAkdGhpcy0+Z2V0TG9hbk5vKCkpIHsKICAgICAgICAgICAgICAgIExvZzo6YmFua0Nhc2goJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkgLiAn5ZCM5q2l6L+Y5qy+6K6h5YiS6L+U5Zue5YCf5o2u5Y2V5Y+35LiN5Yy56YWN77yaJyAuICRsb2FuTm8pOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEJhbmtDYXNoUmVwYXlQbGFuczo6Y3JlYXRlUGxhbnMoJHRoaXMsICRsaXN0ID8/IFtdKTsKICAgICAgICAgICAgaWYgKCFlbXB0eSgkbGlzdFsncmVwYXlQbGFuTGlzdCddKSkgewogICAgICAgICAgICAgICAgLy9pZiAoJHRoaXMtPmdldEJpekNoYW5uZWwoKSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgQ2FzaEJpbGw6OnN5bmNSZXBheVNjaGVkdWxlTGlzdFNwKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpLCAkbGlzdFsncmVwYXlQbGFuTGlzdCddKTsKICAgICAgICAgICAgICAgIC8qfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyDkv6HotLfnvZHlhbPns7vnu5/or7fmsYJhcGkKICAgICAgICAgICAgICAgICAgICBCaXpTZnlXZWJDbGllbnQ6OnNlbmRDcmVkaXRBcGlSZXF1ZXN0KCdhZnRlci5iaWxsLnN5bmNDYXNoQmlsbCcsIFsKICAgICAgICAgICAgICAgICAgICAgICAgJ29yZGVyX251bWJlcicgPT4gJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCksCiAgICAgICAgICAgICAgICAgICAgICAgICdmdW5kX3NvdXJjZScgPT4gJGNhc2hMb2FuT3JkZXItPmdldEZ1bmRTb3VyY2UoKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ3BsYW4nID0+ICRsaXN0WydyZXBheVBsYW5MaXN0J10sCiAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICB9Ki8KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICB9CgoKICAgIHB1YmxpYyAgZnVuY3Rpb24gbGVuZENvbnRyYWN0UXVlcnkoKQogICAgewogICAgICAgICRwYXJhbXMgPSBuZXcgTGVuZENvbnRyYWN0UXVlcnlQYXJhbXMoKTsKICAgICAgICAkcGFyYW1zLT5zZXRPcmRlck5vKCR0aGlzLT5nZXRPdXRPcmRlck51bWJlcigpKTsKCiAgICAgICAgJHJlcXVlc3QgPSBbCiAgICAgICAgICAgICdtZXRob2QnID0+ICdMZW5kQ29udHJhY3RRdWVyeScsCiAgICAgICAgICAgICdwYXJhbXMnID0+ICRwYXJhbXMtPnRvQXJyYXkoKSwKICAgICAgICBdOwoKICAgICAgICByZXR1cm4gQml6U2Z5V2ViQ2xpZW50OjpiYW5rRnVuZFNlbmREYXRhKCRyZXF1ZXN0LCAkdGhpcy0+Z2V0RnVuZFNvdXJjZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVwYXltZW50KENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIsIENhc2hSZXBheW1lbnQgJGNhc2hSZXBheW1lbnQpCiAgICB7CiAgICAgICAgcmV0dXJuIEJhbmtDYXNoUmVwYXlQbGFuczo6cmVwYXltZW50KCRjYXNoTG9hbk9yZGVyLCAkY2FzaFJlcGF5bWVudCwgJHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gJG9yZGVyTnVtYmVyCiAgICAgKiBAcmV0dXJuIEJhbmtDYXNoTG9hbk9yZGVyCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0T3JkZXIoJG9yZGVyTnVtYmVyKQogICAgewogICAgICAgIHJldHVybiBzdGF0aWM6OmZpbmQoWydvcmRlcl9udW1iZXInID0+ICRvcmRlck51bWJlcl0pOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBwcmVSZXBheVRyaWFsKCkKICAgIHsKICAgICAgICAkcGFyYW1zID0gbmV3IFByZVJlcGF5VHJpYWxQYXJhbXMoKTsKCiAgICAgICAgJHBhcmFtcy0+c2V0T3JkZXJObygkdGhpcy0+Z2V0T3V0T3JkZXJOdW1iZXIoKSktPnNldEFkdmFuY2VGbGFnKDIpOwoKICAgICAgICAkcmVxdWVzdCA9IFsKICAgICAgICAgICAgJ21ldGhvZCcgPT4gJ1ByZVJlcGF5VHJpYWwnLAogICAgICAgICAgICAncGFyYW1zJyA9PiAkcGFyYW1zLT50b0FycmF5KCksCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIEJpelNmeVdlYkNsaWVudDo6YmFua0Z1bmRTZW5kRGF0YSgkcmVxdWVzdCwgJHRoaXMtPmdldEZ1bmRTb3VyY2UoKSk7CiAgICB9CgoKICAgIC8qKgogICAgICogQHBhcmFtICRsb2FuVXNhZ2UKICAgICAqIEByZXR1cm4gbWl4ZWR8c3RyaW5nCiAgICAgKi8KCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldExvYW5QdXJwb3NlKCRsb2FuVXNhZ2UpCiAgICB7CiAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICfkuKrkurrml6XluLjmtojotLknID0+ICc2NicsCiAgICAgICAgICAgICfmlZnogrInID0+ICc1JywKICAgICAgICAgICAgJ+ijheS/ricgPT4gJzEnLAogICAgICAgICAgICAn5Yy755aXJyA9PiAnNjQnLAogICAgICAgICAgICAn5peF5ri4JyA9PiAnNicsCiAgICAgICAgICAgICfmnLrnpagnID0+ICc2NScsCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuICRkYXRhWyRsb2FuVXNhZ2VdID8/ICc5OSc7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRMaXN0QnlTdGF0dXMoJHN0YXR1cyA9IFtdKQogICAgewogICAgICAgIHJldHVybiAobmV3IHN0YXRpYygpKQogICAgICAgICAgICAtPndoZXJlSW4oJ3N0YXR1cycsICRzdGF0dXMpCiAgICAgICAgICAgIC0+YW5kV2hlcmUoJ2NyZWF0ZWRfdGltZScsIGRhdGUoJ1ktbS1kIEg6aTpzJywgVGltZTo6dGltZSgpIC0gODY0MDAgKiA1KSwgJz4nKQogICAgICAgICAgICAtPmFuZFdoZXJlKCdiaXpfY2hhbm5lbCcsIDEpCiAgICAgICAgICAgIC0+b3JkZXJCeSgpCiAgICAgICAgICAgIC0+bGltaXQoMTAwMCkKICAgICAgICAgICAgLT5nZXRBbGwoKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gY2FuY2VsRnVuZE9yZGVyKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIpCiAgICB7CiAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGNhbmNlbEZ1bmRPcmRlcigpIG1ldGhvZC4KICAgIH0KfQ==</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">Y2xhc3MgQmFua0Nhc2hMb2FuT3JkZXIgZXh0ZW5kcyBcU2hvdWZ1eW91XFRhYmxlXEJhbmtDYXNoTG9hbk9yZGVyIGltcGxlbWVudHMgRnVuZExvYW5PcmRlckludGVyZmFjZQp7CiAgICB1c2UgT3JtTW9kZWw7CiAgICB1c2UgTUFjdGl2ZVJlY29yZDsKCiAgICBjb25zdCBTVEFUVVNfTk9STUFMID0gMDsgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIneWni+eKtuaAgQogICAgY29uc3QgU1RBVFVTX1RPX1VQTE9BRF9mSUxFID0gMTA7ICAgICAgICAgICAgICAvLyDlrqHmoLjpgJrov4flvoXkuIrkvKDmlofku7YKICAgIGNvbnN0IFNUQVRVU19VUExPQURfZklMRV9GQUlMRUQgPSAtMTA7ICAgICAgICAgLy8g5LiK5Lyg5paH5Lu25aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1RPX0NSRURJVF9BUFBMWSA9IDIwOyAgICAgICAgICAgICAvLyDkuIrkvKDmlofku7bmiJDlip/lvoXnlLPor7fmjojkv6EKICAgIGNvbnN0IFNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVEID0gLTIwOyAgICAgICAgLy8g55Sz6K+35o6I5L+h5aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWSA9IDMwOyAgICAgICAvLyDmjojkv6HnlLPor7fmiJDlip/lvoXmn6Xor6Lnu5PmnpwKICAgIGNvbnN0IFNUQVRVU19RVUVSWV9DUkVESVRfQVBQTFlfRkFJTEVEID0gLTMwOyAgLy8g5o6I5L+h57uT5p6c5p+l6K+i5aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1RPX0xFTkRfQVBQTFkgPSA0MDsgICAgICAgICAgICAgICAgLy8g5o6I5L+h5oiQ5Yqf5b6F5pSv55So55Sz6K+3CiAgICBjb25zdCBTVEFUVVNfTEVORF9BUFBMWV9GQUlMRUQgPSAtNDA7ICAgICAgICAgICAvLyDmlK/nlKjnlLPor7flpLHotKUKCiAgICBjb25zdCBTVEFUVVNfVE9fTEVORF9BUFBMWV9RVUVSWSA9IDUwOyAgICAgICAgICAgLy8g5pSv55So55Sz6K+35oiQ5Yqf5b6F5p+l6K+i57uT5p6cCiAgICBjb25zdCBTVEFUVVNfTEVORF9BUFBMWV9RVUVSWV9GQUlMRUQgPSAtNTA7ICAgICAgICAgICAgIC8vIOaUr+eUqOe7k+aenOafpeivouWksei0pQoKCiAgICBjb25zdCBTVEFUVVNfVE9fUEFZX0dBVEVXQVkgPSA4ODsgICAgICAgICAgICAgICAvLyDmlK/nlKjmiJDlip/lvoXor7fmsYLmlK/ku5jns7vnu58KICAgIGNvbnN0IFNUQVRVU19QQVlfR0FURVdBWV9GQUlMRUQgPSAtODg7ICAgICAgLy8g6K+35rGC5pSv5LuY57O757uf5aSx6LSlCgogICAgY29uc3QgU1RBVFVTX1NVQ0NFU1MgPSA5OTsgICAgICAvLyDorqLljZXmiJDlip8KICAgIGNvbnN0IFNUQVRVU19GQUlMRUQgPSAtOTk7ICAgICAgLy8g6K6i5Y2V5aSx6LSlCgogICAgY29uc3QgU1BfQ0FTSF9DT0RFID0gJ3NwX2Nhc2gnOwogICAgY29uc3QgRlVORF9TT1VSQ0UgPSBbc2VsZjo6U1BfQ0FTSF9DT0RFXTsKCiAgICBwcml2YXRlIHN0YXRpYyAkYXVkaXRTdGF0dXMgPSBbc2VsZjo6U1RBVFVTX05PUk1BTCwgIHNlbGY6OlNUQVRVU19UT19VUExPQURfZklMRSwgc2VsZjo6U1RBVFVTX1RPX0NSRURJVF9BUFBMWSwgc2VsZjo6U1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWV07CiAgICBwcml2YXRlIHN0YXRpYyAkZnVuZGluZ1N0YXR1cyA9IFtzZWxmOjpTVEFUVVNfVE9fTEVORF9BUFBMWSwgc2VsZjo6U1RBVFVTX1RPX0xFTkRfQVBQTFlfUVVFUlksIHNlbGY6OlNUQVRVU19UT19QQVlfR0FURVdBWV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lrqHmoLjnirbmgIEKICAgIHByaXZhdGUgc3RhdGljICRzdWNjZXNzU3RhdHVzID0gW3NlbGY6OlNUQVRVU19TVUNDRVNTXTsKCgogICAgcHJpdmF0ZSBzdGF0aWMgJHN0YXR1c0Rlc2NyaXB0aW9uID0gWwogICAgICAgIHNlbGY6OlNUQVRVU19OT1JNQUwgPT4gJ+WIneWni+eKtuaAgScsCiAgICAgICAgc2VsZjo6U1RBVFVTX1RPX1VQTE9BRF9mSUxFID0+ICflrqHmoLjpgJrov4flvoXkuIrkvKDmlofku7YnLCAvLyDmn6Xor6LnlKjmiLflvIDmiLfnirbmgIHlpLHotKUKICAgICAgICBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVEID0+ICfkuIrkvKDmlofku7blpLHotKUnLC8vIOS4iuS8oOW5s+WPsOazqOWGjOacjeWKoeWNj+iuruWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19DUkVESVRfQVBQTFkgPT4gJ+S4iuS8oOaWh+S7tuaIkOWKn+W+heeUs+ivt+aOiOS/oScsICAvLyDkuIrkvKDlubPlj7Dms6jlhozmnI3liqHljY/orq7miJDlip/lvoXlrZjnrqHlvIDmiLcKICAgICAgICBzZWxmOjpTVEFUVVNfQ1JFRElUX0FQUExZX0ZBSUxFRCA9PiAn55Sz6K+35o6I5L+h5aSx6LSlJywgLy8g6I635Y+W5a2Y566h5byA5oi36ZO+5o6l5aSx6LSlCiAgICAgICAgc2VsZjo6U1RBVFVTX1RPX1FVRVJZX0NSRURJVF9BUFBMWSA9PiAn5o6I5L+h55Sz6K+35oiQ5Yqf5b6F5p+l6K+i57uT5p6cJywgLy8g6I635Y+W5a2Y566h5byA5oi36ZO+5o6l5oiQ5Yqf5b6F5ZCM5q2l5byA5oi357uT5p6cCiAgICAgICAgc2VsZjo6U1RBVFVTX1FVRVJZX0NSRURJVF9BUFBMWV9GQUlMRUQgPT4gJ+aOiOS/oee7k+aenOafpeivouWksei0pScsIC8vIOW8gOaIt+e7k+aenOWQjOatpei/lOWbnuWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19MRU5EX0FQUExZID0+ICfmjojkv6HmiJDlip/lvoXmlK/nlKjnlLPor7cnLCAvLyDlvIDmiLfnu5PmnpzlkIzmraXov5Tlm57miJDlip/lvoXmn6Xor6LlvIDmiLfnu5PmnpwKICAgICAgICBzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9GQUlMRUQgPT4gJ+aUr+eUqOeUs+ivt+Wksei0pScsIC8vIOWtmOeuoeW8gOaIt+Wksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19MRU5EX0FQUExZX1FVRVJZID0+ICfmlK/nlKjnlLPor7fmiJDlip/lvoXmn6Xor6Lnu5PmnpwnLCAvLyDlrZjnrqHlvIDmiLflt7LmiJDlip/lvoXmj5DkuqTorqLljZXoh7Ppppbph5EKICAgICAgICBzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9RVUVSWV9GQUlMRUQgPT4gJ+aUr+eUqOe7k+aenOafpeivouWksei0pScsIC8vIOaPkOS6pOiuouWNleiHs+mmlumHkeWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19UT19QQVlfR0FURVdBWSA9PiAn5pSv55So5oiQ5Yqf5b6F6K+35rGC5pSv5LuY57O757ufJywgLy8g5o+Q5Lqk6K6i5Y2V6Iez6aaW6YeR5oiQ5Yqf5b6F6K6i5Y2V5a6h5qC457uT5p6c5p+l6K+iCiAgICAgICAgc2VsZjo6U1RBVFVTX1BBWV9HQVRFV0FZX0ZBSUxFRCA9PiAn6K+35rGC5pSv5LuY57O757uf5aSx6LSlJywgLy8g6K6i5Y2V5a6h5qC457uT5p6c5p+l6K+i5aSx6LSlCiAgICAgICAgc2VsZjo6U1RBVFVTX1NVQ0NFU1MgPT4gJ+iuouWNleaIkOWKnycsIC8vIOaPkOS6pOiuouWNleWuoeaguOWksei0pQogICAgICAgIHNlbGY6OlNUQVRVU19GQUlMRUQgPT4gJ+iuouWNleWksei0pScsIC8vIOiuouWNleWuoeaguOaIkOWKn+W+heS4iuS8oOaWh+S7tgogICAgXTsKCiAgICBwcml2YXRlIHN0YXRpYyAkYXBwcm92YWxTdGF0dXNNYXAgPSBbCiAgICAgICAgMCA9PiAn5pyq5a6h5qC4JywKICAgICAgICAxID0+ICflrqHmoLjkuK0nLAogICAgICAgIDIgPT4gJ+WuoeaguOaIkOWKnycsCiAgICAgICAgMyA9PiAn5a6h5qC45ouS57udJywKICAgICAgICA0ID0+ICfkurrlt6XlrqHmoLgnLAogICAgICAgIDUgPT4gJ+WuoeaguOWksei0pScsCiAgICAgICAgNiA9PiAn5b6F5aSE55CGJywKICAgICAgICA3ID0+ICflpITnkIbkuK0nLAogICAgXTsKCiAgICBwcml2YXRlIHN0YXRpYyAkYXBwbHlTdGF0dXNNYXAgPSBbCiAgICAgICAgMTAwMCA9PiAn5b6F5bmz5Y+w5aSE55CGJywKICAgICAgICAxMDAxID0+ICflvoXotYTmlrnlpITnkIYnLAogICAgICAgIDEwMDIgPT4gJ+eUs+ivt+aLkue7nScsCiAgICAgICAgMTAwMyA9PiAn5a6h5qC45aSE55CG5LitJywKICAgICAgICAxMDA0ID0+ICflrqHmoLjpgJrov4cnLAogICAgICAgIDEwMDUgPT4gJ+WuoeaguOaLkue7nScsCiAgICAgICAgMTAwNiA9PiAn5b6F5pS+5qy+JywKICAgICAgICAxMDA3ID0+ICflt7LmlL7mrL4nLAogICAgICAgIDEwMDggPT4gJ+aUvuasvuWksei0pScsCiAgICAgICAgMTAwOSA9PiAn6L+Y5qy+5LitJywKICAgICAgICAxMDEwID0+ICflt7Lnu5PmuIUnLAogICAgICAgIDEwMTEgPT4gJ+i1hOmHkeaWueWGs+etluS4rQknLAogICAgICAgIDEwMTIgPT4gJ+W+heetvue6picsCiAgICAgICAgMTAxMyA9PiAn562+57qm5aSx6LSlJywKICAgIF07CgogICAgcHJpdmF0ZSBzdGF0aWMgJGNvbnRyYWN0TWFwID0gWwogICAgICAgICd4eWYxNDEnID0+ICcxMTAxJywKICAgICAgICAneHlmMTQzJyA9PiAnMTEwNCcsCiAgICAgICAgJ3h5ZjE0MicgPT4gJzEyMDYnLAogICAgXTsKCiAgICBwdWJsaWMgZnVuY3Rpb24gc2V0U3RhdHVzKCRzdGF0dXMsICRtZXNzYWdlID0gJycpCiAgICB7CiAgICAgICAgJHRoaXMtPnNldE1lc3NhZ2UoJG1lc3NhZ2UpOwogICAgICAgICR0aGlzLT5zZXRVcGRhdGVkVGltZShUaW1lOjpub3coKSk7CiAgICAgICAgaWYgKCR0aGlzLT5nZXRTdGF0dXMoKSAhPSAkc3RhdHVzKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXNIaXN0b3J5KHRyaW0oJHRoaXMtPmdldFN0YXR1c0hpc3RvcnkoKSAuICcsJyAuICR0aGlzLT5nZXRTdGF0dXMoKSwgJywnKSk7CiAgICAgICAgfQogICAgICAgICR0aGlzLT5zZXRTdGF0dXNEZXNjKHNlbGY6OiRzdGF0dXNEZXNjcmlwdGlvblskc3RhdHVzXSk7CiAgICAgICAgcGFyZW50OjpzZXRTdGF0dXMoJHN0YXR1cyk7CiAgICAgICAgJHRoaXMtPnVwZGF0ZSgpOwogICAgICAgIHJldHVybiAkdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIOWIm+W7uuiuouWNlQogICAgICogQHBhcmFtIENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIKICAgICAqIEByZXR1cm4gJHRoaXMKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIG9yZGVyQ3JlYXRlKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIpCiAgICB7CiAgICAgICAgcGFyZW50OjpzZXRTdGF0dXMoc2VsZjo6U1RBVFVTX05PUk1BTCk7CiAgICAgICAgJHRoaXMKICAgICAgICAgICAgLT5zZXRGdW5kU291cmNlKCRjYXNoTG9hbk9yZGVyLT5nZXRGdW5kU291cmNlKCkpCiAgICAgICAgICAgIC0+c2V0Qml6Q2hhbm5lbCgxKQogICAgICAgICAgICAtPnNldE9yZGVyTnVtYmVyKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKQogICAgICAgICAgICAtPnNldE91dE9yZGVyTnVtYmVyKCcnKQogICAgICAgICAgICAtPnNldFN0YXR1c0hpc3RvcnkoJycpCiAgICAgICAgICAgIC0+c2V0TG9hbk5vKCcnKQogICAgICAgICAgICAtPnNldFN0YXR1c0Rlc2Moc2VsZjo6JHN0YXR1c0Rlc2NyaXB0aW9uW3NlbGY6OlNUQVRVU19OT1JNQUxdKQogICAgICAgICAgICAtPnNldE1lc3NhZ2UoJycpCiAgICAgICAgICAgIC0+c2V0Qml6RGF0YSgnJykKICAgICAgICAgICAgLT5zZXRGdW5kaW5nVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT5zZXRVcGRhdGVkVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT5zZXRDcmVhdGVkVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT5pbnNlcnQoKTsKCiAgICAgICAgcmV0dXJuICR0aGlzOwogICAgfQoKICAgIC8qKgogICAgICog5ZCR6LWE5pa56L+b5Lu25YmN77yM5a6h5qC45o6l5Y+jCiAgICAgKiBAcGFyYW0gQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcgogICAgICogQHJldHVybiBtaXhlZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gb3JkZXJBdWRpdChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICog5ZCR6LWE5pa56L+b5Lu25o6l5Y+jCiAgICAgKiBAcGFyYW0gQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcgogICAgICogQHJldHVybiBtaXhlZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gb3JkZXJSZW1pdChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgICRiYW5rQ2FzaExvYW5PcmRlciA9IHNlbGY6OmdldE9yZGVyKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKTsKICAgICAgICAkYmFua0Nhc2hMb2FuT3JkZXItPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfVE9fVVBMT0FEX2ZJTEUpOwogICAgICAgIHJldHVybiAkYmFua0Nhc2hMb2FuT3JkZXItPnVwbG9hZEZpbGUoJGNhc2hMb2FuT3JkZXIpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiByZW1pdEZhaWxlZChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCAkc3RhdHVzLCAkcmVzdWx0UmVhc29uLCAkaXNBZGRVc2VyR3JleUxpc3QgPSBmYWxzZSkKICAgIHsKICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKCRzdGF0dXMsICRyZXN1bHRSZWFzb24pOwogICAgICAgICRjYXNoTG9hbk9yZGVyLT5yZW1pdEZhaWxlZCgkcmVzdWx0UmVhc29uKTsKICAgICAgICBDYXNoUG9vbFVzZXJHcmV5TGlzdDo6c2V0RGVmYXVsdExpbWl0VGltZSgzMCk7CiAgICAgICAgJGlzQWRkVXNlckdyZXlMaXN0ICYmIENhc2hQb29sVXNlckdyZXlMaXN0OjpjcmVhdGVCeU9yZGVyKCRjYXNoTG9hbk9yZGVyLCAkcmVzdWx0UmVhc29uKTsgLy/ngbDlkI3ljZXliqDlhaUKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVtaXRTdWNjZXNzKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIsICRzdGF0dXMsICRyZXN1bHRSZWFzb24pCiAgICB7CiAgICAgICAgJHRoaXMtPnNldFN0YXR1cygkc3RhdHVzLCAkcmVzdWx0UmVhc29uKTsKICAgICAgICAkcGF5UmVzdWx0ID0gJGNhc2hMb2FuT3JkZXItPnJlcXVlc3RQYXlHYXRld2F5Q3JlYXRlUGF5T3JkZXIoKTsKICAgICAgICBpZiAoJHBheVJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfUEFZX0dBVEVXQVlfRkFJTEVELCAn6K+35rGC5pSv5LuY57O757uf55Sf5oiQ5pSv5LuY6K6w5b2V5aSx6LSlJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJHBheVJlc3VsdFsncGF5X3RpbWUnXSA9ICR0aGlzLT5nZXRGdW5kaW5nVGltZSgpOwogICAgICAgICRjYXNoTG9hbk9yZGVyLT5yZW1pdFN1Y2Nlc3MoJHBheVJlc3VsdCk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1NVQ0NFU1MsICfor7fmsYLmlK/ku5jns7vnu5/nlJ/miJDmlK/ku5jorrDlvZXmiJDlip8nKTsKICAgIH0KCiAgICAvKioKICAgICAqIOS4iuS8oOaWh+S7tgogICAgICogQHBhcmFtIENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHVwbG9hZEZpbGUoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcikKICAgIHsKICAgICAgICAkb2NySW5mbyA9IEJpelNmeVdlYkNsaWVudDo6Z2V0T2NyVmlldyhbCiAgICAgICAgICAgICdpZF9jYXJkX251bWJlcicgPT4gJGNhc2hMb2FuT3JkZXItPmdldElkQ2FyZE51bWJlcigpLAogICAgICAgICAgICAnbW9iaWxlJyA9PiAkY2FzaExvYW5PcmRlci0+Z2V0TW9iaWxlKCksCiAgICAgICAgICAgICdhcHAnID0+ICRjYXNoTG9hbk9yZGVyLT5nZXRBcHAoKSwKICAgICAgICBdKTsKICAgICAgICBpZiAoCiAgICAgICAgICAgICRvY3JJbmZvID09IGZhbHNlCiAgICAgICAgICAgIHx8CiAgICAgICAgICAgIGVtcHR5KCRvY3JJbmZvWydpZF9jYXJkX2Zyb250J10pCiAgICAgICAgICAgIHx8CiAgICAgICAgICAgIGVtcHR5KCRvY3JJbmZvWydpZF9jYXJkX2JhY2snXSkKICAgICAgICApIHsKICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAnb2Ny5LiN5a2Y5Zyo5oiW57y65bCR5p+Q6aG55paH5Lu2JywgdHJ1ZSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgICRmaWxlcyA9IFsKICAgICAgICAgICAgJzEwMDEnID0+ICRvY3JJbmZvWydpZF9jYXJkX2Zyb250J10gPz8gJycsLy/ouqvku73or4HmraPpnaIKICAgICAgICAgICAgJzEwMDInID0+ICRvY3JJbmZvWydpZF9jYXJkX2JhY2snXSA/PyAnJywvL+i6q+S7veivgeWPjemdogogICAgICAgIF07CgogICAgICAgICRmZGRDb250cmFjdHMgPSBGZGRDb250cmFjdDo6ZmluZEFsbChbJ21hc3Rlcl9jb250cmFjdF9pZCcgPT4gJGNhc2hMb2FuT3JkZXItPmdldENvbnRyYWN0TnVtYmVyKCldKTsKICAgICAgICBpZiAoZW1wdHkoJGZkZENvbnRyYWN0cykpIHsKICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAn5p+l6K+i5ZCI5ZCM5aSx6LSl5oiW5Li656m6Jyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZvcmVhY2ggKCRmZGRDb250cmFjdHMgYXMgJGNvbnRyYWN0KSB7CiAgICAgICAgICAgIGlmIChlbXB0eSgkY29udHJhY3QtPmdldERvd25sb2FkVXJsKCkpKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19VUExPQURfZklMRV9GQUlMRUQsICflkIjlkIzkuIvovb3lnLDlnYDkuLrnqbonKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHBkZkZpbGUgPSAnL3h5ZnN0YXRpYy8nIC4gJGNvbnRyYWN0LT5nZXREb3dubG9hZFVybCgpOwogICAgICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRwZGZGaWxlKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAn5ZCI5ZCM5paH5Lu25LiN5a2Y5ZyoJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpc3NldChzZWxmOjokY29udHJhY3RNYXBbJGNvbnRyYWN0LT5nZXRTaG9ydE5hbWUoKV0pKSB7CiAgICAgICAgICAgICAgICAkZmlsZXNbc2VsZjo6JGNvbnRyYWN0TWFwWyRjb250cmFjdC0+Z2V0U2hvcnROYW1lKCldXSA9ICRwZGZGaWxlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBUT0RPIOW+heWIoOmZpAogICAgICAgICAgICBpZiAoJGNvbnRyYWN0LT5nZXRTaG9ydE5hbWUoKSA9PSAneHlmMTQzJykgewogICAgICAgICAgICAgICAgJGZpbGVzWycxMTA3J10gPSAkcGRmRmlsZTsKICAgICAgICAgICAgfQoKICAgICAgICB9CgoKICAgICAgICBmb3JlYWNoICgkZmlsZXMgYXMgJGZpbGVUeXBlID0+ICRmaWxlVXJsKSB7CiAgICAgICAgICAgICRzbEZpbGUgPSBCYW5rQ2FzaFVwbG9hZEZpbGU6OmdldE9uZUZpbGUoJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCksICRmaWxlVHlwZSk7CiAgICAgICAgICAgIGlmICgkc2xGaWxlKSB7CiAgICAgICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCLlkIjlkIzmlofku7blt7Lnu4/lrZjlnKg6eyRzbEZpbGUtPmdldEZpbGVOYW1lKCl9ICwg6K6i5Y2V5Y+377yaeyRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpfSIpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIExvZzo6YmFua0Nhc2goJ+W8gOWni+S4iuS8oO+8micgLiAkZmlsZVVybCk7CgogICAgICAgICAgICAkc2xGaWxlID0gQmFua0Nhc2hVcGxvYWRGaWxlOjpjcmVhdGVGaWxlKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpLCAkZmlsZVR5cGUsICRmaWxlVXJsKTsKICAgICAgICAgICAgJHJlc3VsdCA9ICR0aGlzLT51cGxvYWRGaWxlQXBpKCRzbEZpbGUpOwogICAgICAgICAgICBpZiAoISRyZXN1bHQgfHwgZW1wdHkoJHJlc3VsdFsnY29kZSddKSkgewogICAgICAgICAgICAgICAgJHNsRmlsZS0+c2V0U3RhdHVzKCdmYWlsZWQnKS0+c2V0TWVzc2FnZSgn6L+U5ZueZmFsc2UnKS0+c2V0VXBkYXRlZFRpbWUoVGltZTo6bm93KCkpLT51cGRhdGUoKTsKICAgICAgICAgICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgkY2FzaExvYW5PcmRlciwgc2VsZjo6U1RBVFVTX1VQTE9BRF9mSUxFX0ZBSUxFRCwgJ+S4iuS8oOaWh+S7tuivt+axguWksei0pScpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHJlc3VsdFsnY29kZSddICE9ICcwMDAwMDAnKSB7CiAgICAgICAgICAgICAgICAkc2xGaWxlLT5zZXRTdGF0dXMoJ2ZhaWxlZCcpLT5zZXRNZXNzYWdlKCfov5Tlm546JyAuICRyZXN1bHRbJ21lc3NhZ2UnXSktPnNldFVwZGF0ZWRUaW1lKFRpbWU6Om5vdygpKS0+dXBkYXRlKCk7CiAgICAgICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCLkuIrkvKDmlofku7bov5Tlm57lpLHotKU6eyRzbEZpbGUtPmdldEZpbGVOYW1lKCl9ICwg6K6i5Y2V5Y+377yaeyRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpfSIpOwogICAgICAgICAgICAgICAgJHRoaXMtPnJlbWl0RmFpbGVkKCRjYXNoTG9hbk9yZGVyLCBzZWxmOjpTVEFUVVNfVVBMT0FEX2ZJTEVfRkFJTEVELCAkcmVzdWx0WydtZXNzYWdlJ10gPz8gJycpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkc2xGaWxlCiAgICAgICAgICAgICAgICAtPnNldFN0YXR1cygnc3VjY2VzcycpCiAgICAgICAgICAgICAgICAtPnNldE1lc3NhZ2UoJ+S4iuS8oOaIkOWKnycpCiAgICAgICAgICAgICAgICAtPnNldEZpbGVJZCgkcmVzdWx0WydkYXRhJ11bJ2ZpbGVJZCddID8/ICcnKQogICAgICAgICAgICAgICAgLT5zZXRVcmwoJHJlc3VsdFsnZGF0YSddWyd1cmwnXSA/PyAnJykKICAgICAgICAgICAgICAgIC0+c2V0VXBkYXRlZFRpbWUoVGltZTo6bm93KCkpCiAgICAgICAgICAgICAgICAtPnVwZGF0ZSgpOwoKICAgICAgICB9CiAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfVE9fQ1JFRElUX0FQUExZLCAn5LiK5Lyg5paH5Lu25oiQ5YqfJyk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jcmVkaXRBcHBseSgpOwogICAgfQoKICAgIHByaXZhdGUgIGZ1bmN0aW9uIHVwbG9hZEZpbGVBcGkoQmFua0Nhc2hVcGxvYWRGaWxlICRmdW5kVXBsb2FkRmlsZSkKICAgIHsKICAgICAgICAkcGFyYW1zID0gbmV3IFVwbG9hZEZpbGVQYXJhbXMoKTsKICAgICAgICAkcGFyYW1zLT5zZXRGaWxlKCRmdW5kVXBsb2FkRmlsZS0+Z2V0RmlsZU5hbWUoKSk7CiAgICAgICAgJHBhcmFtcy0+c2V0RmlsZVR5cGUoJGZ1bmRVcGxvYWRGaWxlLT5nZXRGaWxlVHlwZSgpKTsKICAgICAgICAkcGFyYW1zLT5zZXRGaWxlTmFtZShTZXF1ZW5jZTo6Z2VuUmVxdWVzdFNuKCkgLiBzdWJzdHIoJGZ1bmRVcGxvYWRGaWxlLT5nZXRGaWxlTmFtZSgpLCBzdHJycG9zKCRmdW5kVXBsb2FkRmlsZS0+Z2V0RmlsZU5hbWUoKSwgJy4nKSkpOwoKICAgICAgICAkcmVxdWVzdFsnbWV0aG9kJ10gPSAnVXBsb2FkRmlsZSc7CiAgICAgICAgJHJlcXVlc3RbJ3BhcmFtcyddID0gJHBhcmFtcy0+dG9BcnJheSgpOwoKICAgICAgICByZXR1cm4gQml6U2Z5V2ViQ2xpZW50OjpiYW5rRnVuZFNlbmREYXRhKCRyZXF1ZXN0LCAkdGhpcy0+Z2V0RnVuZFNvdXJjZSgpKTsKCiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGNyZWRpdEFwcGx5KCkKICAgIHsKICAgICAgICAvKioKICAgICAgICAgKiBAdmFyICRjYXNoTG9hbk9yZGVyIENhc2hMb2FuT3JkZXIKICAgICAgICAgKi8KICAgICAgICAkY2FzaExvYW5PcmRlciA9IENhc2hMb2FuT3JkZXI6OmZpbmRSb3dCeUNvbHVtbnMoWydvcmRlcl9udW1iZXInID0+ICR0aGlzLT5nZXRPcmRlck51bWJlcigpXSk7CiAgICAgICAgaWYgKGVtcHR5KCRjYXNoTG9hbk9yZGVyKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVELCAnQ2FzaExvYW5PcmRlcuS4jeWtmOWcqCcpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKCiAgICAgICAgJGZ1bmRDcmVkaXQgPSBCYW5rQ2FzaENyZWRpdDo6Z2V0Q3JlZGl0QnlDYXNoTG9hbk9yZGVyKCRjYXNoTG9hbk9yZGVyKTsKICAgICAgICAkcmlza1VzZXJJbmZvID0gQml6U2Z5V2ViQ2xpZW50OjpyaXNrVXNlckluZm8oWwogICAgICAgICAgICAnbmFtZScgPT4gJGNhc2hMb2FuT3JkZXItPmdldE5hbWUoKSwKICAgICAgICAgICAgJ21vYmlsZScgPT4gJGNhc2hMb2FuT3JkZXItPmdldE1vYmlsZSgpLAogICAgICAgICAgICAnaWRfY2FyZF9udW1iZXInID0+ICRjYXNoTG9hbk9yZGVyLT5nZXRJZENhcmROdW1iZXIoKSwKICAgICAgICBdKTsKCiAgICAgICAgaWYgKCRyaXNrVXNlckluZm8gPT09IGZhbHNlKSB7CiAgICAgICAgICAgIExvZzo6YmFua0Nhc2goJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkgLiAn6aOO5o6n5p+l6K+i55So5oi35Z+65pys5L+h5oGv5aSx6LSlJyk7CiAgICAgICAgICAgICR0aGlzLT5zZXRNZXNzYWdlKCfpo47mjqfmn6Xor6LnlKjmiLfln7rmnKzkv6Hmga/lpLHotKUnKS0+c2V0VXBkYXRlZFRpbWUoVGltZTo6bm93KCkpLT51cGRhdGUoKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgJHBhcmFtcyA9IG5ldyBDcmVkaXRBcHBseVBhcmFtcygpOwogICAgICAgICRwYXJhbXMtPnNldEN1c3RvbWVySW5mbygkZnVuZENyZWRpdC0+Z2V0Q3VzdG9tZXJJbmZvKCRjYXNoTG9hbk9yZGVyKSkKICAgICAgICAgICAgLT5zZXRQZXJzb25hbEJhc2VJbmZvKCRmdW5kQ3JlZGl0LT5nZXRQZXJzb25hbEJhc2VJbmZvKCRjYXNoTG9hbk9yZGVyLCAkcmlza1VzZXJJbmZvKSkKICAgICAgICAgICAgLT5zZXRCYW5rQ2FyZEluZm8oJGZ1bmRDcmVkaXQtPmdldEJhbmtDYXJkSW5mbygkY2FzaExvYW5PcmRlcikpCiAgICAgICAgICAgIC0+c2V0Q2VydGlmaWNhdGVJbmZvTGlzdCgkZnVuZENyZWRpdC0+Z2V0Q2VydGlmaWNhdGVJbmZvTGlzdCgkY2FzaExvYW5PcmRlcikpCiAgICAgICAgICAgIC0+c2V0VGVsQ29udGFjdFN0YXRpb25JbmZvTGlzdCgkZnVuZENyZWRpdC0+Z2V0VGVsQ29udGFjdFN0YXRpb25JbmZvTGlzdCgkY2FzaExvYW5PcmRlciwgJHJpc2tVc2VySW5mbykpCiAgICAgICAgICAgIC0+c2V0Q3VzdG9tZVJlbGF0aW9uSW5mb0xpc3QoJGZ1bmRDcmVkaXQtPmdldEN1c3RvbWVSZWxhdGlvbkluZm9MaXN0KCRjYXNoTG9hbk9yZGVyLCAkcmlza1VzZXJJbmZvKSkKICAgICAgICAgICAgLT5zZXRBcHBseUluZm8oJGZ1bmRDcmVkaXQtPmdldEFwcGx5SW5mbygkY2FzaExvYW5PcmRlcikpCiAgICAgICAgICAgIC0+c2V0RmlsZUlkcyhCYW5rQ2FzaFVwbG9hZEZpbGU6OmdldEZpbGVzKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKSk7CgogICAgICAgICRyZXF1ZXN0WydtZXRob2QnXSA9ICdDcmVkaXRBcHBseSc7CiAgICAgICAgJHJlcXVlc3RbJ3BhcmFtcyddID0gJHBhcmFtcy0+dG9BcnJheSgpOwoKICAgICAgICAkcmVzdWx0ID0gQml6U2Z5V2ViQ2xpZW50OjpiYW5rRnVuZFNlbmREYXRhKCRyZXF1ZXN0LCAkdGhpcy0+Z2V0RnVuZFNvdXJjZSgpKTsKICAgICAgICBpZiAoISRyZXN1bHQgfHwgZW1wdHkoJHJlc3VsdFsnY29kZSddKSkgewogICAgICAgICAgICAkZnVuZENyZWRpdC0+c2V0TWVzc2FnZSgn5o6I5L+h5a6h5qC45byC5bi4JyktPnVwZGF0ZSgpOwogICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoCiAgICAgICAgICAgICAgICAkY2FzaExvYW5PcmRlciwKICAgICAgICAgICAgICAgIHNlbGY6OlNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVELAogICAgICAgICAgICAgICAgJ+aOiOS/oeivt+axguW8guW4uCcsCiAgICAgICAgICAgICAgICB0cnVlCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKAogICAgICAgICAgICBpc3NldCgkcmVzdWx0WydkYXRhJ11bJ3N0YXR1cyddKQogICAgICAgICAgICAmJgogICAgICAgICAgICAkcmVzdWx0WydkYXRhJ11bJ3N0YXR1cyddID09IHRydWUKICAgICAgICAgICAgJiYKICAgICAgICAgICAgIWVtcHR5KCRyZXN1bHRbJ2RhdGEnXVsnc2VyaWFsTm8nXSkKICAgICAgICApIHsKICAgICAgICAgICAgJGZ1bmRDcmVkaXQtPnNldFNlcmlhbE5vKCRyZXN1bHRbJ2RhdGEnXVsnc2VyaWFsTm8nXSktPnVwZGF0ZSgpOwogICAgICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19UT19RVUVSWV9DUkVESVRfQVBQTFksICfmjojkv6HnlLPor7fov5Tlm57miJDlip8nKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVELCBqc29uX2VuY29kZSgkcmVzdWx0LCAzMjApKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHF1ZXJ5Q3JlZGl0UmVzdWx0KCkKICAgIHsKICAgICAgICAvKioKICAgICAgICAgKiBAdmFyICRjYXNoTG9hbk9yZGVyIENhc2hMb2FuT3JkZXIKICAgICAgICAgKi8KICAgICAgICAkY2FzaExvYW5PcmRlciA9IENhc2hMb2FuT3JkZXI6OmZpbmRSb3dCeUNvbHVtbnMoWydvcmRlcl9udW1iZXInID0+ICR0aGlzLT5nZXRPcmRlck51bWJlcigpXSk7CiAgICAgICAgaWYgKGVtcHR5KCRjYXNoTG9hbk9yZGVyKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19RVUVSWV9DUkVESVRfQVBQTFlfRkFJTEVELCAnQ2FzaExvYW5PcmRlcuS4jeWtmOWcqCcpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAkcXVlcnlDcmVkaXRSZXN1bHRQYXJhbXMgPSBuZXcgUXVlcnlDcmVkaXRSZXN1bHRQYXJhbXMoKTsKICAgICAgICAkcXVlcnlDcmVkaXRSZXN1bHRQYXJhbXMtPnNldElkVHlwZSgxKQogICAgICAgICAgICAtPnNldElkTm8oJGNhc2hMb2FuT3JkZXItPmdldElkQ2FyZE51bWJlcigpKQogICAgICAgICAgICAtPnNldFNlcmlhbE5vKEJhbmtDYXNoQ3JlZGl0OjpnZXRDcmVkaXRCeUNhc2hMb2FuT3JkZXIoJGNhc2hMb2FuT3JkZXIpLT5nZXRTZXJpYWxObygpKTsKCiAgICAgICAgJHJlcXVlc3RbJ21ldGhvZCddID0gJ1F1ZXJ5Q3JlZGl0UmVzdWx0JzsKICAgICAgICAkcmVxdWVzdFsncGFyYW1zJ10gPSAkcXVlcnlDcmVkaXRSZXN1bHRQYXJhbXMtPnRvQXJyYXkoKTsKICAgICAgICAkcmVzdWx0ID0gQml6U2Z5V2ViQ2xpZW50OjpiYW5rRnVuZFNlbmREYXRhKCRyZXF1ZXN0LCAkdGhpcy0+Z2V0RnVuZFNvdXJjZSgpKTsKICAgICAgICBpZiAoIWlzc2V0KCRyZXN1bHRbJ2NvZGUnXSkgfHwgJHJlc3VsdFsnY29kZSddICE9ICcwMDAwMDAnKSB7CiAgICAgICAgICAgICR0aGlzLT5yZW1pdEZhaWxlZCgkY2FzaExvYW5PcmRlciwgc2VsZjo6U1RBVFVTX1FVRVJZX0NSRURJVF9BUFBMWV9GQUlMRUQsIGlzX3N0cmluZygkcmVzdWx0KSA/PyBqc29uX2VuY29kZSgkcmVzdWx0LCAzMjApKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAkZGF0YSA9ICRyZXN1bHRbJ2RhdGEnXTsKCiAgICAgICAgJGZ1bmRDcmVkaXQgPSBCYW5rQ2FzaENyZWRpdDo6Z2V0Q3JlZGl0QnlDYXNoTG9hbk9yZGVyKCRjYXNoTG9hbk9yZGVyKTsKICAgICAgICAkZnVuZENyZWRpdAogICAgICAgICAgICAtPnNldEFwcHJvdmFsU3RhdHVzKCRkYXRhWydhcHByb3ZhbFN0YXR1cyddID8/IDApCiAgICAgICAgICAgIC0+c2V0TWVzc2FnZSgkZGF0YVsncmVhc29uJ10gPz8gJycpCiAgICAgICAgICAgIC0+c2V0Q3JlZGl0VG90YWxBbW91bnQoJGRhdGFbJ2NyZWRpdFRvdGFsQW1vdW50J10gPz8gMCkKICAgICAgICAgICAgLT5zZXRTdGFydERhdGUoJGRhdGFbJ3N0YXJ0RGF0ZSddID8/IFRpbWU6Om5vdygpKQogICAgICAgICAgICAtPnNldFN0YXJ0RGF0ZSgkZGF0YVsnZW5kRGF0ZSddID8/IFRpbWU6Om5vdygpKQogICAgICAgICAgICAtPnNldENyZWRpdEFwcGx5SWQoJGRhdGFbJ2NyZWRpdEFwcGx5SWQnXSA/PyAnJykKICAgICAgICAgICAgLT5zZXRFeHBkYXQoJGRhdGFbJ2V4cGRhdCddID8/IFRpbWU6Om5vdygpKQogICAgICAgICAgICAtPnNldEF2YWlsQW1vdW50KCRkYXRhWydhdmFpbEFtb3VudCddID8/IDApCiAgICAgICAgICAgIC0+c2V0VmFsaWRTdGF0dXMoJGRhdGFbJ3ZhbGlkU3RhdHVzJ10gPz8gMCkKICAgICAgICAgICAgLT5zZXRVcGRhdGVkVGltZShUaW1lOjpub3coKSkKICAgICAgICAgICAgLT51cGRhdGUoKTsKCiAgICAgICAgaWYgKGluX2FycmF5KCRmdW5kQ3JlZGl0LT5nZXRBcHByb3ZhbFN0YXR1cygpLCBbMl0pKSB7CiAgICAgICAgICAgIGlmICgkZnVuZENyZWRpdC0+Z2V0VmFsaWRTdGF0dXMoKSAhPSAxKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19DUkVESVRfQVBQTFlfRkFJTEVELCAn5o6I5L+h5oiQ5Yqf5Y+v55So54q25oCB5Li65peg5pWIJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1RPX0xFTkRfQVBQTFksICfmjojkv6Hmn6Xor6Lov5Tlm57miJDlip8nKTsKICAgICAgICAgICAgJHRoaXMtPmxlbmRBcHBseSgpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChpbl9hcnJheSgkZnVuZENyZWRpdC0+Z2V0QXBwcm92YWxTdGF0dXMoKSwgWzMsIDVdKSkgewogICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19GQUlMRUQsICcg5o6I5L+h55Sz6K+35p+l6K+i6L+U5Zue5o6I5L+h5ouS57udOicgLiAkZnVuZENyZWRpdC0+Z2V0TWVzc2FnZSgpLCB0cnVlKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgJHRoaXMtPnNldFN0YXR1cygkdGhpcy0+Z2V0U3RhdHVzKCksICfmjojkv6Hmn6Xor6Lov5Tlm57vvJrnlLPor7fnirbmgIEtJyAuIHNlbGY6OiRhcHByb3ZhbFN0YXR1c01hcFskZnVuZENyZWRpdC0+Z2V0QXBwcm92YWxTdGF0dXMoKV0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gbGVuZEFwcGx5KCkKICAgIHsKICAgICAgICAvKioKICAgICAgICAgKiBAdmFyICRjYXNoTG9hbk9yZGVyIENhc2hMb2FuT3JkZXIKICAgICAgICAgKi8KICAgICAgICAkY2FzaExvYW5PcmRlciA9IENhc2hMb2FuT3JkZXI6OmZpbmRSb3dCeUNvbHVtbnMoWydvcmRlcl9udW1iZXInID0+ICR0aGlzLT5nZXRPcmRlck51bWJlcigpXSk7CiAgICAgICAgaWYgKGVtcHR5KCRjYXNoTG9hbk9yZGVyKSkgewogICAgICAgICAgICAkdGhpcy0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19MRU5EX0FQUExZX0ZBSUxFRCwgJ0Nhc2hMb2FuT3JkZXLkuI3lrZjlnKgnKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgJGZ1bmRDcmVkaXQgPSBCYW5rQ2FzaENyZWRpdDo6Z2V0Q3JlZGl0QnlDYXNoTG9hbk9yZGVyKCRjYXNoTG9hbk9yZGVyKTsKCiAgICAgICAgJGNvbnRyYWN0ID0gQ29udHJhY3Q6OmZpbmQoWydjb250cmFjdF9pZCcgPT4gJGNhc2hMb2FuT3JkZXItPmdldENvbnRyYWN0TnVtYmVyKCldKTsKICAgICAgICBpZiAoISRjb250cmFjdCkgewogICAgICAgICAgICAkdGhpcy0+cmVtaXRGYWlsZWQoJGNhc2hMb2FuT3JkZXIsIHNlbGY6OlNUQVRVU19MRU5EX0FQUExZX0ZBSUxFRCwgJ+WQiOWQjOafpeivouS4uuepuicpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAkcGFyYW1zID0gbmV3IExlbmRBcHBseVBhcmFtcygpOwogICAgICAgICRwYXJhbXMKICAgICAgICAgICAgLT5zZXRJZFR5cGUoMSkKICAgICAgICAgICAgLT5zZXRJZE5vKCRjYXNoTG9hbk9yZGVyLT5nZXRJZENhcmROdW1iZXIoKSkKICAgICAgICAgICAgLT5zZXROYW1lKCRjYXNoTG9hbk9yZGVyLT5nZXROYW1lKCkpCiAgICAgICAgICAgIC0+c2V0UmVwYXltZW50TWV0aG9kKCdERUJYJykgLy/nrYnpop3mnKzmga8KICAgICAgICAgICAgLT5zZXRMb2FuQW1vdW50KENhc2hMb2FuT3JkZXI6OmZvcm1hdEFtb3VudCgkY2FzaExvYW5PcmRlci0+Z2V0QW1vdW50KCkpKQogICAgICAgICAgICAtPnNldExvYW5QZXJpb2QoJGNhc2hMb2FuT3JkZXItPmdldFBlcmlvZCgpKQogICAgICAgICAgICAtPnNldFNlcmlhbE5vKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKQogICAgICAgICAgICAtPnNldExvYW5Vbml0KCdNJykKICAgICAgICAgICAgLT5zZXRQYXlMb2FuQWNjb3VudElkKCRjYXNoTG9hbk9yZGVyLT5nZXRSZWNlaXZlQWNjb3VudCgpKQogICAgICAgICAgICAtPnNldENyZWRpdEFwcGx5SWQoJGZ1bmRDcmVkaXQtPmdldENyZWRpdEFwcGx5SWQoKSkKICAgICAgICAgICAgLT5zZXRTZXJ2aWNlUmF0ZSgwKQogICAgICAgICAgICAtPnNldExvYW5QdXJwb3NlKHNlbGY6OmdldExvYW5QdXJwb3NlKCRjb250cmFjdC0+Z2V0UHVycG9zZSgpKSkKICAgICAgICAgICAgLT5zZXRMb2FuSW50ZXJlc3RSYXRlKCRjYXNoTG9hbk9yZGVyLT5nZXRQZXJpb2RSYXRlKCkgKiAxMDApCiAgICAgICAgICAgIC0+c2V0TG9hbkNvbnRyYWN0Tm8oJGNvbnRyYWN0LT5nZXRDb250cmFjdElkKCkpCiAgICAgICAgICAgIC0+c2V0RmlsZUlkcyhCYW5rQ2FzaFVwbG9hZEZpbGU6OmdldExlbmRBcHBseUZpbGVzKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKSk7CgogICAgICAgICRyZXF1ZXN0ID0gWwogICAgICAgICAgICAnbWV0aG9kJyA9PiAnbGVuZEFwcGx5JywKICAgICAgICAgICAgJ3BhcmFtcycgPT4gJHBhcmFtcy0+dG9BcnJheSgpLAogICAgICAgIF07CgogICAgICAgICRyZXN1bHQgPSBCaXpTZnlXZWJDbGllbnQ6OmJhbmtGdW5kU2VuZERhdGEoJHJlcXVlc3QsICR0aGlzLT5nZXRGdW5kU291cmNlKCkpOwoKICAgICAgICBpZiAoaXNzZXQoJHJlc3VsdFsnZGF0YSddWydvcmRlck5vJ10pKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRPdXRPcmRlck51bWJlcigkcmVzdWx0WydkYXRhJ11bJ29yZGVyTm8nXSkKICAgICAgICAgICAgICAgIC0+c2V0U3RhdHVzKHNlbGY6OlNUQVRVU19UT19MRU5EX0FQUExZX1FVRVJZLCAn5pSv55So55Sz6K+36L+U5Zue5oiQ5YqfJyk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgJHRoaXMtPnNldFN0YXR1cyhzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9GQUlMRUQsICfmlK/nlKjnlLPor7fov5Tlm57lvILluLjvvJonIC4gaXNfc3RyaW5nKCRyZXN1bHQpID8/IGpzb25fZW5jb2RlKCRyZXN1bHQsIDMyMCkpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gbGVuZEFwcGx5UXVlcnkoKQogICAgewogICAgICAgIC8qKgogICAgICAgICAqIEB2YXIgJGNhc2hMb2FuT3JkZXIgQ2FzaExvYW5PcmRlcgogICAgICAgICAqLwogICAgICAgICRjYXNoTG9hbk9yZGVyID0gQ2FzaExvYW5PcmRlcjo6ZmluZFJvd0J5Q29sdW1ucyhbJ29yZGVyX251bWJlcicgPT4gJHRoaXMtPmdldE9yZGVyTnVtYmVyKCldKTsKICAgICAgICBpZiAoZW1wdHkoJGNhc2hMb2FuT3JkZXIpKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX1FVRVJZX0NSRURJVF9BUFBMWV9GQUlMRUQsICdDYXNoTG9hbk9yZGVy5LiN5a2Y5ZyoJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJGxlbmRBcHBseVF1ZXJ5UGFyYW1zID0gbmV3IExlbmRBcHBseVF1ZXJ5UGFyYW1zKCk7CiAgICAgICAgJGxlbmRBcHBseVF1ZXJ5UGFyYW1zLT5zZXRTZXJpYWxObygkdGhpcy0+Z2V0T3JkZXJOdW1iZXIoKSk7CiAgICAgICAgJHJlcXVlc3QgPSBbCiAgICAgICAgICAgICdtZXRob2QnID0+ICdsZW5kQXBwbHlRdWVyeScsCiAgICAgICAgICAgICdwYXJhbXMnID0+IFsnYXBwbHlJbmZvTGlzdCcgPT4gWyRsZW5kQXBwbHlRdWVyeVBhcmFtcy0+dG9BcnJheSgpXV0sCiAgICAgICAgXTsKCiAgICAgICAgJHJlc3VsdCA9IEJpelNmeVdlYkNsaWVudDo6YmFua0Z1bmRTZW5kRGF0YSgkcmVxdWVzdCwgJHRoaXMtPmdldEZ1bmRTb3VyY2UoKSk7CiAgICAgICAgaWYgKCFpc3NldCgkcmVzdWx0Wydjb2RlJ10pIHx8ICRyZXN1bHRbJ2NvZGUnXSAhPSAnMDAwMDAwJyB8fCAhaXNzZXQoJHJlc3VsdFsnZGF0YSddWydhcHBseUluZm9MaXN0J10pKSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRTdGF0dXMoc2VsZjo6U1RBVFVTX0xFTkRfQVBQTFlfUVVFUllfRkFJTEVELCBpc19zdHJpbmcoJHJlc3VsdCkgPz8ganNvbl9lbmNvZGUoJHJlc3VsdCwgMzIwKSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgJGFwcGx5SW5mb0xpc3QgPSBjdXJyZW50KCRyZXN1bHRbJ2RhdGEnXVsnYXBwbHlJbmZvTGlzdCddKTsKICAgICAgICAkYXBwbHlTdGF0dXMgPSAkYXBwbHlJbmZvTGlzdFsnYXBwbHlTdGF0dXMnXSA/PyAnJzsKICAgICAgICBpZiAoaW5fYXJyYXkoJGFwcGx5U3RhdHVzLCBbJzEwMDcnXSkpIHsKICAgICAgICAgICAgJHRoaXMtPnNldExvYW5ObygkYXBwbHlJbmZvTGlzdFsnbG9hbk5vJ10pOwogICAgICAgICAgICAkdGhpcy0+c2V0RnVuZGluZ1RpbWUoIWVtcHR5KCRhcHBseUluZm9MaXN0Wydsb2FucGF5dGltZSddKSA/IGRhdGUoJ1ktbS1kIEg6aTpzJywgc3RydG90aW1lKCRhcHBseUluZm9MaXN0Wydsb2FucGF5dGltZSddKSkgOiBUaW1lOjpub3coKSk7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+cmVtaXRTdWNjZXNzKAogICAgICAgICAgICAgICAgJGNhc2hMb2FuT3JkZXIsCiAgICAgICAgICAgICAgICBzZWxmOjpTVEFUVVNfVE9fUEFZX0dBVEVXQVksCiAgICAgICAgICAgICAgICAn5pSv55So5p+l6K+i6L+U5Zue77yaJyAuIChzZWxmOjokYXBwbHlTdGF0dXNNYXBbJGFwcGx5U3RhdHVzXSA/PyAnJykgLiAnLS0nIC4gKCRhcHBseUluZm9MaXN0WydyZWFzb24nXSA/PyAnJykKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIGlmIChpbl9hcnJheSgkYXBwbHlTdGF0dXMsIFsnMTAwOCddKSkgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPnJlbWl0RmFpbGVkKAogICAgICAgICAgICAgICAgJGNhc2hMb2FuT3JkZXIsCiAgICAgICAgICAgICAgICBzZWxmOjpTVEFUVVNfTEVORF9BUFBMWV9RVUVSWV9GQUlMRUQsCiAgICAgICAgICAgICAgICAn5pSv55So5p+l6K+i6L+U5Zue77yaJyAuIChzZWxmOjokYXBwbHlTdGF0dXNNYXBbJGFwcGx5U3RhdHVzXSA/PyAnJykgLiAnLS0nIC4gKCRhcHBseUluZm9MaXN0WydyZWFzb24nXSA/PyAnJykKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdGhpcy0+c2V0U3RhdHVzKAogICAgICAgICAgICBzZWxmOjpTVEFUVVNfVE9fTEVORF9BUFBMWV9RVUVSWSwKICAgICAgICAgICAgJ+aUr+eUqOafpeivoui/lOWbnu+8micgLiAoc2VsZjo6JGFwcGx5U3RhdHVzTWFwWyRhcHBseVN0YXR1c10gPz8gJycpIC4gJy0tJyAuICgkYXBwbHlJbmZvTGlzdFsncmVhc29uJ10gPz8gJycpCiAgICAgICAgKTsKICAgIH0KCiAgICAvL+ajgOafpeiuouWNleeKtuaAgQogICAgcHVibGljIGZ1bmN0aW9uIGNoZWNrSGVscExvYW5TdGF0dXMoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlciwgJGRhdGEpCiAgICB7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgLy/nlJ/miJDov5jmrL7orqHliJIKICAgIHB1YmxpYyBmdW5jdGlvbiByZXBheVBsYW4oJHBsYW5EYXRhKQogICAgewogICAgICAgIHJldHVybiAobmV3IFxTaG91ZnV5b3VCaXpDb21tb25cTW9kZWxzXENhc2hCaWxsXENhc2hCaWxsKCkpLT5hdmVyYWdlQ2FwaXRhbFBsdXNJbnRlcmVzdCgkcGxhbkRhdGEpOwogICAgfQoKICAgIC8v6I635Y+W6K6i5Y2V5aSE55CG54q25oCBCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q2FzaExvYW5PcmRlclN0YXR1cyhDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCAkaXNOZWVkID0gdHJ1ZSkKICAgIHsKICAgICAgICAkc3RhdHVzID0gQ2FzaExvYW5PcmRlcjo6REVBTF9TVEFUVVNfTk9ORTsKCiAgICAgICAgLy/ov5vku7blrqHmoLjmiJDlip/miJbogIXlvIDmiLfov5vooYzkuK0g5Y675byA5oi3CiAgICAgICAgaWYgKGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JGF1ZGl0U3RhdHVzKSkgewogICAgICAgICAgICAkc3RhdHVzID0gQ2FzaExvYW5PcmRlcjo6REVBTF9TVEFUVVNfQVVESVRJTkc7CiAgICAgICAgfSBlbHNlaWYgKGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JGZ1bmRpbmdTdGF0dXMpKSB7CiAgICAgICAgICAgICRzdGF0dXMgPSBDYXNoTG9hbk9yZGVyOjpERUFMX1NUQVRVU19GVU5ESU5HOwogICAgICAgIH0gZWxzZWlmIChpbl9hcnJheSgkdGhpcy0+Z2V0U3RhdHVzKCksIHNlbGY6OiRzdWNjZXNzU3RhdHVzKSkgewogICAgICAgICAgICAkc3RhdHVzID0gQ2FzaExvYW5PcmRlcjo6REVBTF9TVEFUVVNfUkVQQVlJTkc7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHN0YXR1czsKICAgIH0KCiAgICAvL+iOt+WPluS4i+S4gOatpeeahFVSTAogICAgcHVibGljIGZ1bmN0aW9uIGdldE5leHRVcmwoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlcikKICAgIHsKICAgICAgICAkdXJsID0gJyc7CiAgICAgICAgaWYgKGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JGF1ZGl0U3RhdHVzKSkgeyAgLy/ov5vku7blrqHmoLjkuK0KICAgICAgICAgICAgJHVybCA9ICRjYXNoTG9hbk9yZGVyLT5nZXRBdWRpdFVybCgpOwogICAgICAgIH0gZWxzZWlmIChpbl9hcnJheSgkdGhpcy0+Z2V0U3RhdHVzKCksIHNlbGY6OiRmdW5kaW5nU3RhdHVzKSkgeyAgICAvL+aUvuasvuS4rQogICAgICAgICAgICAkdXJsID0gQ2FzaExvYW5PcmRlcjo6Z2V0RnVuZGluZ1VybCgkY2FzaExvYW5PcmRlci0+Z2V0T3JkZXJOdW1iZXIoKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHVybDsKICAgIH0KCiAgICAvL+iOt+WPluWQiOWQjOefreagh+ivhuWIl+ihqAogICAgcHVibGljIGZ1bmN0aW9uIGdldENvbnRyYWN0U2hvcnROYW1lcygpCiAgICB7CiAgICAgICAgcmV0dXJuICcnOwogICAgfQoKICAgIC8v5pSv5LuY5Lia5Yqh5pWw5o2uCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0UGF5Qml6RGF0YShDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewoKICAgIH0KCiAgICAvL+aYr+WQpuaYr+aUvuasvuS4reeKtuaAgQogICAgcHVibGljIGZ1bmN0aW9uIGlzUmVtaXR0aW5nKENhc2hMb2FuT3JkZXIgJGNhc2hMb2FuT3JkZXIpCiAgICB7CiAgICAgICAgcmV0dXJuIGluX2FycmF5KCR0aGlzLT5nZXRTdGF0dXMoKSwgc2VsZjo6JHN1Y2Nlc3NTdGF0dXMpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpc1N1Y2Nlc3NTdGF0dXMoKQogICAgewogICAgICAgIHJldHVybiBpbl9hcnJheSgkdGhpcy0+Z2V0U3RhdHVzKCksIHNlbGY6OiRzdWNjZXNzU3RhdHVzKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gaXNGdW5kaW5nU3RhdHVzKCkKICAgIHsKICAgICAgICByZXR1cm4gaW5fYXJyYXkoJHRoaXMtPmdldFN0YXR1cygpLCBzZWxmOjokZnVuZGluZ1N0YXR1cyk7CiAgICB9CgogICAgLy/mo4Dmn6XmmK/lkKblj6/ku6XlvILluLjnu5PmuIUKICAgIHB1YmxpYyBmdW5jdGlvbiBjaGVja0Fibm9ybWFsU2V0dGxlbWVudChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCAkQmFua0Nhc2hMb2FuT3JkZXJPYmopCiAgICB7CgogICAgfQoKICAgIC8v5byA5aeL5byC5bi457uT5riFCiAgICBwdWJsaWMgZnVuY3Rpb24gYmVnaW5BYm5vcm1hbFNldHRsZW1lbnQoQ2FzaExvYW5PcmRlciAkY2FzaExvYW5PcmRlciwgJEJhbmtDYXNoTG9hbk9yZGVyT2JqKQogICAgewoKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSBDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBzeW5jUGxhbihDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgIEJhbmtDYXNoQ29udHJhY3Q6OmNyZWF0ZUNvbnRyYWN0KCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpKTsKCiAgICAgICAgJHF1ZXJ5UmVwYXlQbGFuUGFyYW1zID0gbmV3IFF1ZXJ5UmVwYXlQbGFuUGFyYW1zKCk7CgogICAgICAgICRxdWVyeVJlcGF5UGxhblBhcmFtcy0+c2V0TG9hbk5vKCR0aGlzLT5nZXRMb2FuTm8oKSk7CgogICAgICAgICRyZXF1ZXN0ID0gWwogICAgICAgICAgICAnbWV0aG9kJyA9PiAnUXVlcnlSZXBheVBsYW4nLAogICAgICAgICAgICAncGFyYW1zJyA9PiBbJ2FwcGx5TGlzdCcgPT4gWyRxdWVyeVJlcGF5UGxhblBhcmFtcy0+dG9BcnJheSgpXV0sCiAgICAgICAgXTsKCgogICAgICAgICRyZXN1bHQgPSBCaXpTZnlXZWJDbGllbnQ6OmJhbmtGdW5kU2VuZERhdGEoJHJlcXVlc3QsICR0aGlzLT5nZXRGdW5kU291cmNlKCkpOwogICAgICAgIGlmICghJHJlc3VsdCB8fCBlbXB0eSgkcmVzdWx0Wydjb2RlJ10pKSB7CiAgICAgICAgICAgIExvZzo6YmFua0Nhc2goJGNhc2hMb2FuT3JkZXItPmdldE9yZGVyTnVtYmVyKCkgLiAn5ZCM5q2l6L+Y5qy+6K6h5YiS6L+U5Zue54q25oCBZmFsc2UnKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKCRyZXN1bHRbJ2NvZGUnXSAhPSAnMDAwMDAwJykgewogICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpIC4gJ+WQjOatpei/mOasvuiuoeWIkui/lOWbnu+8micgLiBqc29uX2VuY29kZSgkcmVzdWx0KSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChlbXB0eSgkcmVzdWx0WydkYXRhJ11bJ3Jlc3VsdExpc3QnXSkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgZm9yZWFjaCAoJHJlc3VsdFsnZGF0YSddWydyZXN1bHRMaXN0J10gYXMgJGxpc3QpIHsKICAgICAgICAgICAgJGxvYW5ObyA9ICRsaXN0Wydsb2FuTm8nXSA/PyAnJzsKICAgICAgICAgICAgaWYgKCRsb2FuTm8gIT0gJHRoaXMtPmdldExvYW5ObygpKSB7CiAgICAgICAgICAgICAgICBMb2c6OmJhbmtDYXNoKCRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpIC4gJ+WQjOatpei/mOasvuiuoeWIkui/lOWbnuWAn+aNruWNleWPt+S4jeWMuemFje+8micgLiAkbG9hbk5vKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBCYW5rQ2FzaFJlcGF5UGxhbnM6OmNyZWF0ZVBsYW5zKCR0aGlzLCAkbGlzdCA/PyBbXSk7CiAgICAgICAgICAgIGlmICghZW1wdHkoJGxpc3RbJ3JlcGF5UGxhbkxpc3QnXSkpIHsKICAgICAgICAgICAgICAgIC8vaWYgKCR0aGlzLT5nZXRCaXpDaGFubmVsKCkgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIENhc2hCaWxsOjpzeW5jUmVwYXlTY2hlZHVsZUxpc3RTcCgkY2FzaExvYW5PcmRlci0+Z2V0T3JkZXJOdW1iZXIoKSwgJGxpc3RbJ3JlcGF5UGxhbkxpc3QnXSk7CiAgICAgICAgICAgICAgICAvKn0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5L+h6LS3572R5YWz57O757uf6K+35rGCYXBpCiAgICAgICAgICAgICAgICAgICAgQml6U2Z5V2ViQ2xpZW50OjpzZW5kQ3JlZGl0QXBpUmVxdWVzdCgnYWZ0ZXIuYmlsbC5zeW5jQ2FzaEJpbGwnLCBbCiAgICAgICAgICAgICAgICAgICAgICAgICdvcmRlcl9udW1iZXInID0+ICRjYXNoTG9hbk9yZGVyLT5nZXRPcmRlck51bWJlcigpLAogICAgICAgICAgICAgICAgICAgICAgICAnZnVuZF9zb3VyY2UnID0+ICRjYXNoTG9hbk9yZGVyLT5nZXRGdW5kU291cmNlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICdwbGFuJyA9PiAkbGlzdFsncmVwYXlQbGFuTGlzdCddLAogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgfSovCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgfQoKCiAgICBwdWJsaWMgIGZ1bmN0aW9uIGxlbmRDb250cmFjdFF1ZXJ5KCkKICAgIHsKICAgICAgICAkcGFyYW1zID0gbmV3IExlbmRDb250cmFjdFF1ZXJ5UGFyYW1zKCk7CiAgICAgICAgJHBhcmFtcy0+c2V0T3JkZXJObygkdGhpcy0+Z2V0T3V0T3JkZXJOdW1iZXIoKSk7CgogICAgICAgICRyZXF1ZXN0ID0gWwogICAgICAgICAgICAnbWV0aG9kJyA9PiAnTGVuZENvbnRyYWN0UXVlcnknLAogICAgICAgICAgICAncGFyYW1zJyA9PiAkcGFyYW1zLT50b0FycmF5KCksCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIEJpelNmeVdlYkNsaWVudDo6YmFua0Z1bmRTZW5kRGF0YSgkcmVxdWVzdCwgJHRoaXMtPmdldEZ1bmRTb3VyY2UoKSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHJlcGF5bWVudChDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyLCBDYXNoUmVwYXltZW50ICRjYXNoUmVwYXltZW50KQogICAgewogICAgICAgIHJldHVybiBCYW5rQ2FzaFJlcGF5UGxhbnM6OnJlcGF5bWVudCgkY2FzaExvYW5PcmRlciwgJGNhc2hSZXBheW1lbnQsICR0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtICRvcmRlck51bWJlcgogICAgICogQHJldHVybiBCYW5rQ2FzaExvYW5PcmRlcgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE9yZGVyKCRvcmRlck51bWJlcikKICAgIHsKICAgICAgICByZXR1cm4gc3RhdGljOjpmaW5kKFsnb3JkZXJfbnVtYmVyJyA9PiAkb3JkZXJOdW1iZXJdKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcHJlUmVwYXlUcmlhbCgpCiAgICB7CiAgICAgICAgJHBhcmFtcyA9IG5ldyBQcmVSZXBheVRyaWFsUGFyYW1zKCk7CgogICAgICAgICRwYXJhbXMtPnNldE9yZGVyTm8oJHRoaXMtPmdldE91dE9yZGVyTnVtYmVyKCkpLT5zZXRBZHZhbmNlRmxhZygyKTsKCiAgICAgICAgJHJlcXVlc3QgPSBbCiAgICAgICAgICAgICdtZXRob2QnID0+ICdQcmVSZXBheVRyaWFsJywKICAgICAgICAgICAgJ3BhcmFtcycgPT4gJHBhcmFtcy0+dG9BcnJheSgpLAogICAgICAgIF07CgogICAgICAgIHJldHVybiBCaXpTZnlXZWJDbGllbnQ6OmJhbmtGdW5kU2VuZERhdGEoJHJlcXVlc3QsICR0aGlzLT5nZXRGdW5kU291cmNlKCkpOwogICAgfQoKCiAgICAvKioKICAgICAqIEBwYXJhbSAkbG9hblVzYWdlCiAgICAgKiBAcmV0dXJuIG1peGVkfHN0cmluZwogICAgICovCgogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRMb2FuUHVycG9zZSgkbG9hblVzYWdlKQogICAgewogICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAn5Liq5Lq65pel5bi45raI6LS5JyA9PiAnNjYnLAogICAgICAgICAgICAn5pWZ6IKyJyA9PiAnNScsCiAgICAgICAgICAgICfoo4Xkv64nID0+ICcxJywKICAgICAgICAgICAgJ+WMu+eWlycgPT4gJzY0JywKICAgICAgICAgICAgJ+aXhea4uCcgPT4gJzYnLAogICAgICAgICAgICAn5py656WoJyA9PiAnNjUnLAogICAgICAgIF07CgogICAgICAgIHJldHVybiAkZGF0YVskbG9hblVzYWdlXSA/PyAnOTknOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TGlzdEJ5U3RhdHVzKCRzdGF0dXMgPSBbXSkKICAgIHsKICAgICAgICByZXR1cm4gKG5ldyBzdGF0aWMoKSkKICAgICAgICAgICAgLT53aGVyZUluKCdzdGF0dXMnLCAkc3RhdHVzKQogICAgICAgICAgICAtPmFuZFdoZXJlKCdjcmVhdGVkX3RpbWUnLCBkYXRlKCdZLW0tZCBIOmk6cycsIFRpbWU6OnRpbWUoKSAtIDg2NDAwICogNSksICc+JykKICAgICAgICAgICAgLT5hbmRXaGVyZSgnYml6X2NoYW5uZWwnLCAxKQogICAgICAgICAgICAtPm9yZGVyQnkoKQogICAgICAgICAgICAtPmxpbWl0KDEwMDApCiAgICAgICAgICAgIC0+Z2V0QWxsKCk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGNhbmNlbEZ1bmRPcmRlcihDYXNoTG9hbk9yZGVyICRjYXNoTG9hbk9yZGVyKQogICAgewogICAgICAgIC8vIFRPRE86IEltcGxlbWVudCBjYW5jZWxGdW5kT3JkZXIoKSBtZXRob2QuCiAgICB9Cn0=</text>
      </register>
      <register name="q" type="4">
        <text />
      </register>
      <register name="2" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="r" type="4">
        <text>'</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">ICAgICAgICAkcGF5UmVzdWx0Cg==</text>
      </register>
      <register name="s" type="4">
        <text>&quot;</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgICAgICRyZXNwb25zZSA9ICR0aGlzLT5oYW5kbGVSZXF1ZXN0KCR0aGlzLT5yZXF1ZXN0KTsKICAgICAgICRyZXNwb25zZS0+c2VuZCgpOwogICAgICAgcmV0dXJuICRyZXNwb25zZS0+ZXhpdFN0YXR1czsK</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ICAgICAgIAo=</text>
      </register>
      <register name="w" type="4">
        <keys>
          <key char="73" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="62" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="95" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="62" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="69" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="95" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="62" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="69" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="95" code="0" mods="0" />
          <key char="118" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="62" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="69" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="118" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="62" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="87" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="69" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="62" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="87" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="69" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="8" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
        </keys>
      </register>
      <register name="8" type="2">
        <text encoding="base64">ICAgICAgICB0cnkK</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICAgICAgICAkdGhpcy0+Y29uZmlnID0gJGNvbmZpZzsK</text>
      </register>
      <register name=":" type="4">
        <text>wq</text>
      </register>
    </registers>
  </component>
  <component name="VimSearchSettings">
    <search>
      <last-search encoding="base64">XDxib2R5UGFyYW1zXD4=</last-search>
      <last-offset />
      <last-pattern encoding="base64">XDxib2R5UGFyYW1zXD4=</last-pattern>
      <last-replace>;</last-replace>
      <last-substitute encoding="base64">XDx1c2VQb29sXD4=</last-substitute>
      <last-dir>1</last-dir>
      <show-last>false</show-last>
    </search>
  </component>
  <component name="VimSettings">
    <state version="6" enabled="true" />
    <notifications>
      <idea-join enabled="true" />
      <idea-put enabled="true" />
    </notifications>
  </component>
</application>